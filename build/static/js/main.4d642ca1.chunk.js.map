{"version":3,"sources":["assets/images/logo_all.png","assets/images/nlm_logo_full_transparent.png","assets/images/UB-woodblock-closeup.jpg","store/types/index.js","store/actions/asyncActionUtils.js","store/apis/endpoints.js","store/_constants.js","store/apis/wordpress/fetchWPType.js","store/apis/googleSheets/fetchGS.js","store/actions/fetchActions.js","store/apis/elasticsearch/fetchAll.js","store/apis/elasticsearch/fetchWorks.js","store/apis/elasticsearch/fetchAuthors.js","store/apis/elasticsearch/fetchSubjects.js","store/apis/elasticsearch/fetchIDs.js","store/apis/elasticsearch/fetchResults.js","store/actions/actions.js","serviceWorker.js","components/containers/Language.js","components/Languages.js","components/containers/NavItem.js","components/NavDropdown.js","store/hooks/useWindowSize.js","components/Nav.js","components/Header.js","components/Footer.js","components/SidebarFilterItem.js","components/SidebarFilterList.js","store/selectors/selectorDetailsItem.js","store/selectors/selectorTotal.js","components/SidebarFilters.js","components/SidebarBrowse.js","components/Sidebar.js","components/SearchCard.js","components/SearchResults.js","components/MenuOption.js","components/SearchMenu.js","components/SearchContainer.js","components/Stats.js","tools/utilities.js","components/Posts.js","components/Page.js","components/SectionLink.js","components/SectionLinks.js","tools/ui/sections/buildExplore.js","tools/ui/sections/buildImg.js","tools/ui/types/buildWorkType.js","tools/ui/types/buildPersonType.js","tools/ui/types/buildPlaceType.js","tools/ui/types/buildSubjectType.js","tools/ontology/bdrcNotes.js","tools/ui/sections/buildPersonalDetails.js","components/Modal.js","tools/ui/sections/buildNotes.js","tools/ui/sections/buildMeta.js","components/SearchBar.js","components/SearchForm.js","components/router/RouteSwitch.js","store/reducers/fetchWordpress.js","store/reducers/fetchGoogleSheets.js","store/initialState.js","store/reducers/fetchElasticsearch.js","store/reducers/selectLanguage.js","store/reducers/selectPage.js","store/reducers/setCollapse.js","store/reducers/setMenu.js","store/reducers/setCollection.js","store/reducers/setCurrentSearchTerm.js","store/reducers/setOffsets.js","store/reducers/setModal.js","store/reducers/addTermToHistory.js","store/reducers/addTermToFilter.js","store/reducers/setBrowse.js","store/reducers/index.js","store/localization/i18n.js","store/localization/detector.js","store/initialize.js","index.js","store/configureStore.js","assets/images/nlm_logo_transparent.png"],"names":["module","exports","fetchTypes","status","actions","SET_LANG","SET_PAGE","SET_COLLAPSE","SET_MENU","SET_BROWSE","SET_COLLECTION","SET_OFFSETS","SET_MODAL","RESET_OFFSETS","CLEAR_RESULTS","CLEAR_FILTER_TERM","CLEAR_FILTER_ARRAY","DELETE_FULL_TEXT","REQUEST_PAGES","RECEIVE_PAGES","REQUEST_POSTS","RECEIVE_POSTS","REQUEST_GS","RECEIVE_GS","REQUEST_WORKS","RECEIVE_WORKS","REQUEST_ALL","RECEIVE_ALL","REQUEST_AUTHORS","RECEIVE_AUTHORS","REQUEST_SUBJECTS","RECEIVE_SUBJECTS","REQUEST_PLACES","RECEIVE_PLACES","REQUEST_ID","RECEIVE_ID","CLEAR_ID","REQUEST_RESULTS","RECEIVE_RESULTS","ADD_TERM_TO_HISTORY","ADD_TERM_TO_FILTER","SET_CURRENT_SEARCH_TERM","SET_CURRENT_FILTER_TERM","SET_FILTER_ARRAY","REMOVE_FILTER","getAsyncAction","actionType","asyncFunc","actionTypeRequest","actionTypeReceive","actionTypeClear","actionTypeError","args","dispatch","a","async","some","el","includes","type","data","payload","error","expressOptions","express","window","location","port","expressURL","axios","create","baseURL","elastic","wordpress","wpURL","gs","IIIFImageAPI","constants","routerActions","LOCATION_CHANGE","buildYear","defaultLanguage","languages","en","mn","pages","browseOptions","menuItems","key","label","sectionLinks","node","icon","browseItems","browseTypes","searchTypeOptions","color","defaultColor","searchOptions","searchOffset","resultSetSize","searchTerms","links","wpAdmin","acipEmail","nlmSite","smallScreenWidth","bdrGender","bdrObjectType","bdrPurlURL","collections","name","searchParams","initialIndex","initialIndexPrefix","size","v1Indices","v2Indices","IIIFsuffix","get","d","reduce","r","x","Object","keys","find","acf","language","push","console","spreadsheet","fetchAllAction","fetchWorksAction","offset","params","fetchAuthorsAction","fetchSubjectsAction","fetchIDAction","doc_id","code","charAt","ids","JSON","stringify","lengthIDs","fetchResultsAction","term","filterArray","fetchGSAction","Promise","response","Tabletop","init","callback","tabletop","Stats","elements","gsData","forEach","StatName","split","join","isNaN","Value","String","replace","fetchWPPostsAction","fetchWPType","fetchWPPagesAction","setLanguage","setPage","page","setMenu","menu","handleFilters","filter","isActive","getState","resolve","reject","then","currentSearchTerm","catch","log","Boolean","hostname","match","withN","withNamespaces","active","children","lang","i18n","onClick","lng","changeLanguage","className","disabled","connect","state","ownProps","selectedLanguage","props","list","entries","t","map","k","l","p","to","selectedPage","dropdownOptions","alignment","closeOnClick","constrainWidth","hover","inDuration","useEffect","dropdownElem","document","querySelectorAll","M","Dropdown","Fragment","href","data-target","id","debounce","func","delay","inDebounce","context","this","arguments","clearTimeout","setTimeout","apply","navigation","width","isClient","getSize","innerWidth","undefined","height","innerHeight","useState","windowSize","setWindowSize","handleResize","addEventListener","removeEventListener","useWindowSize","slugs","nav","slug","nav_label","length","NavDropdown","WP","isFetching","items","c","order","history","src","nlm_full","alt","target","rel","SidebarFilterItem","setStateAndFilter","setState","f","listItem","activated","doc_count","Component","useDispatch","useSelector","results","ES","search","hits","selectorDetailsItem","itemDetails","newObj","_source","v","Array","isArray","getTotal","browse","total","value","SidebarFilters","componentDidMount","sidenavElems","collapsibleElems","Sidenav","sidenavOptions","Collapsible","collapsibleOptions","componentDidUpdate","buildFilters","title","buckets","b","i","edge","accordion","screenWidth","filters","aggregations","selectedBrowse","selectedMenu","BrowseItem","item","currentBrowse","types","Sidebar","updateWindowDimensions","renderFilters","showResultTotal","SidebarBrowse","activeSidenav","sidenavLink","sidenavLinkText","sidenavClose","filterBtn","SearchCard","idx","handleShowDetails","getType","col","toLowerCase","getColor","pathname","_id","_label","modalID","MenuOption","option","handleClick","current","style","display","SearchMenu","menuItem","Tabs","duration","ref","m","currentSearch","statList","stats","constructor","LastUpdate","PagesDigitized","VolumesDigitized","img","GS","Set","uniqueFilters","isFilterTerm","e","uniq","prims","boolean","number","string","objs","hasOwnProperty","indexOf","fetchingPosts","posts","nestedObj","prop","arr","sort","post","mediaURL","_embedded","source_url","parseInt","columns","dangerouslySetInnerHTML","__html","content","rendered","nlm_logo","Page","renderContent","resetPage","setNumber","0","1","2","3","4","rgbLight","rgbDark","backgroundImage","backgroundSize","subtitle","fetchingWP","renderPage","SectionLink","section","_value","SectionLinks","convert","elems","newSection","substring","convertSection","itemDetail","_img","_manifestURL","showNotFound","setShowNotFound","timer","manifest","buildWorkType","itemRelated","notes","workNumberOfVolumes","workBiblioNote","workExtentStatement","workLangScript","workPublisherName","_firstImageURL","volumes","attribution","pubName","explore","buildExplore","buildPersonType","works","buildPlaceType","buildSubjectType","unpackNotes","notesArray","possibleIDs","parsedNotes","nlmIDs","buildGender","personGender","gender","buildParents","father","mother","parent","parents","Modal","handleBackButton","initialRender","preventDefault","goBack","stopPropagation","showHideClassName","show","buildType","topSection","catalog","_notes","workCatalogInfo","personal","hasFather","hasMother","hasParent","buildPersonalDetails","s","buildNotes","meta","trim","buildMeta","closeBtn","setModal","related","SearchBar","offsetCurrent","offsetSize","initialLoad","handleNext","action","offsets","setOffsets","handlePrev","handleChange","handleSearch","resetOffsets","clearFilterArray","addTermToHistory","setCurrentSearchTerm","setUpControls","properOffset","disableNext","currentlyFetchingResults","disablePrev","paginationMsg","htmlFor","autoFocus","onChange","onKeyDown","SidebarFilterList","getStatus","offsetType","NavSub","RouteSwitch","previousLocation","generalCheckAndUpdate","prevProps","url","path","component","Header","exact","render","SearchForm","SearchContainer","lastUpdated","Date","now","initialState","authors","subjects","places","errorStatus","RESULTS","AGGS","WORKS","AUTHORS","SUBJECTS","ID","RELATED","collapse","collection","from","combineReducers","router","connectRouter","addTermToFilter","selectLanguage","selectPage","setBrowse","setCollapse","setCollection","fetchWordpress","fetchGoogleSheets","fetchElasticsearch","use","Backend","reactI18nextModule","fallbackLng","debug","preload","returnObjects","detection","lookupFromPathIndex","lookupLocalStorage","caches","excludeCacheFor","interpolation","escapeValue","react","wait","store","preloadedState","createBrowserHistory","middlewares","thunkMiddleware","enhancers","applyMiddleware","composedEnhancers","compose","createStore","reducers","configureStore","ReactDOM","body","classList","add","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"yFAAAA,EAAOC,QAAU,IAA0B,sC,sFCA3CD,EAAOC,QAAU,IAA0B,uD,oBCA3CD,EAAOC,QAAU,IAA0B,kD,mcCA9BC,EACF,QADEA,EAEJ,MAFIA,EAGA,UAHAA,EAIC,WAJDA,EAMA,UANAA,EAOL,KAPKA,EAQF,QAREA,EASF,QATEA,EAUL,KAGKC,EAEF,QAFEA,EAKA,UALAA,EAMA,UANAA,EAOF,QAGEC,EAAU,CACnBC,SAAU,WACVC,SAAU,WACVC,aAAc,eACdC,SAAU,WACVC,WAAY,aACZC,eAAgB,iBAChBC,YAAa,cACbC,UAAW,YACXC,cAAe,gBACfC,cAAe,gBACfC,kBAAmB,oBACnBC,mBAAoB,qBACpBC,iBAAkB,mBAClBC,cAAe,gBACfC,cAAe,gBACfC,cAAe,gBACfC,cAAe,gBACfC,WAAY,aACZC,WAAY,aACZC,cAAe,gBACfC,cAAe,gBACfC,YAAa,cACbC,YAAa,cACbC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,iBAAkB,mBAClBC,iBAAkB,mBAClBC,eAAgB,iBAChBC,eAAgB,iBAChBC,WAAY,aACZC,WAAY,aACZC,SAAU,WACVC,gBAAiB,kBACjBC,gBAAiB,kBACjBC,oBAAqB,sBACrBC,mBAAoB,qBACpBC,wBAAyB,0BACzBC,wBAAyB,0BACzBC,iBAAkB,mBAClBC,cAAe,iBCVJC,EAnDQ,SAAC,GAA+B,IAA7BC,EAA4B,EAA5BA,WAAYC,EAAgB,EAAhBA,UAC5BC,EAAiB,UAAM7C,EAAN,YAAwB2C,GACzCG,EAAiB,UAAM9C,EAAN,YAAwB2C,GACzCI,EAAe,UAAM/C,EAAN,YAAsB2C,GACrCK,EAAe,UAAMhD,EAAN,YAAsB2C,GA4C3C,OAfoB,SAAAM,GAChB,OAAO,SAAMC,GAAN,iBAAAC,EAAAC,OAAA,sDACC,CAAC,KAAM,WAAWC,MAAK,SAAAC,GAAE,OAAIX,EAAWY,SAASD,OACjDJ,EAtBD,CACHM,KAAMT,IAuBNG,EA9BG,CACHM,KAAMX,IAyBH,oBAAAM,EAAA,MAMwBP,EAAUK,IANlC,gBAMSQ,EANT,EAMSA,KACRP,EArBD,CACHM,KAAMV,EACNY,QAmB2BD,IAPxB,kDASCP,GAjBUS,EAiBa,EAAD,GAhBvB,CACHH,KAAMR,EACNU,QAASC,KAKN,kCARW,IAAAA,IAQX,uB,kBCjCTC,EAEO,+BAFPA,EAIM,wBAKNC,EACuB,SAAzBC,OAAOC,SAASC,KACVJ,EACAA,EAEGK,EAAaC,IAAMC,OAAO,CACnCC,QAASP,IAIAQ,EAGE,mBAHFA,EAIC,YAJDA,EAKG,cALHA,EAMK,gBANLA,EAOM,iBAPNA,EASA,YAIAC,EACH,wBADGA,EAGH,iBAGGC,EAAQL,IAAMC,OAAO,CAC9BC,QAAQ,GAAD,OAAKE,GAAL,OAAsBA,KAIpBE,EACP,0CADOA,EAGH,+CAHGA,EAKC,oBCnDRC,EAEI,MAFJA,EAGQ,IAHRA,EAIgB,cAGTC,EAAY,CACrBC,cAAe,CACXC,gBAAiB,4BAErBC,UAAW,OACXC,gBAAiB,KACjBC,UAAW,CACPC,GAAI,UACJC,GAAI,aAERC,MAAO,CAAC,OAAQ,YAChBC,cAAe,CAAC,QAAS,SAAU,WACnCC,UAAW,CACP,CAAEC,IAAK,SAAUC,MAAO,UACxB,CAAED,IAAK,SAAUC,MAAO,mBAE5BC,aAAc,CACV,CAAEF,IAAK,UAAWG,KAAM,kBAAmBC,KAAM,eACjD,CAAEJ,IAAK,UAAWG,KAAM,kBAAmBC,KAAM,qBACjD,CAAEJ,IAAK,OAAQG,KAAM,GAAIC,KAAM,sBAC/B,CAAEJ,IAAK,SAAUG,KAAM,WAAYC,KAAM,oBACzC,CAAEJ,IAAK,QAASG,KAAM,YAAaC,KAAM,sBACzC,CAAEJ,IAAK,UAAWG,KAAM,cAAeC,KAAM,gBAEjDC,YAAa,CACT,CAAEL,IAAK,QAASC,MAAO,SACvB,CAAED,IAAK,UAAWC,MAAO,WACzB,CAAED,IAAK,WAAYC,MAAO,aAE9BK,YAAa,CAAC,QAAS,UAAW,YAClCC,kBAAmB,CACf,CAAEP,IAAK,OAAQQ,MAAO,YACtB,CAAER,IAAK,QAASQ,MAAO,YACvB,CAAER,IAAK,UAAWQ,MAAO,YACzB,CAAER,IAAK,SAAUQ,MAAO,YACxB,CAAER,IAAK,QAASQ,MAAO,YAE3BC,aAAc,WACdC,cAAe,CACXC,aAAc,EACdC,cAAe,IAEnBC,YAAa,CAAC,OAAD,uGAWbC,MAAO,CACHC,QAAS,oCACTC,UAAW,gCACXC,QAAS,iCAEbC,iBAAkB,IAClBC,UAAW,CACP,iBAAkB,OAClB,mBAAoB,UAGxBC,cAAe,CACX,2BAA4B,cAGhCC,WAAW,gCAEXC,YAAa,CACT,CAAEtB,IAAK,IAAKuB,KAAM,gBAClB,CAAEvB,IAAK,IAAKuB,KAAM,iBAGtBC,aAAc,CACVC,aAAc,eACdC,mBAAoB,WACpBvD,KAAM,OACNwD,KAAM,IAGVC,UAAW,CAAC,QACZC,UAAW,CAAC,QACZC,WAAW,IAAD,OA1FF,OA0FE,YAA6B1C,EAA7B,YAAkDA,EAAlD,YAA2EA,ICzFnFM,EAAcL,EAAdK,UAES,WAAMvB,GAAN,iBAAAL,EAAAC,OAAA,2EAAAD,EAAA,MAEYoB,EAAM6C,IAAN,UAAa5D,EAAb,aAFZ,cAEDC,EAFC,OAID4D,EAAI5D,EAAKA,KAAK6D,QAAO,SAACC,EAAGpE,GAC3B,IAAMqE,EAAIC,OAAOC,KAAK3C,GAAW4C,MAC7B,SAAAtC,GAAG,OAAIN,EAAUM,KAASlC,EAAEyE,IAAIC,YAIpC,OAFAN,EAAEC,GAAKD,EAAEC,IAAM,GACfD,EAAEC,GAAGM,KAAK3E,GACHoE,IACR,IAXI,kBAYA,CAAE9D,KAAM4D,IAZR,uCAcPU,QAAQpE,MAAM,mBAAd,MAdO,iF,kBCDTqE,EAAW,UAAMxD,GAAN,OAAaA,GAAb,OAAwBA,GCS5ByD,GAAiBvF,EAAe,CACzCC,WAAY5C,EACZ6C,UCZW,0BAAAO,EAAAC,OAAA,2EAAAD,EAAA,MAEYc,EAAWmD,IAAI/C,IAF3B,cAEDZ,EAFC,yBAGA,CAAEA,KAAMA,EAAKA,OAHb,uCAKPsE,QAAQpE,MAAM,6BAAd,MALO,mFDcFuE,GAAmBxF,EAAe,CAC3CC,WAAY5C,EACZ6C,UEhBW,SAAMK,GAAN,iBAAAE,EAAAC,OAAA,uDACP+E,EAASlF,EAAKkF,OAASlF,EAAKkF,OAAS,EAD9B,oBAAAhF,EAAA,MAGYc,EAAWmD,IAAI/C,EAAoB,CAClD+D,OAAQ,CAAED,aAJP,cAGD1E,EAHC,yBAOA,CAAEA,KAAMA,EAAKA,OAPb,uCASPsE,QAAQpE,MAAM,+BAAd,MATO,mFFkBF0E,GAAqB3F,EAAe,CAC7CC,WAAY5C,EACZ6C,UGpBW,SAAMK,GAAN,iBAAAE,EAAAC,OAAA,uDACP+E,EAASlF,EAAKkF,OAASlF,EAAKkF,OAAS,EAD9B,oBAAAhF,EAAA,MAGYc,EAAWmD,IAAI/C,EAAsB,CACpD+D,OAAQ,CAAED,aAJP,cAGD1E,EAHC,yBAOA,CAAEA,KAAMA,EAAKA,OAPb,uCASPsE,QAAQpE,MAAM,+BAAd,MATO,mFHsBF2E,GAAsB5F,EAAe,CAC9CC,WAAY5C,EACZ6C,UIxBW,SAAMK,GAAN,iBAAAE,EAAAC,OAAA,uDACP+E,EAASlF,EAAKkF,OAASlF,EAAKkF,OAAS,EAD9B,oBAAAhF,EAAA,MAGYc,EAAWmD,IAAI/C,EAAuB,CACrD+D,OAAQ,CAAED,aAJP,cAGD1E,EAHC,yBAOA,CAAEA,KAAMA,EAAKA,OAPb,uCASPsE,QAAQpE,MAAM,+BAAd,MATO,mFJ8BF4E,GAAgB7F,EAAe,CACxCC,WAAY5C,EACZ6C,UKhCW,SAAM4F,GAAN,mBAAArF,EAAAC,OAAA,uDACLqF,EAAOD,EAAOE,OAAO,GACvBC,EAAMC,KAAKC,UAAU,CAACL,IACV,EAHL,oBAAArF,EAAA,MAKYc,EAAWmD,IAAI/C,EAAiB,CAC/C+D,OAAQ,CAAEO,MAAKG,UAHP,EAGkBL,WANvB,cAKDhF,EALC,yBAQA,CAAEA,KAAMA,EAAKA,OARb,yCAUPsE,QAAQpE,MAAM,mBAAd,MAVO,oFLmCFoF,GAAqBrG,EAAe,CAC7CC,WAAY5C,EACZ6C,UMrCW,SAAMK,GAAN,qBAAAE,EAAAC,OAAA,uDACP4F,EAAO/F,EAAK+F,KAAO/F,EAAK+F,KAAO,GAC/Bb,EAASlF,EAAKkF,OAASlF,EAAKkF,OAAS,EAGrCc,EAAchG,EAAKgG,YAAchG,EAAKgG,YAAc,KAL7C,oBAAA9F,EAAA,MAOYc,EAAWmD,IAAI/C,EAAmB,CACjD+D,OAAQ,CAAEY,OAAMb,SAAQc,kBARrB,cAODxF,EAPC,yBAUA,CAAEA,KAAMA,EAAKA,OAVb,yCAYPsE,QAAQpE,MAAM,iCAAd,MAZO,oFNyCFuF,GAAgBxG,EAAe,CACxCC,WAAY5C,EACZ6C,UD3BW,4BAAAO,EAAAC,OAAA,2EAAAD,EAAA,MAbM,EAAAA,EAAAC,OAAA,kEAAAD,EAAA,MACJ,IAAIgG,SAAQ,SAACC,EAAUzF,GAChC0F,IAASC,KAAK,CACVjE,IAAK2C,EACLuB,SAAU,SAAC9F,EAAM+F,GACbJ,EAAS3F,EAAKgG,MAAMC,UACpB/F,EAAM6F,UAND,8EAaN,cAED/F,EAFC,OAKHkG,EAAS,GACblG,EAAKmG,SAAQ,SAAAvC,GACT,IAAMhC,EAAMgC,EAAEwC,SAASC,MAAM,KAAKC,KAAK,IACvCJ,EAAOtE,GAAO2E,MAAM3C,EAAE4C,OAChB5C,EAAE4C,MACFC,OAAO7C,EAAE4C,OAAOE,QAAQ,oBAAqB,UAVhD,kBAYA,CAAE1G,KAAMkG,IAZR,uCAcP5B,QAAQpE,MAAM,sBAAd,MAdO,mFC+BFyG,GAAqB1H,EAAe,CAC7CC,WAAY5C,EACZ6C,UAAWyH,IAGFC,GAAqB5H,EAAe,CAC7CC,WAAY5C,EACZ6C,UAAWyH,IOvCFE,GAAc,SAAA1C,GAAQ,MAAK,CACpCrE,KAAMvD,EAAQC,SACd2H,aAWS2C,GAAU,SAAAC,GAAI,MAAK,CAC5BjH,KAAMvD,EAAQE,SACdsK,SAaSC,GAAU,SAAAC,GAAI,MAAK,CAC5BnH,KAAMvD,EAAQI,SACdsK,SAgDSC,GAAgB,SAACC,EAAQC,GAAT,OAAsB,SAAC5H,EAAU6H,GAC1D,OAAO7H,GAoBmBM,EAnBRvD,EAAQoC,mBAmBMqB,EAnBc,CACtCmH,OAAQA,EACRC,SAAUA,GAkBX,SAAA5H,GAAQ,OACX,IAAIiG,SAAQ,SAAC6B,EAASC,GAClB/H,EAAS,CAAEM,KAAMA,EAAME,QAASA,IAChCsH,UAlBHE,MAAK,WAAO,IAAD,EACmCH,IAAnCI,EADA,EACAA,kBAAmBlC,EADnB,EACmBA,YAC3B/F,EACI6F,GAAmB,CACfC,KAAMmC,EACNlC,YAAaA,QAIxBmC,OAAM,SAAAzH,GACHoE,QAAQsD,IAAI,kCAAmC1H,MAIpD,IAAuBH,EAAME,ICxGhB4H,QACW,cAA7BxH,OAAOC,SAASwH,UAEe,UAA7BzH,OAAOC,SAASwH,UAEhBzH,OAAOC,SAASwH,SAASC,MACvB,2D,2ECXA1G,I,MAAoBJ,EAApBI,iBAgCA2G,IAAQ,IAAIC,KAAJ,EA9BG,SAAC,GAAgD,IAA9CC,EAA6C,EAA7CA,OAAQC,EAAqC,EAArCA,SAAU1I,EAA2B,EAA3BA,SAAU2I,EAAiB,EAAjBA,KAAMC,EAAW,EAAXA,KAKlD,OACI,wBACIzG,IAAKuG,EACLG,QAAS,WAPE,IAAAC,EAQP9I,EAASqH,GAAYsB,EAAMC,IARpBE,EASIH,EARnBC,EAAKG,eAAeD,IAUhBE,UAAWP,EAAS,cAAgB,QAEpC,4BACItG,IAAKuG,EACLO,WAAUR,EACVO,UAAU,YAETN,OAYFQ,gBANS,SAACC,EAAOC,GAAR,MAAsB,CAC1CX,OAAQW,EAASC,mBAAqBF,EAAME,iBAC5CV,KAAMS,EAASC,kBAAoBzH,MAIxBsH,CAAyBX,ICXlCA,IAAQ,IAAIC,KAAJ,EApBI,SAAAc,GACd,IAAIC,EAcJ,OAZAA,EAAOhF,OAAOiF,QAAQF,EAAMG,EAAE,cAAcC,KAAI,YAAa,IAAD,oBAAVC,EAAU,KAAPC,EAAO,KAElDC,EAAmB,SAAfP,EAAM/B,KAAkB,GAAxB,WAAiC+B,EAAM/B,MACjD,OACI,kBAAC,IAAD,CAAMpF,IAAKwH,EAAGG,GAAE,WAAMH,GAAN,OAAUE,IACtB,kBAAC,GAAD,CAAU1H,IAAKyH,EAAGP,iBAAkBM,GAC/BC,OAMV,wBAAIZ,UAAU,iBAAiBO,MAM3BL,gBAHS,SAAAC,GAAK,MAAK,CAAE5B,KAAM4B,EAAMY,gBAGjCb,CAAyBX,ICOzBW,gBARS,SAACC,EAAOC,GAAR,MAAsB,CAC1CX,OAAQW,EAASW,eAAiBZ,EAAMY,iBAGjB,SAAC/J,EAAUoJ,GAAX,MAAyB,CAChDP,QAAS,kBAAM7I,EAASsH,GAAQ8B,EAASW,mBAG9Bb,EA/BC,SAAC,GAAD,IAAGT,EAAH,EAAGA,OAAQC,EAAX,EAAWA,SAAUG,EAArB,EAAqBA,QAArB,OACZ,wBACI1G,IAAKuG,EACLG,QAASJ,EAAS,KAAOI,EACzBG,UAAWP,EAAS,aAAe,OAGnC,4BACItG,IAAKuG,EACLO,WAAUR,EACVO,UAAU,WAETN,O,oBCfE,eAAgB,IAAb1G,EAAY,EAAZA,MACVgI,EAAkB,CAClBC,UAAW,QACXC,cAAc,EACdC,gBAAgB,EAChBC,OAAO,EACPC,WAAY,KAQhB,OALAC,qBAAU,WACN,IAAMC,EAAeC,SAASC,iBAAiB,qBAC/CC,KAAEC,SAASvE,KAAKmE,EAAcP,MAI9B,kBAAC,IAAMY,SAAP,KACI,uBACI5B,UAAU,0CACV6B,KAAK,KACLC,cAAY,gBAEZ,uBAAG9B,UAAU,iBAEjB,wBAAI+B,GAAG,eAAe/B,UAAU,oBAC3BhH,KCzBXgJ,GAAW,SAACC,EAAMC,GACpB,IAAIC,EACJ,OAAO,WACH,IAAMC,EAAUC,KACVtL,EAAOuL,UACbC,aAAaJ,GACbA,EAAaK,YAAW,kBAAMP,EAAKQ,MAAML,EAASrL,KAAOmL,KCCjE,IA8CM3C,IAAQ,IAAIC,KAAJ,EA9CF,SAAC,GAA8B,IAA5BkD,EAA2B,EAA3BA,WAAYpD,EAAe,EAAfA,MACjBqD,GADgC,EAARlC,EDG3B,WAAqC,IAAdyB,EAAa,uDAAL,IAC5BU,EAA6B,kBAAXhL,OAExB,SAASiL,IACL,MAAO,CACHF,MAAOC,EAAWhL,OAAOkL,gBAAaC,EACtCC,OAAQJ,EAAWhL,OAAOqL,iBAAcF,GANT,MAUHG,mBAASL,GAVN,oBAUhCM,EAVgC,KAUpBC,EAVoB,KA2BvC,OAfA9B,qBAAU,WACN,IAAKsB,EACD,OAAO,EAGX,SAASS,IACLD,EAAcP,KAIlB,OADAjL,OAAO0L,iBAAiB,SAAUtB,GAASqB,EAAcnB,IAClD,WACHtK,OAAO2L,oBAAoB,SAAUF,MAE1C,IAEIF,EC7BSK,GAAVb,OAEN,GAAkB,MAAdD,EACA,OAAO,KAGX7G,QAAQsD,IAAIuD,GAGZ,IAAMe,EAAQf,EAAWhC,KAAI,SAAAgD,GACzB,IAAM7C,EAAkB,SAAd6C,EAAIpE,MAAmB,GAAvB,WAAgCoE,EAAIpE,OAC9C,OACI,kBAAC,IAAD,CAAMnG,IAAKuK,EAAIC,KAAM7C,GAAE,WAAMxB,EAAMpD,OAAO4D,KAAnB,OAAyBe,IAC5C,kBAAC,GAAD,CAAS1H,IAAKuK,EAAIC,KAAM5C,aAAc2C,EAAIpE,OAErCoE,EAAIE,eAKrB,OAAIjB,EAAQ,KAAOD,EAAWmB,OAAS,EAC5B,kBAACC,GAAD,CAAa9K,MAAOyK,IAEpB,wBAAIzD,UAAU,YAAYyD,MAuB1BvD,gBAPS,SAAAC,GAAK,MAAK,CAC9BuC,WAAYvC,EAAM4D,GAAG/K,MAAMgL,WACrB,MAbehL,EAcEmH,EAAM4D,GAAG/K,MAAMiL,MAAM9D,EAAME,kBAb3CrH,EAAM0H,KAAI,SAAAwD,GACb,MAAO,CACH5E,MAAO4E,EAAEP,KAAKtM,SAAS,KAAO6M,EAAEP,KAAK/F,MAAM,KAAK,GAAKsG,EAAEP,KACvDA,KAAMO,EAAEP,KACRC,UAAWM,EAAExI,IAAIkI,UAAUC,OAAS,EAAIK,EAAExI,IAAIkI,UAAYM,EAAEP,KAC5DQ,MAAOD,EAAExI,IAAIyI,YANA,IAAAnL,IAkBVkH,CAAyBX,IClDzB,eAAyB,IAAtB6E,EAAqB,EAArBA,QAAS9E,EAAY,EAAZA,MACvB,OACI,kBAAC,IAAMsC,SAAP,KACI,gCACI,yBAAK5B,UAAU,kBACX,yBAAKA,UAAU,iBACX,kBAAC,GAAD,MACA,kBAAC,GAAD,CAAKoE,QAASA,EAAS9E,MAAOA,S,qCCNhD3G,GAAqBH,EAArBG,UAAWsB,GAAUzB,EAAVyB,MA4DFuF,mBA1DA,SAAC,GAAW,IAATiB,EAAQ,EAARA,EACd,OACI,4BAAQT,UAAU,eACd,yBAAKA,UAAU,aACX,yBAAKA,UAAU,OACX,yBAAKA,UAAU,cACX,yBAAKA,UAAU,QACX,yBACIqE,IAAKC,KACLtB,OAAO,QACPuB,IAAI,oBAIhB,yBAAKvE,UAAU,wBACX,wBAAIA,UAAU,cAAd,SACA,4BACI,4BACI,uBACI6B,KAAM5H,GAAME,UACZqK,OAAO,SACPC,IAAI,uBAEHhE,EAAE,oBAIX,4BACI,uBACIoB,KAAM5H,GAAMG,QACZoK,OAAO,SACPC,IAAI,uBAEHhE,EAAE,yBAIX,4BACI,uBACIoB,KAAM5H,GAAMC,QACZsK,OAAO,SACPC,IAAI,uBAEHhE,EAAE,sBAQ3B,yBAAKT,UAAU,oBAAf,kBACerH,GADf,YAC4B8H,EAAE,SAD9B,aAC2CA,EAAE,iBAD7C,UCzDNiE,I,qNACFvE,MAAQ,CACJV,QAAQ,G,EAGZkF,kBAAoB,SAAAhG,GAAW,IACrB5B,EAAgB,EAAKuD,MAArBvD,YACN,EAAK6H,SACD,CAAEnF,QAAS1C,EAAY5F,MAAK,SAAA0N,GAAC,OAAIA,EAAEzL,QAAUuF,EAAOvF,WACpD,WACI,EAAKkH,MAAMtJ,SAAS0H,GAAcC,EAAQ,EAAKwB,MAAMV,a,0EAKvD,IAAD,SACqC4C,KAAK/B,MAAzCwE,EADD,EACCA,SAAUxN,EADX,EACWA,KAAMyF,EADjB,EACiBA,YAClBgI,GAFC,EAC8BhD,KACjBhF,EAAY5F,MAAK,SAAA0N,GAAC,OAAIA,EAAEzL,QAAU0L,EAAS3L,QAC7D,OACI,yBACI6G,UAAS,2BAAsB+E,EAAY,SAAW,IACtDlF,QAAS,WACL,EAAK8E,kBAAkB,CACnBrN,KAAMA,EACN8B,MAAO0L,EAAS3L,QAIxB,6BACI,8BAAO2L,EAAS3L,KAChB,mCAAS2L,EAASE,UAAlB,MAEHD,EACG,uBAAG/E,UAAU,gCACb,U,GAlCYiF,cA6CjB/E,gBALS,SAAAC,GAAK,MAAK,CAC9BpD,YAAaoD,EAAMpD,YACnBkC,kBAAmBkB,EAAMlB,qBAGdiB,CAAyBwE,IC5CzB,cACX,IAAM1N,EAAWkO,cACXnI,EAAcoI,aAAY,SAAAhF,GAAK,OAAIA,EAAMpD,eACzCqI,EAAUD,aAAY,SAAAhF,GAAK,OAAIA,EAAMkF,GAAGC,OAAOrB,MAAMsB,KAAKA,QAEhE,GAA2B,IAAvBxI,EAAY8G,QAAmC,IAAnBuB,EAAQvB,OACpC,OAAO,KAGX,IAAMgB,EAAI9H,EAAY2D,KAAI,SAAAmE,GACtB,OACI,uBACI1L,IAAG,eAAU0L,EAAEzL,OACf4G,UAAS,iBAAY6E,EAAEvN,KAAd,gBACTuI,QAAS,kBAAM7I,EAAS0H,GAAcmG,GAAG,MAExCA,EAAEzL,MACH,uBAAG4G,UAAU,2CAIzB,OAAO,yBAAKA,UAAU,mBAAmB6E,ICzBtC,SAASW,GAAoBC,GAChC,IAAMC,EAAS,GAgBf,OAfAnK,OAAOiF,QAAQiF,EAAYE,SAASjI,SAAQ,YAAa,IAAD,oBAAViD,EAAU,KAAPiF,EAAO,KAChDA,IAAMC,MAAMC,QAAQF,GAGhBF,EAAO/E,GAFM,kBAANiF,EAEK,CAACA,GAGDA,EAIhBF,EAAO/E,GAAKiF,KAIbF,ECjBJ,SAASK,GAASC,EAAQvH,EAAM0B,GACnC,MAAa,WAAT1B,EACO0B,EAAMkF,GAAGC,OAAOrB,MAAMsB,KAAKU,MAAMC,MAErC/F,EAAMkF,GAAGW,GAAQ/B,MAAMsB,KAAKU,MAAMC,M,ICQvCC,G,YACF,WAAY7F,GAAQ,IAAD,+BACf,8CAAMA,KAaV8F,kBAAoB,WAChB,IAAMC,EAAe7E,SAASC,iBAAiB,YACzC6E,EAAmB9E,SAASC,iBAAiB,gBACnDC,KAAE6E,QAAQnJ,KAAKiJ,EAAc,EAAKlG,MAAMqG,gBACxC9E,KAAE+E,YAAYrJ,KAAKkJ,EAAkB,EAAKnG,MAAMuG,qBAlBjC,EAqBnBC,mBAAqB,WACjB,IAAMN,EAAe7E,SAASC,iBAAiB,YAC/CC,KAAE6E,QAAQnJ,KAAKiJ,EAAc,EAAKlG,MAAMqG,iBAvBzB,EA0BnBI,aAAe,SAACC,EAAOlI,GACnB,OAA8B,IAA1BA,EAAOmI,QAAQjD,OACR,KAIP,wBAAI1K,IAAK0N,EAAO7G,UAAW6G,GACvB,yBAAK7G,UAAU,sBACV6G,EACD,uBAAG7G,UAAU,8CAEjB,yBAAKA,UAAU,oBACVrB,EAAOmI,QAAQpG,KAAI,SAACqG,EAAGC,GACpB,OACI,kBAAC,GAAD,CACI7N,IAAK4N,EAAE5N,IACP2L,SAAUiC,EACVzP,KAAMuP,UAzC9B,EAAK1G,MAAQ,CACTqG,eAAgB,CACZS,KAAM,OACN5F,WAAY,KAEhBqF,mBAAoB,CAChBQ,WAAW,GAEfC,YAAa,GAVF,E,wEAoDT,IAAD,SACgB9E,KAAK/B,MAAjB8G,GADJ,EACC3G,EADD,EACI2G,SACT,OAAgC,IAA5B7L,OAAOiF,QAAQ4G,GACR,KAIP,kBAAC,IAAMxF,SAAP,KACKrG,OAAOiF,QAAQ4G,GAAS1G,KAAI,YAAsB,IAAD,oBAAnBmG,EAAmB,KAAZlI,EAAY,KAC9C,OAAO,EAAKiI,aAAaC,EAAOlI,W,GA9DvBsG,aA8EvB1F,IAAQ,IAAIC,KAAJ,CAAqB2G,IACpBjG,gBAVS,SAAAC,GAAK,MAAK,CAC9BiH,QAASjH,EAAMkF,GAAGC,OAAO+B,aACzBjC,QAASjF,EAAMkF,GAAGC,OAAOrB,MAAMsB,KAAKA,KACpCtG,kBAAmBkB,EAAMlB,kBACzBlC,YAAaoD,EAAMpD,YACnBkJ,MAAOF,GAAS5F,EAAMmH,eAAgBnH,EAAMoH,aAAcpH,MAK/CD,CAAyBX,ICvFlC9F,GAAgBjB,EAAhBiB,YAEA+N,GAAa,SAAC,GAAc,IAAZC,EAAW,EAAXA,KACdzQ,EAAWkO,cACTwC,EAAgBvC,aAAY,SAAAhF,GAAK,OAAIA,EAAMmH,kBAC3CrB,EAAQd,aAAY,SAAAhF,GAAK,OAAI4F,GAAS0B,EAAM,SAAUtH,MAC5DtE,QAAQsD,IAAI,sBAAuB8G,GACnC,IAAIxG,IAAYiI,IAAkBD,GAClC,OACI,yBACIzH,UAAS,2BAAsBP,EAAS,SAAW,IACnDI,QAAS,WACL7I,EAAS,CAAEM,KAAM,aAAcE,QAASiQ,MAG5C,uCAASA,EAAT,aAAkBxB,EAAlB,QAKG,cACX,IAAM0B,EAAQlO,GAAYiH,KAAI,SAAAqG,GAC1B,OAAO,kBAAC,GAAD,CAAY5N,IAAK4N,EAAGU,KAAMV,OAGrC,OACI,wBAAI/G,UAAU,UACV,yBAAKA,UAAU,sBAAf,YAEI,uBAAGA,UAAU,8CAEjB,yBAAKA,UAAU,oBAAoB2H,KCvBzCtN,GAAqB7B,EAArB6B,iBAEAuN,G,8MACFzH,MAAQ,CACJqG,eAAgB,CACZS,KAAM,OACN5F,WAAY,KAEhBqF,mBAAoB,CAChBQ,WAAW,GAEfC,YAAa,G,EAGjBf,kBAAoB,WAChB,IAAMC,EAAe7E,SAASC,iBAAiB,YACzC6E,EAAmB9E,SAASC,iBAAiB,gBACnDC,KAAE6E,QAAQnJ,KAAKiJ,EAAc,EAAKlG,MAAMqG,gBACxC9E,KAAE+E,YAAYrJ,KAAKkJ,EAAkB,EAAKnG,MAAMuG,oBAEhD,EAAK9B,SAAS,CAAEuC,YAAavP,OAAOkL,aACpClL,OAAO0L,iBAAiB,SAAU,EAAKuE,yB,EAG3ClB,mBAAqB,WACjB,IAAMN,EAAe7E,SAASC,iBAAiB,YAC/CC,KAAE6E,QAAQnJ,KAAKiJ,EAAc,EAAKlG,MAAMqG,iB,EAO5CqB,uBAAyB,WACrB,EAAKjD,SAAS,CAAEuC,YAAavP,OAAOkL,c,EAGxCgF,cAAgB,SAAAC,GAAoB,IAAD,EACN,EAAKzH,MAAxB7B,EADyB,EACzBA,KAAMgC,EADmB,EACnBA,EAAGwF,EADgB,EAChBA,MACf,MAAa,WAATxH,EAEI,kBAAC,IAAMmD,SAAP,KACI,4BACI,yBAAK5B,UAAU,aACX,yBAAKA,UAAU,iBACX,uBAAGA,UAAU,uBAAb,UACQS,EAAE,0BADV,KAEI,uBAAGT,UAAU,oBAGpB+H,EACG,yDAA2B9B,EAA3B,aACA,OAGZ,kBAAC,GAAD,OAKR,kBAAC,IAAMrE,SAAP,KACI,4BACI,yBAAK5B,UAAU,aACX,yBAAKA,UAAU,iBACX,uBAAGA,UAAU,gBACT,uBAAGA,UAAU,2BADjB,8DAMH+H,EACG,yDAA2B9B,EAA3B,aACA,OAGZ,kBAAC+B,GAAD,Q,wFA7CRpQ,OAAO2L,oBAAoB,SAAUlB,KAAKwF,0B,+BAkDpC,IAMFE,EANC,EACyC1F,KAAK/B,MAA7C8G,EADD,EACCA,QAAsBhC,GADvB,EACUrI,YADV,EACuBqI,SAAS3G,EADhC,EACgCA,KACrC,GAAgC,IAA5BlD,OAAOiF,QAAQ4G,GACf,OAAO,KAIX,IAAIa,EAAgB,GAChBC,EAAc,KACdC,EAAkB,gBAClBC,EAAe,KACfC,EAAY,GA8BhB,MA5Ba,WAAT5J,IACA0J,EAAkB,iBACK,IAAnB/C,EAAQvB,SACRwE,EAAY,aAIhBhG,KAAKlC,MAAMgH,YAAc9M,KACzB4N,EAAgB,UAChBC,EACI,uBACIlI,UAAS,UAAKqI,EAAL,uEACTvG,cAAY,mBACZD,KAAK,MAEL,uBAAG7B,UAAU,uBALjB,IAK0CmI,GAG9CC,EACI,4BACI,uBAAGpI,UAAU,gBAAgB6B,KAAK,MAC9B,uBAAG7B,UAAU,mBAIzB+H,GAAkB,GAIlB,kBAAC,IAAMnG,SAAP,KACKsG,EACD,wBACInG,GAAG,mBACH/B,UAAS,UAAKiI,EAAL,iBAERG,EAEA/F,KAAKyF,cAAcC,S,GAhIlB9C,aA8ItB,IAUM1F,IAAQ,IAAIC,KAAJ,CAAqBoI,IACpB1H,gBAXS,SAAAC,GAAK,MAAK,CAC9BiH,QAASjH,EAAMkF,GAAGC,OAAO+B,aACzB5I,MATaA,EASC0B,EAAMoH,aATDvB,EASe7F,EAAMmH,eAR3B,WAAT7I,EACO,SAEJuH,GAMPZ,QAASjF,EAAMkF,GAAGC,OAAOrB,MAAMsB,KAAKA,KACpCtG,kBAAmBkB,EAAMlB,kBACzBlC,YAAaoD,EAAMpD,YACnBkJ,MAAOF,GAAS5F,EAAMmH,eAAgBnH,EAAMoH,aAAcpH,IAb9D,IAAiB1B,EAAMuH,IAkBR9F,CAAyBX,ICnKlC7F,I,OAAoClB,EAApCkB,mBAAmBE,GAAiBpB,EAAjBoB,aAsBzB,IA6Be0O,GA7BI,SAAC,GAA6C,IAA3C/Q,EAA0C,EAA1CA,KAAMgR,EAAoC,EAApCA,IAAKjJ,EAA+B,EAA/BA,MAAOkJ,EAAwB,EAAxBA,kBAChClR,EArBR,SAAiBA,GACb,IAAImJ,EAAa,UAATnJ,EAAmB,UAAYA,EACvC,OAAIuO,MAAMC,QAAQrF,GACVA,EAAEpJ,SAAS,QACJ,OAEA,UAGRoJ,EAYIgI,CAAQlR,EAAKoO,QAAQrO,MAC5BoR,EAVR,SAAkBpR,GACd,IAAImJ,EAAI/G,GAAkB+B,MAAK,SAAAyI,GAAC,OAAIA,EAAE/K,MAAQ7B,EAAKqR,iBACnD,OAAIlI,EACOA,EAAE9G,MAENC,GAKGgP,CAAStR,GAEfqI,EAAOL,EAAMpD,OAAO4D,IACxB,OACI,kBAAC,IAAD,CACIgB,GAAI,CACA+H,SAAS,IAAD,OAAMlJ,EAAN,yBAA2BpI,EAAKuR,KAExC3I,MAAO,CAAE/G,MAAO7B,EAAKoO,QAAQoD,OAAQC,QAASzR,EAAKuR,MAEvD9I,UAAU,4BACVH,QAAS,kBAAM2I,EAAkBjR,EAAKuR,OAEtC,yBAAK3P,IAAKoP,EAAKvI,UAAU,wBACrB,yBAAKA,UAAU,wCACX,uBAAGA,UAAU,cACT,0BAAMA,UAAS,oBAAe0I,EAAf,eACVpR,GACG,IACR,0BAAM0I,UAAU,uBAAuBzI,EAAKuR,MAEhD,uBAAG9I,UAAU,gBAAgBzI,EAAKoO,QAAQoD,YCjC9D,IAmDexJ,IADD,IAAIC,KAAJ,EAlDQ,SAAC,GAAkB,IATxBwG,EAAQvH,EASAa,EAAe,EAAfA,MAAOmB,EAAQ,EAARA,EAGtB+H,GAFWtD,cAES,SAAA5I,MAIpBiL,EAAepC,aAAY,SAAAhF,GAAK,OAAIA,EAAMoH,gBAC5CD,EAAiBnC,aAAY,SAAAhF,GAAK,OAAIA,EAAMmH,kBAC5C/P,GAlBSyO,EAkBMsB,EAlBE7I,EAkBc8I,EAjB5BpC,aAAY,SAAAhF,GACf,MAAa,WAAT1B,EACO0B,EAAMkF,GAAGC,OAEbnF,EAAMkF,GAAGW,OAchB7K,EAAI5D,EAAK0M,MAAMsB,KAAKA,KAExB,GAAiB,IAAbpK,EAAE0I,OAAc,CAChB,GAAItM,EAAKyM,WACL,OACI,yBAAK7K,IAAI,WAAW6G,UAAU,iCAC1B,yBAAKA,UAAU,wCACX,yBAAKA,UAAU,UACVS,EAAE,4BAA6B,IAC/BA,EAAE,UAAD,OAAW8G,EAAX,eAKf,IAAKhQ,EAAKyM,WACb,OACI,yBAAK7K,IAAI,aAAa6G,UAAU,iCAC5B,yBAAKA,UAAU,wCAAf,eAQhB,IAAMiE,EAAQ9I,EAAEuF,KAAI,SAACvF,EAAG6L,GACpB,OACI,kBAAC,GAAD,CACI7N,IAAK6N,EACLzP,KAAM4D,EACNoN,IAAKvB,EACLwB,kBAAmBA,EACnBlJ,MAAOA,OAKnB,OAAO,kBAAC,IAAMsC,SAAP,KAAiBqC,MC1CbgF,I,OAnBI,SAAC,GAAsC,IAApCC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,YACtBjF,EADiD,EAAdkF,UACnBF,EAAO/P,IAAM,SAAW,GAC5C,OACI,wBACIA,IAAK+P,EAAO/P,IACZ6G,UAAU,aACVqJ,MAAO,CAAEC,QAAS,iBAElB,uBAEItJ,UAAWkE,EACXrE,QAAS,kBAAMsJ,EAAYD,IAC3BrH,KAAI,WAAMqH,EAAO/P,MAEhB+P,EAAO9P,UCNlBF,GAAcV,EAAdU,UAEAqQ,G,8MAMFJ,YAAc,SAAAK,GACV,EAAKlJ,MAAM9B,QAAQgL,EAASrQ,M,qFAJ5BuI,KAAE+H,KAAKrM,KAAKiF,KAAKoH,KAAM,CAAEC,SAAU,Q,+BAO7B,IAAD,OACL,OACI,wBACIC,IAAK,SAAAF,GACD,EAAKA,KAAOA,GAEhBzJ,UAAU,QAET9G,GAAUwH,KAAI,SAAAkJ,GACX,OACI,kBAAC,GAAD,CACIzQ,IAAKyQ,EAAEzQ,IACP+P,OAAQU,EACRT,YAAa,EAAKA,YAClBC,QAAS,EAAK9I,MAAM7B,e,GAxBvBwG,aAuCnB1F,IAAQ,IAAIC,KAAJ,CAAqB+J,IACpBrJ,gBAPS,SAAAC,GAAK,MAAK,CAC9B8F,MAAOF,GAAS5F,EAAMmH,eAAgBnH,EAAMoH,aAAcpH,GAC1D1B,KAAM0B,EAAMoH,aACZsC,cAAe1J,EAAMkF,GAAGC,OAAOuE,iBAIK,CAAErL,YAA3B0B,CAAsCX,IC/CtC,eAAyB,IAAtBD,EAAqB,EAArBA,MAAO8E,EAAc,EAAdA,QACrB,OACI,kBAAC,IAAMxC,SAAP,KACI,yBAAK5B,UAAU,sBACX,yBAAKA,UAAU,mCACf,yBAAKA,UAAU,4BACX,kBAAC,GAAD,QAGR,yBAAKA,UAAU,sBACX,yBAAKA,UAAU,sBACX,yBAAKA,UAAU,UACX,yBAAKA,UAAU,oBACX,kBAAC,GAAD,SAIZ,yBAAKA,UAAU,gCACX,kBAAC,GAAD,CAAeV,MAAOA,EAAO8E,QAASA,Q,8BChBpD7G,G,8MACF4L,YAAc,WACV,EAAK7I,MAAMtJ,SAAS,CAAEM,KAAM,WAAYiH,KAAM,c,0EAG9C,IAAIuL,EADC,EAEqCzH,KAAK/B,MAAvCyJ,EAFH,EAEGA,MAAOtJ,EAFV,EAEUA,EAAGnB,EAFb,EAEaA,MAAOyB,EAFpB,EAEoBA,aACrBpB,EAAOL,EAAMpD,OAAO4D,IACxB,MAAqB,SAAjBiB,EACO,MAMP+I,EAHiC,IAAjCvO,OAAOiF,QAAQuJ,GAAOlG,QACtBkG,EAAMC,cAAgBzO,OAEX,yBAAKyE,UAAU,UAAUS,EAAE,sBAGlC,wBAAIT,UAAU,cACV,wBAAIA,UAAU,aACV,2BACKS,EAAE,oBADP,KAC6B,4BAAKsJ,EAAME,cAG5C,wBAAIjK,UAAU,aACV,2BACKS,EAAE,wBADP,IACiC,IAC7B,4BAAKsJ,EAAMG,kBAGnB,wBAAIlK,UAAU,aACV,2BACKS,EAAE,0BADP,IACmC,IAC/B,4BAAKsJ,EAAMI,oBAGnB,wBAAInK,UAAU,aACV,2BACKS,EAAE,0BADP,IACmC,IAC/B,4BAAKsJ,EAAM,mCAGnB,wBAAI/J,UAAU,aACV,2BACKS,EAAE,yBADP,IACkC,IAC9B,4BAAKsJ,EAAM,6BAQ3B,yBAAK/J,UAAU,gCACX,yBAAKA,UAAU,cACX,4BAAKS,EAAE,gBACNqJ,GAEL,yBAAK9J,UAAU,6BACX,0BAAMA,UAAU,qBACZ,kBAAC,IAAD,CACIc,GAAI,CAAE+H,SAAS,IAAD,OAAMlJ,EAAN,cACdK,UAAU,YACVH,QAASwC,KAAK8G,aAEd,yBAAKnJ,UAAU,WAAWqE,IAAK+F,KAAK7F,IAAI,KACxC,yBAAKvE,UAAU,WAAf,gC,GAlERiF,aAmFd1F,IAAQ,IAAIC,KAAJ,CAAqBjC,IACpB2C,gBANS,SAAAC,GAAK,MAAK,CAC9B4J,MAAO5J,EAAMkK,GAAGrG,WAAa,GAAK7D,EAAMkK,GAAGpG,MAC3ClD,aAAcZ,EAAMY,gBAITb,CAAyBX,I,yDC3FxC,aAAoC+K,KAe7B,SAASC,GAAcnD,EAASxI,EAAU4L,GAC7C,IAAMzN,EAAc,GADuC,uBAE3D,IAF2D,IAE3D,EAF2D,iBAElD0K,EAFkD,QAGnD1K,EAAY5F,MAAK,SAAAsT,GAAC,OAAIA,EAAErR,QAAUqO,EAAKrO,SACvCgO,EAAQzI,QAAO,SAAAkG,GAAC,OAAIA,EAAEzL,QAAUqO,EAAKrO,SAC7BwF,GAAY4L,IAAiB/C,EAAKrO,MAG1C2D,EAAYnB,KAAK6L,GAFjBL,EAAQzI,QAAO,SAAAkG,GAAC,OAAIA,EAAEzL,QAAUqO,EAAKrO,UAJ7C,EAAiBgO,EAAjB,+CAA2B,IAFgC,kFAY3D,OAAOrK,EAeJ,IAKM2N,GAAO,SAAAzT,GAChB,IAAI0T,EAAQ,CAAEC,QAAS,GAAIC,OAAQ,GAAIC,OAAQ,IAC3CC,EAAO,GAEX,OAAO9T,EAAE0H,QAAO,SAAS8I,GACrB,IAAInQ,SAAcmQ,EAClB,OAAInQ,KAAQqT,GACDA,EAAMrT,GAAM0T,eAAevD,KAE3BkD,EAAMrT,GAAMmQ,IAAQ,KACnBsD,EAAKE,QAAQxD,IAAS,IAAYsD,EAAKnP,KAAK6L,OCiCjDvH,gBAbS,SAAAC,GAAK,MAAK,CAC9B+K,cAAe/K,EAAM4D,GAAGoH,MAAMnH,WAC9B3D,iBAAkBF,EAAME,iBACxBU,aAAcZ,EAAMY,aACpBoK,MAAOhL,EAAM4D,GAAGoH,MAAMnH,WAChB,IDbiBoH,ECeb,MDfwBC,ECgBxB,QDhB8BC,ECiB9BnL,EAAM4D,GAAGoH,MAAMlH,MAAM9D,EAAME,kBDhB9BiL,EAAIC,MAAK,SAACtU,EAAG8P,GAChB,OAAI9P,EAAEmU,GAAWC,GAAQtE,EAAEqE,GAAWC,IAC1B,EACDpU,EAAEmU,GAAWC,GAAQtE,EAAEqE,GAAWC,GAClC,EAEA,OAPO,IAACD,EAAWC,EAAMC,ICqB7BpL,EAnFD,SAAC,GAA6B,IAA3BiL,EAA0B,EAA1BA,MAAOpK,EAAmB,EAAnBA,aACpB,OAAKoK,GAA0B,SAAjBpK,EAMPoK,EAAMzK,KAAI,SAAC8K,EAAMxE,GAEpB,IAEIyE,EAAW,GAKf,OAJID,EAAKE,UAAU,sBACfD,EAAWD,EAAKE,UAAU,oBAAoB,GAAGC,YAAc,IAGhC,IAA/BC,SAASJ,EAAK9P,IAAImQ,SAEd,yBAAK1S,IAAK6N,EAAGhH,UAAU,OACnB,yBAAKA,UAAU,qBACX,4BAAKwL,EAAK9P,IAAImL,OAEd,yBAAK7G,UAAU,YACX,yBAAKA,UAAU,cACX,0BAAMA,UAAU,cACZ,yBAAKqE,IAAKoH,EAAUlH,IAAI,OAGhC,yBAAKvE,UAAU,cACX,uBACIA,UAAU,YACV8L,wBAAyB,CACrBC,OAAQP,EAAKQ,QAAQC,cAKrC,yBAAKjM,UAAU,qBACX,yBAAKA,UAAU,iBACf,yBAAKqE,IAAK6H,KAAUvJ,MAAM,OAAO4B,IAAI,SACrC,yBAAKvE,UAAU,qBAO3B,yBAAK7G,IAAK6N,EAAGhH,UAAU,OACnB,yBAAKA,UAAU,qBACX,4BAAKwL,EAAK9P,IAAImL,OACd,0BAAM7G,UAAU,SACZ,yBAAKqE,IAAKoH,EAAUlH,IAAI,MAE5B,uBACIuH,wBAAyB,CACrBC,OAAQP,EAAKQ,QAAQC,YAG7B,yBAAKjM,UAAU,qBACX,yBAAKA,UAAU,iBACf,yBAAKqE,IAAK6H,KAAUvJ,MAAM,OAAO4B,IAAI,SACrC,yBAAKvE,UAAU,wBA3D5B,QCFTpH,I,OAAoBJ,EAApBI,iBAEAuT,G,YACF,WAAY7L,GAAQ,IAAD,+BACf,8CAAMA,KAcV8L,cAAgB,SAAA7N,GAEZ,OAAmC,IAA/BqN,SAASrN,EAAK7C,IAAImQ,SAEd,yBAAK1S,IAAKoF,EAAKoF,KAAM3D,UAAU,OAC3B,yBAAKA,UAAU,qBACX,4BAAKzB,EAAK7C,IAAImL,OAEd,yBAAK7G,UAAU,YACX,yBAAKA,UAAU,eAKf,yBAAKA,UAAU,cACX,uBACIA,UAAU,YACV8L,wBAAyB,CACrBC,OAAQxN,EAAKyN,QAAQC,cAKrC,yBAAKjM,UAAU,qBACX,yBAAKA,UAAU,iBACf,yBAAKqE,IAAK6H,KAAUvJ,MAAM,OAAO4B,IAAI,SACrC,yBAAKvE,UAAU,qBAO3B,yBAAKA,UAAU,aACX,yBAAK7G,IAAKoF,EAAKoF,KAAM3D,UAAU,OAC3B,yBAAKA,UAAU,qBACX,4BAAKzB,EAAKsI,MAAMoF,UAChB,uBACIH,wBAAyB,CACrBC,OAAQxN,EAAKyN,QAAQC,YAG7B,yBAAKjM,UAAU,qBACX,yBAAKA,UAAU,iBACf,yBAAKqE,IAAK6H,KAAUvJ,MAAM,OAAO4B,IAAI,SACrC,yBAAKvE,UAAU,uBA5DxB,EAqEnBqM,UAAY,WACR,EAAK/L,MAAMtJ,SAAS,CAAEM,KAAM,WAAYiH,KAAM,SAC9C,EAAK+B,MAAMV,KAAKG,eAAenH,IAC/B,EAAK0H,MAAMtJ,SAASqH,GAAYzF,MArEhC,EAAK0T,UAAY,CACbC,EAAG,MACHC,EAAG,MACHC,EAAG,MACHC,EAAG,QACHC,EAAG,QAGP,EAAKC,SAAW,CAAC,IAAK,IAAK,KAC3B,EAAKC,QAAU,CAAC,EAAG,EAAG,GAZP,E,0EA2ER9L,EAAc/H,GAAQ,IAAD,OAM5B,OALKA,EAAM7B,MAAK,SAAAsT,GAAC,OAAIA,EAAE9G,KAAK/F,MAAM,KAAK,KAAOmD,OAC1ClF,QAAQsD,IAAI,kBACZkD,KAAKgK,aAGFrT,EACF2F,QAAO,SAAAJ,GAAI,OAAIA,EAAKoF,KAAK/F,MAAM,KAAK,KAAOmD,KAC3CL,KAAI,SAACnC,EAAMyI,GACR,IAAIyE,EAAW,KAKf,OAJIlN,EAAKmN,UAAU,sBACfD,EAAWlN,EAAKmN,UAAU,oBAAoB,GAAGC,YAIjD,kBAAC,IAAM/J,SAAP,CAAgBzI,IAAKoF,EAAKwD,IACtB,6BACIA,GAAG,SACHsH,MAAO,CACHyD,gBAAgB,uFAAD,OAAyFrB,EAAzF,KACfsB,eAAgB,UAGpB,4BAAQ/M,UAAU,SACd,4BAAKzB,EAAK7C,IAAImL,OACd,yBAAK7G,UAAU,YACf,4BAAKzB,EAAK7C,IAAIsR,YAGJ,SAAjBjM,EACK,EAAKqL,cAAc7N,GACnB,W,+BAOtB,OAAI8D,KAAK/B,MAAM2M,WAEP,yBAAKjN,UAAU,UACVqC,KAAK/B,MAAMG,EAAE,sBAIM,aAA5B4B,KAAK/B,MAAMS,aACJ,KAIP,kBAAC,IAAMa,SAAP,KACKS,KAAK6K,WAAW7K,KAAK/B,MAAMS,aAAcsB,KAAK/B,MAAMtH,Y,GA/HlDiM,aAoJb1F,IAAQ,IAAIC,KAAJ,CAAqB2M,IACpBjM,gBAhBS,SAAAC,GAAK,MAAK,CAC9B8M,WAAY9M,EAAM4D,GAAG/K,MAAMgL,YAAc7D,EAAM4D,GAAGoH,MAAMnH,WACxD3D,iBAAkBF,EAAME,kBAAoBzH,GAC5CmI,aAAcZ,EAAM4D,GAAG/K,MAAMgL,WACvB,GACA7D,EAAM4D,GAAG/K,MAAMiL,MAAM9D,EAAME,kBAAkBlJ,MACzC,SAAAoH,GAAI,OAAIA,EAAKoF,KAAK/F,MAAM,KAAK,KAAOuC,EAAMY,gBAE9CZ,EAAMY,aACN,OACN/H,MAAOmH,EAAM4D,GAAG/K,MAAMgL,WAChB,GACA7D,EAAM4D,GAAG/K,MAAMiL,MAAM9D,EAAME,qBAItBH,CAAyBX,ICzJ3B4N,I,OAAc,SAAC,GAAwB,IAAtBC,EAAqB,EAArBA,QAAShU,EAAY,EAAZA,MAUnC,MANuB,kBAAZgU,GACK,OAAZA,GACCvH,MAAMC,QAAQsH,KAEfA,EAAU,CAACA,IAEXvH,MAAMC,QAAQsH,GACPA,EAAQ1M,KAAI,SAAAD,GAEf,MAAI,WAAYA,EAER,yBAAKtH,IAAG,UAAKsH,EAAE,aAAP,YAAuBA,EAAE,YAC5BA,EAAE,WAIJ,WAAYA,EAEf,yBAAKtH,IAAKsH,EAAEqI,KACR,0BAAM9I,UAAU,cAAc5G,GAC9B,8BACI,kBAAC,IAAD,CACI0H,GAAI,CACA+H,SAAS,wBAAD,OAA0BpI,EAAEqI,KAEpC3I,MAAO,CAAE/G,MAAOqH,EAAE4M,OAAQrE,QAASvI,EAAEqI,MAEzC9I,UAAU,6BAKTS,EAAE4M,eAhBhB,KAwBR,OC7CLhU,GAAiBb,EAAjBa,aAQC,IAAMiU,GAAe,SAAC,GAAiC,IAA/BF,EAA8B,EAA9BA,QAAShU,EAAqB,EAArBA,MAAOmU,EAAc,EAAdA,QACvChU,EAAOF,GAAaoC,MAAK,SAAAmF,GAAC,OAAIA,EAAEzH,MAAQC,EAAMuP,iBAElDrH,qBAAU,WACN,IAAIkM,EAAQhM,SAASC,iBAAiB,gBACtCC,KAAE+E,YAAYrJ,KAAKoQ,MAEvB,IAAIC,EAAa,KAMjB,GALIF,IACAE,EAfR,SAAwBL,GACpB,OAAOA,EAAQ1M,KAAI,SAAArF,GAEf,MAAO,CAAEyN,IADyB,QAA1BzN,EAAEyN,IAAI4E,UAAU,EAAG,GAAerS,EAAEyN,IAAI4E,UAAU,GAAKrS,EAAEyN,IAChDuE,OAAQhS,EAAEsK,QAAQoD,WAYtB4E,CAAeP,GAC5BA,EAAUK,GAGV5H,MAAMC,QAAQsH,GAAU,CACxB,IAAInJ,EAAQmJ,EAAQ1M,KAAI,SAAAD,GAEpB,MAAI,WAAYA,EAER,yBAAKtH,IAAG,UAAKsH,EAAE,aAAP,YAAuBA,EAAE,YAC5BA,EAAE,WAIJ,WAAYA,EAEf,kBAAC,IAAD,CACItH,IAAKsH,EAAEqI,IACPhI,GAAI,CACA+H,SAAS,wBAAD,OAA0BpI,EAAEqI,KAEpC3I,MAAO,CAAE/G,MAAOqH,EAAE4M,OAAQrE,QAASvI,EAAEqI,MAEzC9I,UAAS,oCAA+B5G,IAExC,uBAAG4G,UAAWzG,EAAKA,OAClBkH,EAAE4M,aAZR,KAiBPzM,EAAIqD,EAAMJ,OAAS,EAAf,UAAsBzK,EAAtB,KAAiCA,EACzC,OACI,kBAAC,IAAMwI,SAAP,KACI,wBAAI5B,UAAU,gCACV,wBAAIA,UAAS,iBAAY5G,IACrB,yBAAK4G,UAAU,sBACVY,EACD,uBAAGZ,UAAU,8CAEjB,yBAAKA,UAAU,oBAAoBiE,MAMvD,OAAO,MChEL5K,GAAiBb,EAAjBa,aAES,YAACuU,GAAyB,IAAD,uBAAT7W,EAAS,iCAATA,EAAS,kBACpC,IAAMkN,EAAQlN,EAAK2J,KAAI,SAAAzJ,GACnB,IAAIqC,EAAOD,GAAaoC,MAAK,SAAAJ,GAAC,OAAIA,EAAElC,MAAQlC,KAE5C,OACI,kBAAC,GAAD,CAAckC,IAAKlC,EAAGmC,MAAOnC,EAAGmW,QAASQ,EAAWtU,EAAKA,WAIjE,OAAO,kBAAC,IAAMsI,SAAP,KAAiBqC,ICZtBhJ,GAAezC,EAAfyC,WAES,eAAgC,IAA7BwF,EAA4B,EAA5BA,EAAGoN,EAAyB,EAAzBA,KAAMC,EAAmB,EAAnBA,aAAmB,EACF5K,oBAAS,GADP,oBACnC6K,EADmC,KACrBC,EADqB,KAG1C1M,qBAAU,WACN,IAAI2M,EAAQzL,YAAW,kBAAMwL,GAAgB,KAAO,KACpD,OAAO,kBAAMzL,aAAa0L,MAC3B,IAGH,IACIC,EAAWJ,EACgB,qBAAuBA,EAChD,KAgCN,MA/Ba,cAATD,EACM,6BAAMpN,EAAE,4BACC,MAARoN,EACDE,EACF,6BAAMtN,EAAE,4BAER,yBAAKT,UAAU,UAAUS,EAAE,4BAG3ByN,EAEI,uBACIlO,UAAU,kBACV6B,KAAMqM,EACN1J,OAAO,SACPC,IAAI,uBAEJ,yBACIzE,UAAU,WACVqE,IAAG,UAAKwJ,EAAL,YAAa5S,IAChB0H,MAAM,OACN4B,IAAI,SAER,yBAAKvE,UAAU,WAAf,cACA,uBAAGA,UAAU,gCAIf,yBAAKqE,IAAG,UAAKwJ,EAAL,YAAa5S,IAAc0H,MAAM,OAAO4B,IAAI,UCH/D,SAAS4J,GAAcP,EAAYQ,EAAa3N,EAAG4N,GAAQ,IAI1DC,EAUAV,EAVAU,oBACAC,EASAX,EATAW,eAEAC,EAOAZ,EAPAY,oBACAC,EAMAb,EANAa,eACAC,EAKAd,EALAc,kBAEAZ,EAGAF,EAHAE,aACAa,EAEAf,EAFAe,eAIAC,EAAUN,GAA4C,KACtDO,EAAcN,EACd,kBAAC,GAAD,CAAanV,MAAM,SAASgU,QAASmB,IACrC,KAIAO,EAAUJ,EACV,kBAAC,GAAD,CAAatV,MAAM,YAAYgU,QAASsB,IACxC,KAEAK,EAAUC,GAAapB,EAAY,SAAU,UAAW,SAE5D,OACI,kBAAC,IAAMhM,SAAP,KACMiN,EACE,yBAAK7O,UAAU,2BACX,yBAAKA,UAAU,aACX,8BAAO6O,KAHH,KAOhB,kBAAC,GAAD,CAAKpO,EAAGA,EAAGoN,KAAMc,EAAgBb,aAAcA,IAC/C,yBAAK9N,UAAU,sBACX,yBAAKA,UAAU,2BACX,wBAAIA,UAAU,oBACR4O,EACE,wBAAI5O,UAAU,sBAAd,sBACwB4O,GAFhB,KAKVE,EACE,wBAAI9O,UAAU,sBACTS,EAAE,6BADP,IACsC,IAClC,0BAAMT,UAAU,YAAY8O,IAHxB,KAMVN,EACE,wBAAIxO,UAAU,sBACTS,EAAE,4BADP,IACqC,IACjC,0BAAMT,UAAU,YACXwO,EADL,OAC8B,IACzBF,EAFL,eAHgB,KAStBG,EACE,wBAAIzO,UAAU,sBACTS,EAAE,yBADP,IACkC,IAC9B,0BAAMT,UAAU,YACXyO,IAJM,MAUtBJ,GAEJU,EACG,yBAAK/O,UAAU,wCACX,uBAAGA,UAAU,SAAb,mBACC+O,GAEL,OC3Fb,SAASE,GAAgBrB,EAAYQ,EAAa3N,EAAG4N,GACxD,IAUIa,EAAQd,EAAY7I,KAAKU,MAAQ,EAR7B,kBAAC,GAAD,CACI7M,MAAO,OACPgU,QAASgB,EAAY7I,KAAKA,KAC1BgI,SAAS,IAK0C,KAC3DwB,EAAUC,GAAapB,EAAY,UAAW,WAElD,OAEI,yBAAK5N,UAAU,sBACX,yBAAKA,UAAU,2BACVkP,EACAb,GAIJU,EACG,yBAAK/O,UAAU,wCACX,uBAAGA,UAAU,SAAb,mBACC+O,GAEL,MC5BT,SAASI,GAAevB,EAAYQ,EAAa3N,EAAG4N,GACvD,IAUIa,EAAQd,EAAY7I,KAAKU,MAAQ,EAR7B,kBAAC,GAAD,CACI7M,MAAO,OACPgU,QAASgB,EAAY7I,KAAKA,KAC1BgI,SAAS,IAK0C,KAC3DwB,EAAUC,GAAapB,EAAY,UAAW,WAElD,OAEI,yBAAK5N,UAAU,sBACX,yBAAKA,UAAU,2BACVkP,EACAb,GAIJU,EACG,yBAAK/O,UAAU,wCACX,uBAAGA,UAAU,SAAb,mBACC+O,GAEL,MC5BT,SAASK,GAAiBxB,EAAYQ,EAAa3N,EAAG4N,GACzD,IAUIa,EAAQd,EAAY7I,KAAKU,MAAQ,EAR7B,kBAAC,GAAD,CACI7M,MAAO,OACPgU,QAASgB,EAAY7I,KAAKA,KAC1BgI,SAAS,IAK0C,KAE/D,OAEI,yBAAKvN,UAAU,sBACX,yBAAKA,UAAU,2BAA2BqO,GAEzCa,EACG,yBAAKlP,UAAU,wCACX,uBAAGA,UAAU,SAAb,mBACCkP,GAEL,MCpDT,IAAMG,GAAc,SAAdA,EAAe/D,GAA4C,IAAvCgE,EAAsC,uDAAzB,GAAIC,EAAqB,uDAAP,GAC5D,GAAW,MAAPjE,EACA,OAAO,KACAzF,MAAMC,QAAQwF,GACrBA,EAAI5N,SAAQ,SAAAzG,GACR,GAAiB,kBAANA,EACP,OAAOoY,EAAYpY,EAAGqY,EAAYC,MAGpB,kBAARjE,GAGV,WAAYA,IAERA,EAAI,UAAU3C,cAActR,SAAS,SAErCkY,EAAY3T,KAAK0P,EAAI,WAErBgE,EAAW1T,KAAK0P,EAAI,YAQhC,IAAIvJ,EAAKwN,EAAY9T,MAAK,SAAAxE,GAAC,OAAIA,EAAE0R,cAActR,SAAS,YACxD,MAAO,CAAEmY,YAAaF,EAAW/D,OAAQkE,OAAc,MAAN1N,EAAa,KAAOA,I,ICxBjEzH,GAAc9B,EAAd8B,UAEFoV,GAAc,SAACC,EAAclP,GAE/B,IAAImP,EACgB,MAAhBD,EACM,KADN,UAESlP,EAAE,iBAFX,aAEgCA,EAAE,iBAAD,OACNnG,GAAUqV,MAEzC,GAAIC,EACA,OACI,yBAAK5P,UAAU,eACX,uBAAGA,UAAU,aACT,8BAAO4P,MAOrBC,GAAe,SAACC,EAAQC,EAAQC,GAClC,IAAIC,EAAU,GAoBd,GAlBIF,GACAE,EAAQrU,KACJ,kBAAC,GAAD,CAAazC,IAAI,SAASC,MAAM,SAASgU,QAAS2C,KAGtDD,GACAG,EAAQrU,KACJ,kBAAC,GAAD,CAAazC,IAAI,SAASC,MAAM,SAASgU,QAAS0C,KAGrDC,GAAWD,IAAUE,IACtBC,EAAQrU,KAAK,yCACboU,EAAOtP,KAAI,SAACG,EAAGmG,GACXiJ,EAAQrU,KACJ,kBAAC,GAAD,CAAazC,IAAG,iBAAY6N,GAAK5N,MAAM,SAASgU,QAASvM,SAIjEoP,EAAQpM,OAAS,EACjB,OAAO,yBAAK7D,UAAU,uBAAuBiQ,I,IC9B/CC,G,8MACF/P,MAAQ,G,EAERgQ,iBAAmB,SAACC,EAAe3F,GAC/BA,EAAE4F,iBADmC,MAElB,EAAK/P,MAAMhB,MAAMpD,OAFC,EAE/ByD,KAF+B,EAEzBoC,GAeZ,EAAKzB,MAAM8D,QAAQkM,SAEnB7F,EAAE8F,mB,0EAGI,IAAD,OACDC,EAAoBnO,KAAK/B,MAAMmQ,KAC7B,sBACA,qBAHD,EAKyCpO,KAAK/B,MAA3CsN,EALH,EAKGA,WAAYQ,EALf,EAKeA,YAAa3N,EAL5B,EAK4BA,EAAGnB,EAL/B,EAK+BA,MACpC,IAAKsO,EACD,OAAO,KAPN,IAWD8C,EACAC,EAAYC,EAHRC,EAAoCjD,EAApCiD,OAAQC,EAA4BlD,EAA5BkD,gBAAiB/H,EAAW6E,EAAX7E,OAC3BhH,EAAKzC,EAAMpD,OAAO6F,GAGpBgP,EAAW,KAED,MAAVhP,EAAG,IACH2O,EAAYvC,GACZyC,EAAUE,EACN,yBAAK9Q,UAAU,gBACX,yBAAKA,UAAU,cACX,0BAAMA,UAAU,cACZ,kBAAC,GAAD,CACI5G,MAAM,UACNgU,QAAS0D,OAKzB,KAEJH,EAAa,kBAAC,IAAM/O,SAAP,KAAiBgP,IACb,MAAV7O,EAAG,IACV2O,EAAYzB,GACZ8B,EDxBL,SAA8BnD,EAAYnN,GAAI,IAC3CkP,EAAkD/B,EAAlD+B,aAAcqB,EAAoCpD,EAApCoD,UAAWC,EAAyBrD,EAAzBqD,UAAWC,EAActD,EAAdsD,UAEtCtB,EAASF,GAAYC,EAAclP,GACnCwP,EAAUJ,GAAamB,EAAWC,EAAWC,GAEjD,OACI,kBAAC,IAAMtP,SAAP,KACI,6BAAMgO,GACN,6BAAMK,ICeKkB,CAAqBvD,EAAYnN,IAC3B,MAAVsB,EAAG,GACV2O,EAAYtB,GACK,MAAVrN,EAAG,KACV2O,EAAYvB,IArCX,MCtCN,SAAoBd,GACvB,IAAImB,EAAc,KACdC,EAAS,KACb,GAAIpB,EAAO,OACqBgB,GAAYhB,GAApCmB,EADG,EACHA,YAAaC,EADV,EACUA,OAgBrB,MAAO,CAAEpB,MAXTmB,GAFAA,EAAeA,GAAgBA,EAAY3L,OAAgB6G,GAAK8E,GAAZ,OAG/BA,EAAY3L,OACzB,yBAAK7D,UAAU,iBACVwP,EAAY9O,KAAI,SAAC0Q,EAAGpK,GAAJ,OACb,kBAAC,IAAMpF,SAAP,CAAgBzI,IAAK6N,GACjB,uBAAGhH,UAAU,0BAA0BoR,QAJjB,KAUb3B,OAAQA,GD0DP4B,CAAWR,GAA7BxC,EAxCH,EAwCGA,MAGFiD,EEpFP,SAAmB7Q,EAAGsB,EAAI0N,GAC7B,OACI,yBAAKzP,UAAU,eACX,uBAAGA,UAAU,aACT,8BACKS,EAAE,kBADP,IAC2BsB,EAD3B,IACgC,KAEhC,kCAAQtB,EAAE,sBAAD,OAAuBsB,EAAG,OAE5B,MAAV0N,EAAiB,KACd,uBAAGzP,UAAU,aACT,yCAAeyP,EAAO/B,UAAU,GAAG6D,UFyElCC,CAAU/Q,EAAGsB,EA3CrB,EAwCU0N,QAMTgC,EACF,4BACIzR,UAAU,wBACVH,QAAS,SAAA4K,GAAC,OACN,EAAK0F,iBAAiB,EAAK7P,MAAM8P,cAAe3F,KAGpD,uBAAGzK,UAAU,sBACb,8BACKqC,KAAK/B,MAAM8P,cACN3P,EAAE,sBACFA,EAAE,yBAIpB,OACI,yBAAKT,UAAWwQ,GACZ,6BAASxQ,UAAU,cACf,yBAAKA,UAAU,qBACX,yBAAKA,UAAU,yBACX,yBACIA,UAAU,WACVH,QAAS,SAAA4K,GAAC,OACN,EAAK0F,iBACD,EAAK7P,MAAM8P,cACX3F,KAIR,uBAAGzK,UAAU,wCAGrB,yBAAKA,UAAU,eACX,yBAAKA,UAAU,kCACV2Q,EACAW,EACAP,GAGL,yBAAK/Q,UAAU,eAAe+I,GAE7B2H,EAAU9C,EAAYQ,EAAa3N,EAAG4N,GAGtCoD,U,GAnHTxM,aAqId1F,GAAQC,eAAiB0Q,IAChBhQ,gBAVS,SAAAC,GAAK,MAAK,CAC9BsQ,KAAMtQ,EAAMuR,SACZ9D,WAC2C,IAAvCzN,EAAMkF,GAAGtD,GAAGkC,MAAMsB,KAAKA,KAAK1B,OACtB,GACA2B,GAAoBrF,EAAMkF,GAAGtD,GAAGkC,MAAMsB,KAAKA,KAAK,IAC1D6I,YAAajO,EAAMkF,GAAGtD,GAAG4P,WAIdzR,CAAyBX,IGlIlC1F,GAAkBrB,EAAlBqB,cAEA+X,G,8MACFzR,MAAQ,CACJrD,KAAM,EAAKwD,MAAMrB,kBACjB4S,cAAe,EACfC,WAAYjY,GAAcE,cAC1BgY,aAAa,G,EAGjBC,WAAa,WACT,IAAIC,EAAS,KACTlb,EAAO,KACPkF,EAAS,EAAKqE,MAAM4R,QAAQ,EAAK5R,MAAM7B,MAC7B,EAAK6B,MAAM2F,MAEbhK,EAASpC,GAAcE,gBAC/BkC,GAAkBpC,GAAcE,cACR,WAApB,EAAKuG,MAAM7B,MACXwT,EAAS,EAAK3R,MAAMzD,mBACpB9F,EAAO,CAAE+F,KAAM,EAAKqD,MAAMrD,KAAMb,OAAQA,IACb,UAApB,EAAKqE,MAAM7B,MAClBwT,EAAS,EAAK3R,MAAMtE,iBACpBjF,EAAO,CAAEkF,OAAQA,IACU,YAApB,EAAKqE,MAAM7B,MAClBwT,EAAS,EAAK3R,MAAMnE,mBACpBpF,EAAO,CAAEkF,OAAQA,IACU,aAApB,EAAKqE,MAAM7B,OAClBwT,EAAS,EAAK3R,MAAMlE,oBACpBrF,EAAO,CAAEkF,OAAQA,IAErBgW,EAAOlb,GACP,EAAKuJ,MAAM6R,WAAW,EAAK7R,MAAM7B,KAAMxC,K,EAI/CmW,WAAa,WACT,IAAIH,EAAS,KACTlb,EAAO,GAEPkF,EAAS,EAAKqE,MAAM4R,QAAQ,EAAK5R,MAAM7B,MAEvCxC,EAASpC,GAAcE,eAAiB,GACxCkC,GAAkBpC,GAAcE,cACR,WAApB,EAAKuG,MAAM7B,MACXwT,EAAS,EAAK3R,MAAMzD,mBACpB9F,EAAO,CAAE+F,KAAM,EAAKqD,MAAMrD,KAAMb,OAAQA,IACb,UAApB,EAAKqE,MAAM7B,MAClBwT,EAAS,EAAK3R,MAAMtE,iBACpBjF,EAAO,CAAEkF,OAAQA,IACU,YAApB,EAAKqE,MAAM7B,MAClBwT,EAAS,EAAK3R,MAAMnE,mBACpBpF,EAAO,CAAEkF,OAAQA,IACU,aAApB,EAAKqE,MAAM7B,OAClBwT,EAAS,EAAK3R,MAAMlE,oBACpBrF,EAAO,CAAEkF,OAAQA,IAErBgW,EAAOlb,GACP,EAAKuJ,MAAM6R,WAAW,EAAK7R,MAAM7B,KAAMxC,IAEvC,EAAKqE,MAAM6R,WAAW,EAAK7R,MAAM7B,KAAM,I,EAI/C4T,aAAe,SAAA5H,GACXA,EAAE4F,iBACF,EAAKzL,SAAS,CAAE9H,KAAM2N,EAAEjG,OAAO0B,S,EAGnCoM,aAAe,SAAA7H,GACXA,EAAE4F,iBADc,MASZ,EAAK/P,MALLiS,EAJY,EAIZA,aACAC,EALY,EAKZA,iBACAC,EANY,EAMZA,iBACAC,EAPY,EAOZA,sBAGJlU,EAVgB,EAQZA,SAEI,UACR+T,IAEAC,IACAE,EAAqB,EAAKvS,MAAMrD,MAChC2V,EAAiB,EAAKtS,MAAMrD,MAC5B,EAAKwD,MAAMzD,mBAAmB,CAAEC,KAAM,EAAKqD,MAAMrD,KAAMb,OAAQ,K,EAGnE0W,cAAgB,WACZ,IAAM1W,EAAS,EAAKqE,MAAM4R,QAAQ,EAAK5R,MAAM7B,MACvCwH,EAAQ,EAAK3F,MAAM2F,MACnB2M,EACF3W,EAASpC,GAAcE,cAAgBkM,EACjCA,EACAhK,EAASpC,GAAcE,cAiBjC,MAAO,CAAE8Y,YAdL5M,GAAShK,EAASpC,GAAcE,eAChC,EAAKuG,MAAMwS,yBAaOC,YAVlB9M,GAASpM,GAAcE,eACvBkC,GAAU,GACV,EAAKqE,MAAMwS,yBAQoBE,cAL/B/M,EAAQ,EAAR,0CACyChK,EAC/B,EAFV,eAEkB2W,EAFlB,uBAE6C3M,GAF7C,W,0EAQE,IAAD,SAC+C5D,KAAKsQ,gBAAjDE,EADH,EACGA,YAAaE,EADhB,EACgBA,YAAaC,EAD7B,EAC6BA,cAClC,OACI,yBAAKhT,UAAU,mBACX,yBAAKA,UAAU,cACX,2BAAOiT,QAAQ,gBAAf,UACA,2BACIlR,GAAG,eACH/B,UAAU,eACVkT,WAAS,EACT5b,KAAK,OACL4O,MAAO7D,KAAKlC,MAAMrD,KAClBqW,SAAU,SAAA1I,GAAC,OAAI,EAAK4H,aAAa5H,IACjC2I,UAAW,SAAA3I,GAAC,MACE,UAAVA,EAAEtR,IAAkB,EAAKmZ,aAAa7H,GAAK,SAIvD,kBAAC4I,GAAD,MACA,4BACIrT,UAAU,+BACVC,SAAUoC,KAAK/B,MAAMwS,yBACrBjT,QAAS,SAAA4K,GAAC,OAAI,EAAK6H,aAAa7H,KAE/BpI,KAAK/B,MAAMwS,yBACN,YADL,UAIL,yBAAK9S,UAAU,qBACX,4BACIA,UAAU,+BACVC,SAAU8S,EACVlT,QAASwC,KAAK+P,YAHlB,QAQA,4BACIpS,UAAU,+BACVC,SAAU4S,EACVhT,QAASwC,KAAK2P,YAHlB,SAQJ,yBACIhS,UAAU,wBACV8L,wBAAyB,CACrBC,OAAQiH,U,GAhKR/N,aAwKxB,SAASqO,GAAUtN,EAAQ7F,GACvB,SAAIA,EAAMkF,GAAGW,GAAQhC,aAAc7D,EAAMkF,GAAGC,OAAOtB,YAavD,IASMzE,IAAQ,IAAIC,KAAJ,CAAqBoS,IACpB1R,gBAVS,SAAAC,GAAK,MAAK,CAC9B+R,QAAS/R,EAAM+R,QACfzT,MATaA,EASC0B,EAAMoH,aATDvB,EASe7F,EAAMmH,eAR3B,WAAT7I,EACO,SAEJuH,GAMPC,MAAOF,GAAS5F,EAAMmH,eAAgBnH,EAAMoH,aAAcpH,GAC1D2S,yBAA0BQ,GAAUnT,EAAMmH,eAAgBnH,GAC1DpD,YAAaoD,EAAMpD,YACnBkC,kBAAmBkB,EAAMlB,mBAb7B,IAAiBR,EAAMuH,IAiBiB,CACpCuM,avCtKwB,WACxB,MAAO,CACHjb,KAAMvD,EAAQS,gBuCqKlBie,iBvCrI4B,SAAA3V,GAG5B,MAAO,CACHxF,KAAMvD,EAAQmC,oBACd4G,SuCiIJ4V,qBvClJgC,SAAA5V,GAChC,MAAO,CACHxF,KAAMvD,EAAQqC,wBACdoB,QAASsF,IuCgJb0V,iBvC7J4B,WAC5B,MAAO,CACHlb,KAAMvD,EAAQY,qBuC4JlBkI,sBACAb,oBACAG,sBACAC,uBACAoC,WACA2T,WvC3FsB,SAACoB,EAAYtX,GACnC,MAAO,CACH3E,KAAMvD,EAAQO,YACdif,aACAtX,YuC6EOiE,CAWZX,IC9MYiU,GAhBA,WAGX,OACI,kBAAC,IAAM5R,SAAP,KACI,yBAAK5B,UAAU,wCACX,yBAAKA,UAAU,0BACX,uBAAGA,UAAU,oCAEjB,yBAAKA,UAAU,cACX,kBAAC,GAAD,UCEdnH,GAA+BL,EAA/BK,UAAWD,GAAoBJ,EAApBI,gBAEX6a,G,8MACFC,iBAAmB,EAAKpT,MAAMzI,S,EAC9B+I,EAAIrF,OAAOC,KAAK3C,IACX6H,KAAI,SAAAE,GAAC,OAAIA,KACT/C,KAAK,K,qFAGNwE,KAAKsR,0B,yCAGUC,GAAY,IACrB/b,EAAawK,KAAK/B,MAAlBzI,SAE2B,QAA7B+b,EAAUxP,QAAQ6N,SAClB5P,KAAKqR,iBAAmB7b,GAG5BwK,KAAKsR,0B,8CAGgB,IAAD,EACatR,KAAK/B,MAA9B8D,EADY,EACZA,QAASpN,EADG,EACHA,SACX6c,GAFc,EACOpT,EACf2D,EAAQvM,SAASgR,UAKzBgL,EAAIjW,MAAM,KAAK,GAEf5G,EAASsH,GAAQuV,EAAIjW,MAAM,KAAK,KAEhC5G,EAASsH,GAAQ,SAGjBuV,EAAIjW,MAAM,KAAK,KAAM/E,GAErB7B,EAASqH,GAAYwV,EAAIjW,MAAM,KAAK,MAGpC5G,EAASqH,GAAYzF,KACrB5B,EAASsH,GAAQ,SACjB8F,EAAQxI,KAAKhD,O,+BAUX,IAAD,OACDwX,EAAgB/N,KAAK/B,MAAMzI,WAAawK,KAAKqR,iBAEjD,OACI,kBAAC,IAAM9R,SAAP,KAWI,kBAAC,IAAD,CAAOkS,KAAI,gBAAWzR,KAAKzB,EAAhB,KAAsBmT,UAAWC,KAE5C,kBAAC,IAAD,KACI,kBAAC,IAAD,CACIC,OAAK,EACLH,KAAI,gBAAWzR,KAAKzB,EAAhB,sBACJsT,OAAQ,YAAyB,IAAtB5U,EAAqB,EAArBA,MAAO8E,EAAc,EAAdA,QACVhL,EAAQ,EAAKkH,MAAMzI,SAASsI,MAC1B,EAAKG,MAAMzI,SAASsI,MAAM/G,MAC1B,KASN,OAPA,EAAKkH,MAAMtJ,SAASqF,GAAciD,EAAMpD,OAAO6F,KAE/C,EAAKzB,MAAMtJ,SAAS,CAChBM,KAAM,YACNE,SAAS,IAIT,kBAAC,IAAMoK,SAAP,KACI,kBAAC,GAAD,CACI6O,MAAM,EACNnR,MAAOA,EACP8E,QAASA,EACThL,MAAOA,EACP4P,QAAS1J,EAAMpD,OAAO6F,GACtB2R,iBAAkB,EAAKA,iBACvBtD,cAAeA,QAOnC,kBAAC,IAAD,CACI6D,OAAK,EACLH,KAAI,gBAAWzR,KAAKzB,EAAhB,cACJsT,OAAQ,gBAAG5U,EAAH,EAAGA,MAAO8E,EAAV,EAAUA,QAAV,OACJ,kBAAC,IAAMxC,SAAP,KACI,yBAAK5B,UAAU,QACX,kBAACmU,GAAD,MACA,kBAACC,GAAD,CACI9U,MAAOA,EACP8E,QAASA,SAQ7B,kBAAC,IAAD,CACI0P,KAAI,gBAAWzR,KAAKzB,EAAhB,WACJsT,OAAQ,gBAAG9P,EAAH,EAAGA,QAAH,OAAiB,kBAAC,GAAD,CAAMA,QAASA,OAG5C,kBAAC,IAAD,CACI6P,OAAK,EACLH,KAAI,gBAAWzR,KAAKzB,EAAhB,KACJsT,OAAQ,YAAyB,IAAtB9P,EAAqB,EAArBA,QAAS9E,EAAY,EAAZA,MAChB,OACI,kBAAC,IAAMsC,SAAP,KACI,kBAAC,GAAD,CAAMwC,QAASA,IACf,kBAAC,GAAD,CAAO9E,MAAOA,IACd,yBAAKU,UAAU,aACX,kBAAC,GAAD,WAOpB,kBAAC,IAAD,CACIkU,OAAQ,kBAAM,kBAAC,IAAD,CAAUnT,aAAa,OAAOD,GAAG,YAIvD,kBAAC,GAAD,W,GA/IUmE,aAyLpB1F,IAAQ,IAAIC,KAAJ,CAAqBiU,IACpBvT,iBAAUX,I,8CC3MV,cAAyB,IAAxBY,EAAuB,uDAAf,GAAI8R,EAAW,uCACnC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQc,cACT,OAAO,gBACAsL,EADP,CAEInH,MAAM,gBACCmH,EAAMnH,MADR,CAEDgL,YAAY,MAGxB,KAAKjQ,EAAQe,cACT,OAAO,gBACAqL,EADP,CAEInH,MAAM,gBACCmH,EAAMnH,MADR,CAEDgL,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,UAG9B,KAAKxgB,EAAQgB,cACT,OAAO,gBACAoL,EADP,CAEIgL,MAAM,gBACChL,EAAMgL,MADR,CAEDnH,YAAY,MAGxB,KAAKjQ,EAAQiB,cACT,OAAO,gBACAmL,EADP,CAEIgL,MAAM,gBACChL,EAAMgL,MADR,CAEDnH,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,UAG9B,QACI,OAAOpU,ICvCJ,cAAoC,IAAnCA,EAAkC,uDAA1B,CAAE8D,MAAO,IAAMgO,EAAW,uCAC9C,OAAQA,EAAO3a,MACX,KAAKvD,EAAQkB,WACT,OAAO,gBACAkL,EADP,CAEI6D,YAAY,IAEpB,KAAKjQ,EAAQmB,WACT,OAAO,gBACAiL,EADP,CAEI6D,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,QAE1B,QACI,OAAOpU,IChBNqU,GAAe,CACxBnP,GAAI,CACA6J,MAAO,CACHlL,YAAY,EACZC,MAAO,CACHsB,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,KAGd8O,YAAa,MAEjBI,QAAS,CACLzQ,YAAY,EACZC,MAAO,CACHsB,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,KAGd8O,YAAa,MAEjBK,SAAU,CACN1Q,YAAY,EACZC,MAAO,CACHsB,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,KAGd8O,YAAa,MAYjB/O,OAAQ,CACJtB,YAAY,EACZ6F,eAAe,EACf5F,MAAO,CACHsB,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,KAGd8B,aAAc,GACdgN,YAAa,MAEjBtS,GAAI,CACAiC,YAAY,EACZC,MAAO,CACHsB,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,KAGdoM,QAAS,CACLpM,KAAM,CACFU,MAAO,CACHC,MAAO,GAEXX,KAAM,OAetB9G,KAAM,SACNuH,OAAQ,QACRkM,QAAS,CACLhD,MAAO,EACPuF,QAAS,EACTC,SAAU,EACVpP,OAAQ,EACRqP,OAAQ,GAEZ5X,YAAa,IClGF,cAAsC,IAArCoD,EAAoC,uDAA5BqU,GAAanP,GAAI4M,EAAW,uCAChD,OAAQA,EAAO3a,MAEX,KAAKvD,EAAQiC,gBACT,OAAO,gBACAmK,EADP,CAEImF,OAAO,gBACAnF,EAAMmF,OADP,CAEFtB,YAAY,EACZ6F,eAAe,MAG3B,KAAK9V,EAAQ8B,WACT,OAAO,gBACAsK,EADP,CAEI4B,GAAG,gBACI5B,EAAM4B,GADX,CAEEiC,YAAY,MAGxB,KAAKjQ,EAAQoB,cACT,OAAO,gBACAgL,EADP,CAEI+O,MAAM,gBACC/O,EAAM+O,MADR,CAEDlL,YAAY,MAGxB,KAAKjQ,EAAQwB,gBACT,OAAO,gBACA4K,EADP,CAEIsU,QAAQ,gBACDtU,EAAMsU,QADN,CAEHzQ,YAAY,MAGxB,KAAKjQ,EAAQ0B,iBACT,OAAO,gBACA0K,EADP,CAEIuU,SAAS,gBACFvU,EAAMuU,SADL,CAEJ1Q,YAAY,MAWxB,KAAKjQ,EAAQsB,YACT,OAAO,gBACA8K,EADP,CAEI+O,MAAM,gBACC/O,EAAM+O,MADR,CAEDlL,YAAY,IAEhByQ,QAAQ,gBACDtU,EAAMsU,QADN,CAEHzQ,YAAY,IAEhB0Q,SAAS,gBACFvU,EAAMuU,SADL,CAEJ1Q,YAAY,MAQxB,KAAKjQ,EAAQkC,gBACT,OAAO,gBACAkK,EADP,CAEImF,OAAO,gBACAnF,EAAMmF,OADP,CAEFtB,YAAY,EACZ6F,eAAe,EACfpS,OAAO,EACPmd,YAAa,KACb3Q,MAAO,CACHsB,KAAM0M,EAAOza,QAAQqd,SAEzBxN,aAAc9L,OAAOC,KAAKyW,EAAOza,QAAQsd,MACpCvJ,OACAnQ,QACG,SAACC,EAAGsF,GAAJ,OAAYtF,EAAEsF,GAAKsR,EAAOza,QAAQsd,KAAKnU,GAAKtF,IAC5C,IAERgZ,YAAaC,KAAKC,UAG9B,KAAKxgB,EAAQuB,YAET,OAAO,gBACA6K,EADP,CAEI+O,MAAM,gBACC/O,EAAM+O,MADR,CAEDlL,YAAY,EACZC,MAAOgO,EAAOza,QAAQud,MACtBV,YAAaC,KAAKC,QAEtBE,QAAQ,gBACDtU,EAAMsU,QADN,CAEHzQ,YAAY,EACZC,MAAOgO,EAAOza,QAAQwd,QACtBX,YAAaC,KAAKC,QAEtBG,SAAS,gBACFvU,EAAMuU,SADL,CAEJ1Q,YAAY,EACZC,MAAOgO,EAAOza,QAAQyd,SACtBZ,YAAaC,KAAKC,UAS9B,KAAKxgB,EAAQ+B,WACT,OAAO,gBACAqK,EADP,CAEI4B,GAAG,gBACI5B,EAAM4B,GADX,CAEEiC,YAAY,EACZC,MAAOgO,EAAOza,QAAQ0d,GACtBb,YAAaC,KAAKC,MAClB5C,QAASM,EAAOza,QAAQ2d,YAGpC,KAAKphB,EAAQqB,cACT,OAAO,gBACA+K,EADP,CAEI+O,MAAM,gBACC/O,EAAM+O,MADR,CAEDlL,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,UAG9B,KAAKxgB,EAAQyB,gBACT,OAAO,gBACA2K,EADP,CAEIsU,QAAQ,gBACDtU,EAAMsU,QADN,CAEHzQ,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,UAG9B,KAAKxgB,EAAQ2B,iBACT,OAAO,gBACAyK,EADP,CAEIuU,SAAS,gBACFvU,EAAMuU,SADL,CAEJ1Q,YAAY,EACZC,MAAOgO,EAAOza,QACd6c,YAAaC,KAAKC,UAa9B,KAAKxgB,EAAQgC,SAET,OADA8F,QAAQsD,IAAI,oBACL,gBACAgB,EADP,CAEI4B,GAAIyS,GAAanP,GAAGtD,KAE5B,QACI,OAAO5B,ICtLbvH,GAAmCJ,EAAnCI,gBAAiBH,GAAkBD,EAAlBC,cAGR,cAAsC,IAArC0H,EAAoC,uDAA5BvH,GAAiBqZ,EAAW,uCAChD,OAAQA,EAAO3a,MACX,KAAKvD,EAAQC,SACT,OAAOie,EAAOtW,SAClB,KAAKlD,GAAcC,gBACf,OAA8D,IAA1DuZ,EAAOza,QAAQK,SAASgR,SAASjL,MAAM,KAAK,GAAGiG,OACxC1D,EAEJ8R,EAAOza,QAAQK,SAASgR,SAASjL,MAAM,KAAK,GACvD,QACI,OAAOuC,ICbJ,cAA6B,IAA5BA,EAA2B,uDAAnB,OAAQ8R,EAAW,uCACvC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQE,SACT,OAAOge,EAAO1T,KAClB,QACI,OAAO4B,ICLJ,cAA2B,IAA1BA,IAAyB,yDAAX8R,EAAW,uCACrC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQG,aACT,OAAO+d,EAAOmD,SAClB,QACI,OAAOjV,ICJJ,cAAwC,IAAvCA,EAAsC,uDAA9BqU,GAAa/V,KAAMwT,EAAW,uCAClD,OAAQA,EAAO3a,MACX,KAAKvD,EAAQI,SACT,OAAO8d,EAAOxT,KAClB,QACI,OAAO0B,ICPJ,cAA4B,IAA3BA,EAA0B,wDAAX8R,EAAW,uCACtC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQM,eACT,OAAO4d,EAAOoD,WAClB,QACI,OAAOlV,ICJJ,cAAyB,IAAxBA,EAAuB,uDAAf,GAAI8R,EAAW,uCACnC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQqC,wBACT,OAAO6b,EAAOza,QAClB,QACI,OAAO2I,I,UCHJ,cAA2C,IAA1CA,EAAyC,uDAAjCqU,GAAatC,QAASD,EAAW,uCACrD,OAAQA,EAAO3a,MACX,KAAKvD,EAAQS,cACT,OAAOggB,GAAatC,QACxB,KAAKne,EAAQO,YACT,OAAO,gBACA6L,EADP,gBAEK8R,EAAOsB,WAAatB,EAAOhW,SAEpC,QACI,OAAOkE,ICbJ,cAA4B,IAA3BA,EAA0B,wDAAX8R,EAAW,uCACtC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQQ,UACT,OAAO0d,EAAOza,QAClB,QACI,OAAO2I,ICJJ,cAAyB,IAAxBA,EAAuB,uDAAf,GAAI8R,EAAW,uCACnC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQmC,oBACT,OAAO2P,MAAMyP,KAAK,IAAIhL,IAAJ,uBAAYnK,GAAZ,CAAmB8R,EAAOnV,SAAQyO,OACxD,QACI,OAAOpL,ICDJ,cAAyB,IAAxBA,EAAuB,uDAAf,GAAI8R,EAAW,uCACnC,OAAQA,EAAO3a,MACX,KAAKvD,EAAQoC,mBAAb,MAC+B8b,EAAOza,QAA5BmH,EADV,EACUA,OAAQC,EADlB,EACkBA,SACd,OAAO2L,GAAc,GAAD,oBAAKpK,GAAL,CAAYxB,IAASC,EAAUD,EAAOvF,OAC9D,KAAKrF,EAAQwC,cACT,OAAO,aAAI4J,GAAOxB,QAAO,SAAAkG,GAAC,OAAIA,EAAEzL,QAAU6Y,EAAOza,WAErD,KAAKzD,EAAQY,mBACT,MAAO,GACX,QACI,OAAOwL,ICdJ,cAA0C,IAAzCA,EAAwC,uDAAhCqU,GAAaxO,OAAQiM,EAAW,uCACpD,OAAQA,EAAO3a,MACX,KAAKvD,EAAQK,WACT,OAAO6d,EAAOza,QAClB,QACI,OAAO2I,ICWJ,YAAAiE,GAAO,OAClBmR,aAAgB,CACZC,OAAQC,aAAcrR,GACtBA,QAASqO,GACT1V,YAAa2Y,GACbrV,iBAAkBsV,GAClB5U,aAAc6U,GACdrO,aAAc/I,GACd8I,eAAgBuO,GAChBC,eACAC,iBACArE,YACAQ,QAASC,GACTlT,kBAAmByT,GACnB3O,GAAIiS,GACJ3L,GAAI4L,GACJ5Q,GAAI6Q,M,6CC7BNrd,GAAcL,EAAdK,UASN+G,KAAKuW,IAAIC,MAEJD,IAAIE,MAEJjZ,KAAK,CACFkZ,YAAa,KACbC,OAR8C,EAS9CC,QAASjb,OAAOC,KAAK3C,IAAW6H,KAAI,SAAAE,GAAC,OAAIA,KAEzC6V,eAAe,EAEfC,UC1BuB,CAG3BvS,MAAO,CAAC,OAAQ,gBAChBwS,oBAAqB,EACrBC,mBAAoB,aAGpBC,OAAQ,CAAC,gBACTC,iBAAiB,GDmBbC,cAAe,CACXC,aAAa,GAGjBC,MAAO,CACHC,MAAM,KAIHtX,GAAf,EAAeA,IE7BoBuX,GCU7BA,GCVS,SAAwBC,GACnC,IAAMhT,EAAUiT,eAEVC,EAAc,CAACC,MAUfC,EAAY,CAFSC,KAAe,WAAf,EAAmBH,IAGxCI,EAAoBC,KAAO,WAAP,EAAWH,GAQrC,OANcI,aACVC,GAASzT,GACTgT,EACAM,GDTMI,IDVqBX,GCYnBA,IDVNngB,SAASoH,GAAmB,UAClC+Y,GAAMngB,SAASkH,GAAmB,UAGlCiZ,GAAMngB,SAASgG,MAIfma,GAAMngB,SAAS+E,MCiBnBgc,IAAS7D,OAAO,mBAbJ,WAER,OADA1S,SAASwW,KAAKC,UAAUC,IAAI,WAExB,kBAAC,IAAMC,WAAP,KACI,kBAAC,IAAD,CAAUhB,MAAOA,IACb,kBAAC,IAAD,KACI,kBAAC,IAAD,CAAOpD,UAAWN,UAOtB,MAASjS,SAAS4W,eAAe,S5D0F3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMvZ,MAAK,SAAAwZ,GACjCA,EAAaC,iB,mB8D/HnB9kB,EAAOC,QAAU,IAA0B,kD","file":"static/js/main.4d642ca1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo_all.35da1415.png\";","module.exports = __webpack_public_path__ + \"static/media/nlm_logo_full_transparent.c44b13b0.png\";","module.exports = __webpack_public_path__ + \"static/media/UB-woodblock-closeup.67ac4b0f.jpg\";","export const fetchTypes = {\n    WORKS: 'WORKS',\n    ALL: 'ALL',\n    AUTHORS: 'AUTHORS',\n    SUBJECTS: 'SUBJECTS',\n    PLACES: 'PLACES',\n    RESULTS: 'RESULTS',\n    ID: 'ID',\n    PAGES: 'PAGES',\n    POSTS: 'POSTS',\n    GS: 'GS',\n}\n\nexport const status = {\n    START: 'START',\n    CLEAR: 'CLEAR',\n    SUCCESS: 'SUCCESS',\n    FAILURE: 'FAILURE',\n    REQUEST: 'REQUEST',\n    RECEIVE: 'RECEIVE',\n    ERROR: 'ERROR',\n}\n\nexport const actions = {\n    SET_LANG: 'SET_LANG',\n    SET_PAGE: 'SET_PAGE',\n    SET_COLLAPSE: 'SET_COLLAPSE',\n    SET_MENU: 'SET_MENU',\n    SET_BROWSE: 'SET_BROWSE',\n    SET_COLLECTION: 'SET_COLLECTION',\n    SET_OFFSETS: 'SET_OFFSETS',\n    SET_MODAL: 'SET_MODAL',\n    RESET_OFFSETS: 'RESET_OFFSETS',\n    CLEAR_RESULTS: 'CLEAR_RESULTS',\n    CLEAR_FILTER_TERM: 'CLEAR_FILTER_TERM',\n    CLEAR_FILTER_ARRAY: 'CLEAR_FILTER_ARRAY',\n    DELETE_FULL_TEXT: 'DELETE_FULL_TEXT',\n    REQUEST_PAGES: 'REQUEST_PAGES',\n    RECEIVE_PAGES: 'RECEIVE_PAGES',\n    REQUEST_POSTS: 'REQUEST_POSTS',\n    RECEIVE_POSTS: 'RECEIVE_POSTS',\n    REQUEST_GS: 'REQUEST_GS',\n    RECEIVE_GS: 'RECEIVE_GS',\n    REQUEST_WORKS: 'REQUEST_WORKS',\n    RECEIVE_WORKS: 'RECEIVE_WORKS',\n    REQUEST_ALL: 'REQUEST_ALL',\n    RECEIVE_ALL: 'RECEIVE_ALL',\n    REQUEST_AUTHORS: 'REQUEST_AUTHORS',\n    RECEIVE_AUTHORS: 'RECEIVE_AUTHORS',\n    REQUEST_SUBJECTS: 'REQUEST_SUBJECTS',\n    RECEIVE_SUBJECTS: 'RECEIVE_SUBJECTS',\n    REQUEST_PLACES: 'REQUEST_PLACES',\n    RECEIVE_PLACES: 'RECEIVE_PLACES',\n    REQUEST_ID: 'REQUEST_ID',\n    RECEIVE_ID: 'RECEIVE_ID',\n    CLEAR_ID: 'CLEAR_ID',\n    REQUEST_RESULTS: 'REQUEST_RESULTS',\n    RECEIVE_RESULTS: 'RECEIVE_RESULTS',\n    ADD_TERM_TO_HISTORY: 'ADD_TERM_TO_HISTORY',\n    ADD_TERM_TO_FILTER: 'ADD_TERM_TO_FILTER',\n    SET_CURRENT_SEARCH_TERM: 'SET_CURRENT_SEARCH_TERM',\n    SET_CURRENT_FILTER_TERM: 'SET_CURRENT_FILTER_TERM',\n    SET_FILTER_ARRAY: 'SET_FILTER_ARRAY',\n    REMOVE_FILTER: 'REMOVE_FILTER',\n}\n","import { status } from '../types'\n\nconst getAsyncAction = ({ actionType, asyncFunc }) => {\n    const actionTypeRequest = `${status.REQUEST}_${actionType}`\n    const actionTypeReceive = `${status.RECEIVE}_${actionType}`\n    const actionTypeClear = `${status.CLEAR}_${actionType}`\n    const actionTypeError = `${status.ERROR}_${actionType}`\n    //const actionTypeResources = `RECEIVE_ASSOCIATED_RECORDS`\n\n    const startAction = () => {\n        return {\n            type: actionTypeRequest,\n        }\n    }\n\n    const clearAction = () => {\n        return {\n            type: actionTypeClear,\n        }\n    }\n\n    const successAction = payload => {\n        return {\n            type: actionTypeReceive,\n            payload: payload,\n        }\n    }\n\n    const failureAction = error => {\n        return {\n            type: actionTypeError,\n            payload: error,\n        }\n    }\n\n    const asyncAction = args => {\n        return async dispatch => {\n            if (['ID', 'RESULTS'].some(el => actionType.includes(el))) {\n                dispatch(clearAction())\n            }\n            dispatch(startAction())\n            try {\n                const { data } = await asyncFunc(args)\n                dispatch(successAction(data))\n            } catch (error) {\n                dispatch(failureAction(error))\n            }\n        }\n    }\n\n    return asyncAction\n}\n\nexport default getAsyncAction\n","import axios from 'axios'\n\n// EXPRESS\nconst expressOptions = {\n    //baseUrl: '/api',\n    baseUrl: 'http://api.asianclassics.org',\n    //baseUrl: 'http://localhost:5000',\n    devUrl: 'http://localhost:5000',\n}\n\n// here we use the public api endpoint, which at some point we should close\n// and do something like ACE, proxying through NGINX on 8081 port (/api endpoint)\nconst express =\n    window.location.port === '3000'\n        ? expressOptions.devUrl\n        : expressOptions.baseUrl\n\nexport const expressURL = axios.create({\n    baseURL: express,\n})\n\n// Express Routes for NLM\nexport const elastic = {\n    searchByID: '/nlm/search/ids',\n    searchByIDNoCode: '/nlm/search/ids/nocode',\n    searchAll: '/nlm/search/_all',\n    fetchAll: '/nlm/_all',\n    fetchWorks: '/nlm/_works',\n    fetchAuthors: '/nlm/_authors',\n    fetchSubjects: '/nlm/_subjects',\n    //fetchPlaces: '/nlm/_places',\n    fetchID: '/nlm/_ids',\n}\n\n// WORDPRESS\nexport const wordpress = {\n    node: 'http://178.128.7.239/',\n    onlyIP: '178.128.7.239',\n    rest: 'wp-json/wp/v2/',\n}\n\nexport const wpURL = axios.create({\n    baseURL: `${wordpress.node}${wordpress.rest}`,\n})\n\n// GOOGLE SHEETS\nexport const gs = {\n    d: `https://docs.google.com/spreadsheets/d/`,\n    gsKey_original: `1hPqe-Y2TWwMTAxIEXYvc8du_GMFUJQNPvZbJou7veAY`,\n    gsKey: `1PPvGoikEC37L-dtigW9FEk9-IZRoalmS28HkRfaIVT4`,\n    testKey: `1P6Dk9SN0af7GDitw7-tRXGc5N22AEXoaOpDIKzVdlK0`,\n    editParam: `/edit?usp=sharing`,\n}\n","const IIIFImageAPI = {\n    region: 'full',\n    size: 'max',\n    rotation: '0',\n    qualityAndFormat: 'default.jpg',\n}\n\nexport const constants = {\n    routerActions: {\n        LOCATION_CHANGE: '@@router/LOCATION_CHANGE',\n    },\n    buildYear: '2018',\n    defaultLanguage: 'en',\n    languages: {\n        en: 'English',\n        mn: 'Mongolian',\n    },\n    pages: ['home', 'archives'],\n    browseOptions: ['Title', 'Author', 'Subject'],\n    menuItems: [\n        { key: 'browse', label: 'Browse' },\n        { key: 'search', label: 'Search results' },\n    ],\n    sectionLinks: [\n        { key: 'student', node: 'personTeacherOf', icon: 'fal fa-user' },\n        { key: 'teacher', node: 'personStudentOf', icon: 'fal fa-user-crown' },\n        { key: 'work', node: '', icon: 'fal fa-book-spells' },\n        { key: 'author', node: '_creator', icon: 'fal fa-user-edit' },\n        { key: 'genre', node: 'workGenre', icon: 'fal fa-layer-group' },\n        { key: 'subject', node: 'workIsAbout', icon: 'fal fa-list' },\n    ],\n    browseItems: [\n        { key: 'works', label: 'Works' },\n        { key: 'authors', label: 'Authors' },\n        { key: 'subjects', label: 'Subjects' },\n    ],\n    browseTypes: ['works', 'authors', 'subjects'],\n    searchTypeOptions: [\n        { key: 'work', color: 'col-blue' },\n        { key: 'topic', color: 'col-blue' },\n        { key: 'subject', color: 'col-dark' },\n        { key: 'person', color: 'col-gold' },\n        { key: 'place', color: 'col-red' },\n    ],\n    defaultColor: 'col-gold',\n    searchOptions: {\n        searchOffset: 0,\n        resultSetSize: 10,\n    },\n    searchTerms: [\n        `TSUL`,\n        `MDZES PA DBYIG GNYEN`,\n        `GUHYASAMAJA`,\n        `DPAL`,\n        `RGYAS PAR`,\n        `LTAR`,\n        `MI JOGS`,\n        `NOTES`,\n        `BLO BZANG GRAGS PA`,\n    ],\n    links: {\n        wpAdmin: 'http://178.128.7.239/wp-login.php',\n        acipEmail: 'mailto:info@asianclassics.org',\n        nlmSite: 'http://nationallibrary.mn/mn/',\n    },\n    smallScreenWidth: 601,\n    bdrGender: {\n        'bdr:GenderMale': 'Male',\n        'bdr:GenderFemale': 'Female',\n    },\n\n    bdrObjectType: {\n        'bdr:ObjectTypeBlockprint': 'Blockprint',\n    },\n\n    bdrPurlURL: `http://purl.bdrc.io/resource/`,\n\n    collections: [\n        { key: '1', name: 'Collection 1' },\n        { key: '2', name: 'Collection 2' },\n    ],\n\n    searchParams: {\n        initialIndex: 'v1_bdrc_work',\n        initialIndexPrefix: 'v1_bdrc_',\n        type: '_doc',\n        size: 10,\n    },\n\n    v1Indices: ['v1_*'],\n    v2Indices: ['v2_*'],\n    IIIFsuffix: `/${IIIFImageAPI.region}/${IIIFImageAPI.size}/${IIIFImageAPI.rotation}/${IIIFImageAPI.qualityAndFormat}`,\n}\n","import { wpURL } from '../endpoints'\nimport { constants } from '../../../store/_constants'\nlet { languages } = constants\n\nexport default async type => {\n    try {\n        const data = await wpURL.get(`${type}?_embed`)\n\n        const d = data.data.reduce((r, a) => {\n            const x = Object.keys(languages).find(\n                key => languages[key] === a.acf.language\n            )\n            r[x] = r[x] || []\n            r[x].push(a)\n            return r\n        }, [])\n        return { data: d }\n    } catch (error) {\n        console.error('fetch ID error! ', error)\n        return error\n    }\n}\n","import Tabletop from 'tabletop'\nimport { gs } from '../endpoints'\n\nconst spreadsheet = `${gs.d}${gs.gsKey}${gs.editParam}`\n\nconst tableTopInit = async () => {\n    return await new Promise((response, error) => {\n        Tabletop.init({\n            key: spreadsheet,\n            callback: (data, tabletop) => {\n                response(data.Stats.elements)\n                error(tabletop)\n            },\n            //, simpleSheet: true\n        })\n    })\n}\n\nexport default async () => {\n    try {\n        const data = await tableTopInit()\n\n        // add some data processing\n        let gsData = {}\n        data.forEach(d => {\n            const key = d.StatName.split(' ').join('')\n            gsData[key] = isNaN(d.Value)\n                ? d.Value\n                : String(d.Value).replace(/(.)(?=(\\d{3})+$)/g, '$1,')\n        })\n        return { data: gsData }\n    } catch (error) {\n        console.error('error from tabletop', error)\n        return error\n    }\n}\n","import getAsyncAction from './asyncActionUtils'\nimport { fetchTypes } from '../types'\nimport fetchWorks from '../apis/elasticsearch/fetchWorks'\nimport fetchAuthors from '../apis/elasticsearch/fetchAuthors'\nimport fetchSubjects from '../apis/elasticsearch/fetchSubjects'\nimport fetchAll from '../apis/elasticsearch/fetchAll'\nimport fetchID from '../apis/elasticsearch/fetchIDs'\nimport fetchResults from '../apis/elasticsearch/fetchResults'\nimport fetchWPType from '../apis/wordpress/fetchWPType'\nimport fetchGS from '../apis/googleSheets/fetchGS'\n\n// ELASTICSEARCH\nexport const fetchAllAction = getAsyncAction({\n    actionType: fetchTypes.ALL,\n    asyncFunc: fetchAll,\n})\nexport const fetchWorksAction = getAsyncAction({\n    actionType: fetchTypes.WORKS,\n    asyncFunc: fetchWorks,\n})\nexport const fetchAuthorsAction = getAsyncAction({\n    actionType: fetchTypes.AUTHORS,\n    asyncFunc: fetchAuthors,\n})\nexport const fetchSubjectsAction = getAsyncAction({\n    actionType: fetchTypes.SUBJECTS,\n    asyncFunc: fetchSubjects,\n})\n// export const fetchPlacesAction = getAsyncAction({\n//     actionType: fetchTypes.PLACES,\n//     asyncFunc: fetchPlaces,\n// })\nexport const fetchIDAction = getAsyncAction({\n    actionType: fetchTypes.ID,\n    asyncFunc: fetchID,\n})\n\nexport const fetchResultsAction = getAsyncAction({\n    actionType: fetchTypes.RESULTS,\n    asyncFunc: fetchResults,\n})\n\n// GOOGLE SHEETS\nexport const fetchGSAction = getAsyncAction({\n    actionType: fetchTypes.GS,\n    asyncFunc: fetchGS,\n})\n\n// WORDPRESS\nexport const fetchWPPostsAction = getAsyncAction({\n    actionType: fetchTypes.POSTS,\n    asyncFunc: fetchWPType,\n})\n\nexport const fetchWPPagesAction = getAsyncAction({\n    actionType: fetchTypes.PAGES,\n    asyncFunc: fetchWPType,\n})\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async () => {\n    try {\n        const data = await expressURL.get(elastic.fetchAll)\n        return { data: data.data }\n    } catch (error) {\n        console.error('there been fetchAll error ', error)\n        return error\n    }\n}\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async args => {\n    let offset = args.offset ? args.offset : 0\n    try {\n        const data = await expressURL.get(elastic.fetchWorks, {\n            params: { offset },\n        })\n\n        return { data: data.data }\n    } catch (error) {\n        console.error('there been fetchWorks error ', error)\n        return error\n    }\n}\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async args => {\n    let offset = args.offset ? args.offset : 0\n    try {\n        const data = await expressURL.get(elastic.fetchAuthors, {\n            params: { offset },\n        })\n\n        return { data: data.data }\n    } catch (error) {\n        console.error('there been fetchWorks error ', error)\n        return error\n    }\n}\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async args => {\n    let offset = args.offset ? args.offset : 0\n    try {\n        const data = await expressURL.get(elastic.fetchSubjects, {\n            params: { offset },\n        })\n\n        return { data: data.data }\n    } catch (error) {\n        console.error('there been fetchWorks error ', error)\n        return error\n    }\n}\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async doc_id => {\n    const code = doc_id.charAt(4)\n    let ids = JSON.stringify([doc_id])\n    let lengthIDs = 1\n    try {\n        const data = await expressURL.get(elastic.fetchID, {\n            params: { ids, lengthIDs, code },\n        })\n        return { data: data.data }\n    } catch (error) {\n        console.error('fetch ID error! ', error)\n        return error\n    }\n}\n","import { elastic, expressURL } from '../endpoints'\n\nexport default async args => {\n    let term = args.term ? args.term : ''\n    let offset = args.offset ? args.offset : 0\n    // let filterType = args.filterType ? args.filterType : null\n    // let filterTerm = args.filterTerm ? args.filterTerm : null\n    let filterArray = args.filterArray ? args.filterArray : null\n    try {\n        const data = await expressURL.get(elastic.searchAll, {\n            params: { term, offset, filterArray }, //params: { term, offset },\n        })\n        return { data: data.data }\n    } catch (error) {\n        console.error('there been fetchResults error ', error)\n        return error\n    }\n}\n","import { actions } from '../types'\nimport { fetchResultsAction } from '../actions'\n// do the resolve reject within here? vs above...\nexport const someThenableThunk = (filter, isActive) => (dispatch, getState) =>\n    Promise.resolve()\n        .then(() => {\n            //const { someReducer } = getState()\n            return dispatch({\n                type: 'ADD_TERM_TO_FILTER',\n                filter,\n                isActive,\n            })\n        })\n        .catch(error => {\n            console.log('error?', error)\n        })\n\nexport const setLanguage = language => ({\n    type: actions.SET_LANG,\n    language,\n})\n\nexport const setLanguage2 = (language, i18n) => {\n    i18n.changeLanguage(language)\n    return {\n        type: actions.SET_LANG,\n        language,\n    }\n}\n\nexport const setPage = page => ({\n    type: actions.SET_PAGE,\n    page,\n})\n\nexport const setCollapse = collapse => ({\n    type: actions.SET_COLLAPSE,\n    collapse,\n})\n\nexport const setCollection = collection => ({\n    type: actions.SET_COLLECTION,\n    collection,\n})\n\nexport const setMenu = menu => ({\n    type: actions.SET_MENU,\n    menu,\n})\n\nexport const resetOffsets = () => {\n    return {\n        type: actions.RESET_OFFSETS,\n    }\n}\n\nexport const clearResults = () => {\n    return {\n        type: actions.CLEAR_RESULTS,\n    }\n}\n\nexport const clearFilterArray = () => {\n    return {\n        type: actions.CLEAR_FILTER_ARRAY,\n    }\n}\n\nexport const deleteFullText = () => {\n    return { type: actions.DELETE_FULL_TEXT }\n}\n\nexport const setCurrentSearchTerm = term => {\n    return {\n        type: actions.SET_CURRENT_SEARCH_TERM,\n        payload: term,\n    }\n}\n\nexport const setFilterArray = filters => ({\n    type: actions.SET_FILTER_ARRAY,\n    payload: filters,\n})\n\nexport const addTermToHistory = term => {\n    // look into how to terminate action based on cache\n    //if (!store.getState().history.includes(term)) {\n    return {\n        type: actions.ADD_TERM_TO_HISTORY,\n        term,\n    }\n    //}\n}\n\n//export const someThenableThunk = (filter, isActive) => (dispatch, getState) =>\nexport const handleFilters = (filter, isActive) => (dispatch, getState) => {\n    return dispatch(\n        actionWrapper(actions.ADD_TERM_TO_FILTER, {\n            filter: filter,\n            isActive: isActive,\n        })\n    )\n        .then(() => {\n            const { currentSearchTerm, filterArray } = getState()\n            dispatch(\n                fetchResultsAction({\n                    term: currentSearchTerm,\n                    filterArray: filterArray,\n                })\n            )\n        })\n        .catch(error => {\n            console.log('fetch error in filter component', error)\n        })\n}\n\nexport function actionWrapper(type, payload) {\n    return dispatch =>\n        new Promise((resolve, reject) => {\n            dispatch({ type: type, payload: payload })\n            resolve()\n        })\n}\n\nexport function addTermToFilter(filter, isActive) {\n    return (dispatch, getState) =>\n        new Promise((resolve, reject) => {\n            //let { filterArray } = getState() // get state to conditionally dispatch\n            dispatch({ type: actions.ADD_TERM_TO_FILTER, filter, isActive })\n            resolve()\n            //setTimeout(() => reject(new Error('Timeout!')), 3000)\n        })\n}\n\nexport const setOffsets = (offsetType, offset) => {\n    return {\n        type: actions.SET_OFFSETS,\n        offsetType,\n        offset,\n    }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import '../../assets/sass/nlm/navbar.scss'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport { setLanguage } from '../../store/actions'\nimport { constants } from '../../store/_constants'\nlet { defaultLanguage } = constants\n\nconst Language = ({ active, children, dispatch, lang, i18n }) => {\n    const changeI18n = lng => {\n        i18n.changeLanguage(lng)\n    }\n\n    return (\n        <li\n            key={children}\n            onClick={() => {\n                dispatch(setLanguage(lang, i18n))\n                changeI18n(lang)\n            }}\n            className={active ? 'lang-active' : 'lang'}\n        >\n            <button\n                key={children}\n                disabled={active ? true : false}\n                className=\"btn-lang\"\n            >\n                {children}\n            </button>\n        </li>\n    )\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n    active: ownProps.selectedLanguage === state.selectedLanguage,\n    lang: ownProps.selectedLanguage || defaultLanguage,\n})\n\nconst withN = new withNamespaces()(Language)\nexport default connect(mapStateToProps)(withN)\n","import '../assets/sass/nlm/navbar.scss'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { withNamespaces } from 'react-i18next'\nimport Language from './containers/Language'\n\n// language codes, ISO 639-1\n// mongolian - mn, english - en, tibetan - bo\nconst Languages = props => {\n    let list = []\n\n    list = Object.entries(props.t('languages')).map(([k, l]) => {\n        //const p = props.page === 'home' ? '' : `/${props.t('pages')[props.page]}`\n        const p = props.page === 'home' ? '' : `/${props.page}`\n        return (\n            <Link key={k} to={`/${k}${p}`}>\n                <Language key={l} selectedLanguage={k}>\n                    {l}\n                </Language>\n            </Link>\n        )\n    })\n\n    return <ul className=\"language-list\">{list}</ul>\n}\n\nconst mapStateToProps = state => ({ page: state.selectedPage })\n\nconst withN = new withNamespaces()(Languages)\nexport default connect(mapStateToProps)(withN)\n","import '../../assets/sass/nlm/navbar.scss'\nimport React from 'react'\nimport PropTypes from 'prop-types'\nimport { setPage } from '../../store/actions'\nimport { connect } from 'react-redux'\n\nconst NavItem = ({ active, children, onClick }) => (\n    <li\n        key={children}\n        onClick={active ? null : onClick}\n        className={active ? 'nav-active' : 'nav'}\n        //style={active ? { color: 'red' } : { color: 'black' }}\n    >\n        <button\n            key={children}\n            disabled={active ? true : false}\n            className=\"btn-nav\"\n        >\n            {children}\n        </button>\n    </li>\n)\n\nNavItem.propTypes = {\n    active: PropTypes.bool.isRequired,\n    children: PropTypes.node.isRequired,\n    onClick: PropTypes.func.isRequired,\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n    active: ownProps.selectedPage === state.selectedPage,\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    onClick: () => dispatch(setPage(ownProps.selectedPage)),\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NavItem)\n","import React, { useEffect } from 'react'\nimport M from 'materialize-css'\n\nexport default ({ pages }) => {\n    let dropdownOptions = {\n        alignment: 'right',\n        closeOnClick: true,\n        constrainWidth: false,\n        hover: false,\n        inDuration: 250,\n    }\n\n    useEffect(() => {\n        const dropdownElem = document.querySelectorAll('.dropdown-trigger')\n        M.Dropdown.init(dropdownElem, dropdownOptions)\n    })\n\n    return (\n        <React.Fragment>\n            <a\n                className=\"dropdown-trigger btn dropdown-btn right\"\n                href=\"#!\"\n                data-target=\"dropdown-nav\"\n            >\n                <i className=\"fal fa-bars\" />\n            </a>\n            <ul id=\"dropdown-nav\" className=\"dropdown-content\">\n                {pages}\n            </ul>\n        </React.Fragment>\n    )\n}\n","import { useEffect, useState } from 'react'\n\nconst debounce = (func, delay) => {\n    let inDebounce\n    return function() {\n        const context = this\n        const args = arguments\n        clearTimeout(inDebounce)\n        inDebounce = setTimeout(() => func.apply(context, args), delay)\n    }\n}\n\nexport function useWindowSize(delay = 200) {\n    const isClient = typeof window === 'object'\n\n    function getSize() {\n        return {\n            width: isClient ? window.innerWidth : undefined,\n            height: isClient ? window.innerHeight : undefined,\n        }\n    }\n\n    const [windowSize, setWindowSize] = useState(getSize)\n\n    useEffect(() => {\n        if (!isClient) {\n            return false\n        }\n\n        function handleResize() {\n            setWindowSize(getSize())\n        }\n\n        window.addEventListener('resize', debounce(handleResize, delay))\n        return () => {\n            window.removeEventListener('resize', handleResize)\n        }\n    }, []) // Empty array ensures that effect is only run on mount and unmount\n\n    return windowSize\n}\n","import '../assets/sass/nlm/navbar.scss'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport NavItem from './containers/NavItem'\nimport NavDropdown from './NavDropdown'\nimport { withNamespaces } from 'react-i18next'\nimport { useWindowSize } from '../store/hooks/useWindowSize'\n\nconst Nav = ({ navigation, match, t }) => {\n    let { width } = useWindowSize()\n\n    if (navigation == null) {\n        return null\n    }\n\n    console.log(navigation)\n\n    // THIS NAV BAR GETS RENDERED TOO MUCH, NEED TO REFACTOR, MEMOIZE!\n    const slugs = navigation.map(nav => {\n        const p = nav.match === 'home' ? '' : `/${nav.match}`\n        return (\n            <Link key={nav.slug} to={`/${match.params.lng}${p}`}>\n                <NavItem key={nav.slug} selectedPage={nav.match}>\n                    {/* {t('pages')[nav.match]} */}\n                    {nav.nav_label}\n                </NavItem>\n            </Link>\n        )\n    })\n    if (width < 700 || navigation.length > 2) {\n        return <NavDropdown pages={slugs} />\n    } else {\n        return <ul className=\"nav-list\">{slugs}</ul>\n    }\n}\n\n// $$$ MEMOIZE\nconst createNavigation = pages => {\n    return pages.map(c => {\n        return {\n            match: c.slug.includes('-') ? c.slug.split('-')[0] : c.slug,\n            slug: c.slug,\n            nav_label: c.acf.nav_label.length > 0 ? c.acf.nav_label : c.slug,\n            order: c.acf.order,\n        }\n    })\n}\n\nconst mapStateToProps = state => ({\n    navigation: state.WP.pages.isFetching\n        ? null\n        : createNavigation(state.WP.pages.items[state.selectedLanguage]),\n})\n\nconst withN = new withNamespaces()(Nav)\nexport default connect(mapStateToProps)(withN)\n","import '../assets/sass/nlm/header.scss'\nimport React from 'react'\n\nimport Languages from './Languages'\nimport Nav from './Nav'\n\nexport default ({ history, match }) => {\n    return (\n        <React.Fragment>\n            <header>\n                <div className=\"section header\">\n                    <div className=\"row no-margin\">\n                        <Languages />\n                        <Nav history={history} match={match} />\n                    </div>\n                </div>\n            </header>\n        </React.Fragment>\n    )\n}\n","import '../assets/sass/nlm/footer.scss'\nimport React from 'react'\nimport { withNamespaces } from 'react-i18next'\nimport { constants } from '../store/_constants'\nimport logo from '../assets/images/logo_all.png'\nimport nlm_full from '../assets/images/nlm_logo_full_transparent.png'\n\nlet { buildYear, links } = constants\n\nconst Footer = ({ t }) => {\n    return (\n        <footer className=\"page-footer\">\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col m6 s12\">\n                        <div className=\"icon\">\n                            <img\n                                src={nlm_full}\n                                height=\"140px\"\n                                alt=\"mongolia-logo\"\n                            />\n                        </div>\n                    </div>\n                    <div className=\"col m4 offset-l2 s12\">\n                        <h5 className=\"white-text\">Links</h5>\n                        <ul>\n                            <li>\n                                <a\n                                    href={links.acipEmail}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    {t('footer.contact')}\n                                </a>\n                            </li>\n\n                            <li>\n                                <a\n                                    href={links.nlmSite}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    {t('footer.library-site')}\n                                </a>\n                            </li>\n\n                            <li>\n                                <a\n                                    href={links.wpAdmin}\n                                    target=\"_blank\"\n                                    rel=\"noopener noreferrer\"\n                                >\n                                    {t('footer.login')}\n                                </a>\n                            </li>\n                        </ul>\n                    </div>\n                </div>\n            </div>\n\n            <div className=\"footer-copyright\">\n                &copy; {`${buildYear} ${t('title')}. ${t('footer.rights')}.`}\n            </div>\n        </footer>\n    )\n}\n\nexport default withNamespaces()(Footer)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { handleFilters } from '../store/actions'\nclass SidebarFilterItem extends Component {\n    state = {\n        active: false,\n    }\n\n    setStateAndFilter = filter => {\n        let { filterArray } = this.props\n        this.setState(\n            { active: !filterArray.some(f => f.label === filter.label) },\n            () => {\n                this.props.dispatch(handleFilters(filter, this.state.active))\n            }\n        )\n    }\n\n    render() {\n        let { listItem, type, filterArray, id } = this.props\n        let activated = !!filterArray.some(f => f.label === listItem.key)\n        return (\n            <div\n                className={`flex item-filter ${activated ? 'active' : ''}`}\n                onClick={() => {\n                    this.setStateAndFilter({\n                        type: type,\n                        label: listItem.key,\n                    })\n                }}\n            >\n                <div>\n                    <span>{listItem.key}</span>\n                    <span> ({listItem.doc_count})</span>\n                </div>\n                {activated ? (\n                    <i className=\"fal fa-times-circle fade-up\" />\n                ) : null}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    filterArray: state.filterArray,\n    currentSearchTerm: state.currentSearchTerm,\n})\n\nexport default connect(mapStateToProps)(SidebarFilterItem)\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { handleFilters } from '../store/actions'\n\nexport default () => {\n    const dispatch = useDispatch()\n    const filterArray = useSelector(state => state.filterArray)\n    const results = useSelector(state => state.ES.search.items.hits.hits)\n\n    if (filterArray.length === 0 || results.length === 0) {\n        return null\n    }\n\n    const f = filterArray.map(f => {\n        return (\n            <p\n                key={`list-${f.label}`}\n                className={`filter-${f.type} with-border`}\n                onClick={() => dispatch(handleFilters(f, false))}\n            >\n                {f.label}\n                <i className=\"fal fa-times-circle valign-wrapper\" />\n            </p>\n        )\n    })\n    return <div className=\"current-filters\">{f}</div>\n}\n","export function selectorDetailsItem(itemDetails) {\n    const newObj = {}\n    Object.entries(itemDetails._source).forEach(([k, v]) => {\n        if (v && !Array.isArray(v)) {\n            if (typeof v === 'object') {\n                // OBJECT\n                newObj[k] = [v]\n            } else {\n                // STRING OR INT\n                newObj[k] = v //[{ _id: k, _value: v }]\n            }\n        } else {\n            // ARRAY\n            newObj[k] = v\n        }\n    })\n\n    return newObj\n}\n","export function getTotal(browse, menu, state) {\n    if (menu === 'search') {\n        return state.ES.search.items.hits.total.value\n    }\n    return state.ES[browse].items.hits.total.value\n}\n","import '../assets/sass/nlm/sidebar.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport { withNamespaces } from 'react-i18next'\nimport M from 'materialize-css'\n\nimport SidebarFilterItem from './SidebarFilterItem'\nimport SidebarFilterList from './SidebarFilterList'\n\nimport { getTotal } from '../store/selectors'\n\nclass SidebarFilters extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            sidenavOptions: {\n                edge: 'left',\n                inDuration: 250,\n            },\n            collapsibleOptions: {\n                accordion: false,\n            },\n            screenWidth: 0,\n        }\n    }\n\n    componentDidMount = () => {\n        const sidenavElems = document.querySelectorAll('.sidenav')\n        const collapsibleElems = document.querySelectorAll('.collapsible')\n        M.Sidenav.init(sidenavElems, this.state.sidenavOptions)\n        M.Collapsible.init(collapsibleElems, this.state.collapsibleOptions)\n    }\n\n    componentDidUpdate = () => {\n        const sidenavElems = document.querySelectorAll('.sidenav')\n        M.Sidenav.init(sidenavElems, this.state.sidenavOptions)\n    }\n\n    buildFilters = (title, filter) => {\n        if (filter.buckets.length === 0) {\n            return null\n        }\n\n        return (\n            <li key={title} className={title}>\n                <div className=\"collapsible-header\">\n                    {title}\n                    <i className=\"fal fa-chevron-double-down right fade-up\" />\n                </div>\n                <div className=\"collapsible-body\">\n                    {filter.buckets.map((b, i) => {\n                        return (\n                            <SidebarFilterItem\n                                key={b.key}\n                                listItem={b}\n                                type={title}\n                            />\n                        )\n                    })}\n                </div>\n            </li>\n        )\n    }\n\n    render() {\n        let { t, filters } = this.props\n        if (Object.entries(filters) === 0) {\n            return null\n        }\n\n        return (\n            <React.Fragment>\n                {Object.entries(filters).map(([title, filter]) => {\n                    return this.buildFilters(title, filter)\n                })}\n            </React.Fragment>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    filters: state.ES.search.aggregations,\n    results: state.ES.search.items.hits.hits,\n    currentSearchTerm: state.currentSearchTerm,\n    filterArray: state.filterArray,\n    total: getTotal(state.selectedBrowse, state.selectedMenu, state),\n})\n\n//{ fetchResultsAction, addTermToFilter, preFetch,}\nconst withN = new withNamespaces()(SidebarFilters)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { constants } from '../store/_constants'\nimport { getTotal } from '../store/selectors'\nlet { browseTypes } = constants\n\nconst BrowseItem = ({ item }) => {\n    let dispatch = useDispatch()\n    const currentBrowse = useSelector(state => state.selectedBrowse)\n    const total = useSelector(state => getTotal(item, 'browse', state))\n    console.log('total from selector', total)\n    let active = !!(currentBrowse === item)\n    return (\n        <div\n            className={`flex item-filter ${active ? 'active' : ''}`}\n            onClick={() => {\n                dispatch({ type: 'SET_BROWSE', payload: item })\n            }}\n        >\n            <div>{`${item} (${total})`}</div>\n        </div>\n    )\n}\n\nexport default () => {\n    const types = browseTypes.map(b => {\n        return <BrowseItem key={b} item={b} />\n    })\n\n    return (\n        <li className=\"active\">\n            <div className=\"collapsible-header\">\n                Browse By\n                <i className=\"fal fa-chevron-double-down right fade-up\" />\n            </div>\n            <div className=\"collapsible-body\">{types}</div>\n        </li>\n    )\n}\n","import '../assets/sass/nlm/sidebar.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport { withNamespaces } from 'react-i18next'\nimport M from 'materialize-css'\n\nimport SidebarFilters from './SidebarFilters'\nimport SidebarBrowse from './SidebarBrowse'\nimport { getTotal } from '../store/selectors'\nimport { constants } from '../store/_constants'\n\nlet { smallScreenWidth } = constants\n\nclass Sidebar extends Component {\n    state = {\n        sidenavOptions: {\n            edge: 'left',\n            inDuration: 250,\n        },\n        collapsibleOptions: {\n            accordion: false,\n        },\n        screenWidth: 0,\n    }\n\n    componentDidMount = () => {\n        const sidenavElems = document.querySelectorAll('.sidenav')\n        const collapsibleElems = document.querySelectorAll('.collapsible')\n        M.Sidenav.init(sidenavElems, this.state.sidenavOptions)\n        M.Collapsible.init(collapsibleElems, this.state.collapsibleOptions)\n\n        this.setState({ screenWidth: window.innerWidth })\n        window.addEventListener('resize', this.updateWindowDimensions)\n    }\n\n    componentDidUpdate = () => {\n        const sidenavElems = document.querySelectorAll('.sidenav')\n        M.Sidenav.init(sidenavElems, this.state.sidenavOptions)\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.updateWindowDimensions)\n    }\n\n    updateWindowDimensions = () => {\n        this.setState({ screenWidth: window.innerWidth })\n    }\n\n    renderFilters = showResultTotal => {\n        let { menu, t, total } = this.props\n        if (menu === 'search') {\n            return (\n                <React.Fragment>\n                    <li>\n                        <div className=\"user-view\">\n                            <div className=\"sidenav-title\">\n                                <p className=\"sidebar-filter-text\">\n                                    {`${t('sidebar.results-filter')} `}\n                                    <i className=\"fal fa-filter\" />\n                                </p>\n                            </div>\n                            {showResultTotal ? (\n                                <div>{`Currently showing ${total} results`}</div>\n                            ) : null}\n                        </div>\n                    </li>\n                    <SidebarFilters />\n                </React.Fragment>\n            )\n        }\n        return (\n            <React.Fragment>\n                <li>\n                    <div className=\"user-view\">\n                        <div className=\"sidenav-title\">\n                            <p className=\"sidebar-text\">\n                                <i className=\"fad fa-book-open fa-2x\" />\n                                To begin, use the search bar above or browse our\n                                listings\n                            </p>\n                        </div>\n                        {showResultTotal ? (\n                            <div>{`Currently showing ${total} results`}</div>\n                        ) : null}\n                    </div>\n                </li>\n                <SidebarBrowse />\n            </React.Fragment>\n        )\n    }\n\n    render() {\n        let { filters, filterArray, results, menu } = this.props\n        if (Object.entries(filters) === 0) {\n            return null\n        }\n\n        let showResultTotal\n        let activeSidenav = ''\n        let sidenavLink = null\n        let sidenavLinkText = 'Choose Browse'\n        let sidenavClose = null\n        let filterBtn = ''\n\n        if (menu === 'search') {\n            sidenavLinkText = 'Filter Results'\n            if (results.length === 0) {\n                filterBtn = 'disabled'\n            }\n        }\n\n        if (this.state.screenWidth < smallScreenWidth) {\n            activeSidenav = 'sidenav'\n            sidenavLink = (\n                <a\n                    className={`${filterBtn} btn dropdown-btn left sidenav-trigger show-on-large valign-wrapper`}\n                    data-target=\"filter-slide-out\"\n                    href=\"#!\"\n                >\n                    <i className=\"fal fa-arrow-right\" /> {sidenavLinkText}\n                </a>\n            )\n            sidenavClose = (\n                <li>\n                    <a className=\"sidenav-close\" href=\"#!\">\n                        <i className=\"fal fa-times\" />\n                    </a>\n                </li>\n            )\n            showResultTotal = true\n        }\n\n        return (\n            <React.Fragment>\n                {sidenavLink}\n                <ul\n                    id=\"filter-slide-out\"\n                    className={`${activeSidenav} collapsible`}\n                >\n                    {sidenavClose}\n\n                    {this.renderFilters(showResultTotal)}\n                </ul>\n            </React.Fragment>\n        )\n    }\n}\n\nfunction getMenu(menu, browse) {\n    if (menu === 'search') {\n        return 'search'\n    }\n    return browse\n}\n\nconst mapStateToProps = state => ({\n    filters: state.ES.search.aggregations,\n    menu: getMenu(state.selectedMenu, state.selectedBrowse),\n    results: state.ES.search.items.hits.hits,\n    currentSearchTerm: state.currentSearchTerm,\n    filterArray: state.filterArray,\n    total: getTotal(state.selectedBrowse, state.selectedMenu, state),\n})\n\n//{ fetchResultsAction, addTermToFilter, preFetch,}\nconst withN = new withNamespaces()(Sidebar)\nexport default connect(mapStateToProps)(withN)\n","import '../assets/sass/nlm/card.scss'\nimport React from 'react'\nimport { Link } from 'react-router-dom'\nimport { constants } from '../store/_constants'\nlet { searchTypeOptions, defaultColor } = constants\n\nfunction getType(type) {\n    let t = type === 'Topic' ? 'Subject' : type\n    if (Array.isArray(t)) {\n        if (t.includes('Work')) {\n            return 'Work'\n        } else {\n            return 'Unknown'\n        }\n    }\n    return t\n}\n\nfunction getColor(type) {\n    let t = searchTypeOptions.find(c => c.key === type.toLowerCase())\n    if (t) {\n        return t.color\n    }\n    return defaultColor\n}\n\nconst SearchCard = ({ data, idx, match, handleShowDetails }) => {\n    let type = getType(data._source.type)\n    let col = getColor(type)\n\n    let lang = match.params.lng\n    return (\n        <Link\n            to={{\n                pathname: `/${lang}/archives/doc/${data._id}`,\n                // this is the trick! check out RouteSwitch\n                state: { label: data._source._label, modalID: data._id },\n            }}\n            className=\"item-title card-item-link\"\n            onClick={() => handleShowDetails(data._id)}\n        >\n            <div key={idx} className=\"card grey lighten-3 \">\n                <div className=\"card-content blue-grey-text darken-4\">\n                    <p className=\"meta-items\">\n                        <span className={`card-type ${col} meta-item`}>\n                            {type}\n                        </span>{' '}\n                        <span className=\"meta-item result-id\">{data._id}</span>\n                    </p>\n                    <p className=\"result-label\">{data._source._label}</p>\n                </div>\n            </div>\n        </Link>\n    )\n}\nexport default SearchCard\n","import '../assets/sass/nlm/card.scss'\nimport React from 'react'\nimport SearchCard from './SearchCard'\nimport { useSelector, useDispatch } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\nimport { fetchIDAction } from '../store/actions'\n\nfunction useData(browse, menu) {\n    return useSelector(state => {\n        if (menu === 'search') {\n            return state.ES.search\n        }\n        return state.ES[browse]\n    })\n}\n\nconst SearchResults = ({ match, t }) => {\n    const dispatch = useDispatch()\n\n    const handleShowDetails = doc_id => {\n        //dispatch(fetchIDAction(doc_id))\n    }\n\n    const selectedMenu = useSelector(state => state.selectedMenu)\n    let selectedBrowse = useSelector(state => state.selectedBrowse)\n    let data = useData(selectedBrowse, selectedMenu)\n    let d = data.items.hits.hits\n\n    if (d.length === 0) {\n        if (data.isFetching) {\n            return (\n                <div key=\"fetching\" className=\"card grey lighten-3 hoverable\">\n                    <div className=\"card-content blue-grey-text darken-4\">\n                        <div className=\"blinky\">\n                            {t('technical.loading-simple')}{' '}\n                            {t(`browse.${selectedMenu}-plural`)}\n                        </div>\n                    </div>\n                </div>\n            )\n        } else if (!data.isFetching) {\n            return (\n                <div key=\"no-results\" className=\"card grey lighten-3 hoverable\">\n                    <div className=\"card-content blue-grey-text darken-4\">\n                        NO RESULTS\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    const items = d.map((d, i) => {\n        return (\n            <SearchCard\n                key={i}\n                data={d}\n                idx={i}\n                handleShowDetails={handleShowDetails}\n                match={match}\n            />\n        )\n    })\n\n    return <React.Fragment>{items}</React.Fragment>\n}\n\nconst withN = new withNamespaces()(SearchResults)\nexport default withN\n","import React from 'react'\n\nconst MenuOption = ({ option, handleClick, current }) => {\n    let c = current === option.key ? 'active' : ''\n    return (\n        <li\n            key={option.key}\n            className=\"tab col s3\" //\"col-4 col-12-small\"\n            style={{ display: 'inline-block' }}\n        >\n            <a\n                //disabled={disabled}\n                className={c}\n                onClick={() => handleClick(option)}\n                href={`#${option.key}`}\n            >\n                {option.label}\n            </a>\n        </li>\n    )\n}\nexport default MenuOption\n","import '../assets/sass/nlm/search.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\nimport { setMenu } from '../store/actions'\nimport { getTotal } from '../store/selectors'\nimport { constants } from '../store/_constants'\nimport M from 'materialize-css'\nimport MenuOption from './MenuOption'\n\nlet { menuItems } = constants\n\nclass SearchMenu extends Component {\n    componentDidMount() {\n        //let tabs = document.querySelectorAll('.tabs')\n        M.Tabs.init(this.Tabs, { duration: 400 }) //this.Tabs\n    }\n\n    handleClick = menuItem => {\n        this.props.setMenu(menuItem.key)\n    }\n\n    render() {\n        return (\n            <ul\n                ref={Tabs => {\n                    this.Tabs = Tabs\n                }}\n                className=\"tabs\"\n            >\n                {menuItems.map(m => {\n                    return (\n                        <MenuOption\n                            key={m.key}\n                            option={m}\n                            handleClick={this.handleClick}\n                            current={this.props.menu}\n                        />\n                    )\n                })}\n            </ul>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    total: getTotal(state.selectedBrowse, state.selectedMenu, state),\n    menu: state.selectedMenu,\n    currentSearch: state.ES.search.currentSearch,\n})\n\nconst withN = new withNamespaces()(SearchMenu)\nexport default connect(mapStateToProps, { setMenu })(withN)\n","import React from 'react'\nimport Sidebar from './Sidebar'\nimport SearchResults from './SearchResults'\nimport SearchMenu from './SearchMenu'\n\nexport default ({ match, history }) => {\n    return (\n        <React.Fragment>\n            <div className=\"row flex no-margin\">\n                <div className=\"col m4 l3 col-white no-padding\"></div>\n                <div className=\"col s12 m8 l9 no-padding\">\n                    <SearchMenu />\n                </div>\n            </div>\n            <div className=\"row flex no-margin\">\n                <div className=\"col m4 l3 side-nav\">\n                    <div className=\"pad-it\">\n                        <div className=\"sidenav-sections\">\n                            <Sidebar />\n                        </div>\n                    </div>\n                </div>\n                <div className=\"col s12 m8 l9 search-section\">\n                    <SearchResults match={match} history={history} />\n                </div>\n            </div>\n        </React.Fragment>\n    )\n}\n","import '../assets/sass/nlm/stats.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { withNamespaces } from 'react-i18next'\nimport img from '../assets/images/UB-woodblock-closeup.jpg'\n\nclass Stats extends Component {\n    handleClick = () => {\n        this.props.dispatch({ type: 'SET_PAGE', page: 'archives' })\n    }\n    render() {\n        let statList\n        const { stats, t, match, selectedPage } = this.props\n        let lang = match.params.lng\n        if (selectedPage !== 'home') {\n            return null\n        }\n        if (\n            Object.entries(stats).length === 0 &&\n            stats.constructor === Object\n        ) {\n            statList = <div className=\"blinky\">{t('technical.loading')}</div>\n        } else {\n            statList = (\n                <ul className=\"list-stats\">\n                    <li className=\"stat-item\">\n                        <p>\n                            {t('stats.LastUpdate')}: <em>{stats.LastUpdate}</em>\n                        </p>\n                    </li>\n                    <li className=\"stat-item\">\n                        <p>\n                            {t('stats.PagesDigitized')}:{' '}\n                            <em>{stats.PagesDigitized}</em>\n                        </p>\n                    </li>\n                    <li className=\"stat-item\">\n                        <p>\n                            {t('stats.VolumesDigitized')}:{' '}\n                            <em>{stats.VolumesDigitized}</em>\n                        </p>\n                    </li>\n                    <li className=\"stat-item\">\n                        <p>\n                            {t('stats.VolumesCataloged')}:{' '}\n                            <em>{stats['VolumesCataloged(normalized)']}</em>\n                        </p>\n                    </li>\n                    <li className=\"stat-item\">\n                        <p>\n                            {t('stats.TitlesCataloged')}:{' '}\n                            <em>{stats['TitlesCataloged(ACIP)']}</em>\n                        </p>\n                    </li>\n                </ul>\n            )\n        }\n\n        return (\n            <div className=\"row flex no-margin stats-row\">\n                <div className=\"col s12 m6\">\n                    <h2>{t('stats.Title')}</h2>\n                    {statList}\n                </div>\n                <div className=\"col s12 m6 valign-wrapper\">\n                    <span className=\"image down-push-s\">\n                        <Link\n                            to={{ pathname: `/${lang}/archives` }}\n                            className=\"item-link\"\n                            onClick={this.handleClick}\n                        >\n                            <img className=\"img-link\" src={img} alt=\"\" />\n                            <div className=\"content\">\n                                Search the archives\n                                {/* <div className=\"img-text\">HI</div> */}\n                            </div>\n                        </Link>\n                    </span>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    stats: state.GS.isFetching ? {} : state.GS.items,\n    selectedPage: state.selectedPage,\n})\n\nconst withN = new withNamespaces()(Stats)\nexport default connect(mapStateToProps)(withN)\n","export class UniqueLabelSet extends Set {\n    constructor(values) {\n        super(values)\n        const labels = []\n\n        for (let item of this) {\n            if (labels.some(e => e.label === item.label)) {\n                this.delete(item)\n            } else {\n                labels.push(item)\n            }\n        }\n    }\n}\n\nexport function uniqueFilters(filters, isActive, isFilterTerm) {\n    const filterArray = []\n    for (let item of filters) {\n        if (filterArray.some(e => e.label === item.label)) {\n            filters.filter(f => f.label !== item.label)\n        } else if (!isActive && isFilterTerm === item.label) {\n            filters.filter(f => f.label !== item.label)\n        } else {\n            filterArray.push(item)\n        }\n    }\n\n    return filterArray\n}\nexport const log = (...msgs) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.log(...msgs)\n    }\n}\n\nexport function getRandomInt(min, max) {\n    min = Math.ceil(min)\n    max = Math.floor(max)\n    return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\n// return a unique map\nexport const uniqBy = (a, key) => {\n    return [...new Map(a.map(x => [key(x), x])).values()]\n}\n\n// using hash tables and filter\nexport const uniq = a => {\n    var prims = { boolean: {}, number: {}, string: {} },\n        objs = []\n\n    return a.filter(function(item) {\n        var type = typeof item\n        if (type in prims)\n            return prims[type].hasOwnProperty(item)\n                ? false\n                : (prims[type][item] = true)\n        else return objs.indexOf(item) >= 0 ? false : objs.push(item)\n    })\n}\n\n// ES6 sort\nexport const sortNestedES6 = (nestedItem, prop, arr) => {\n    return arr.sort((a, b) => {\n        return a[nestedItem][prop].localeCompare(b[nestedItem][prop])\n    })\n}\n\n// arr is the array of objects, prop is the property to sort by\nexport const sortNested = (nestedObj, prop, arr) => {\n    return arr.sort((a, b) => {\n        if (a[nestedObj][prop] < b[nestedObj][prop]) {\n            return -1\n        } else if (a[nestedObj][prop] > b[nestedObj][prop]) {\n            return 1\n        } else {\n            return 0\n        }\n    })\n}\n","import '../assets/sass/nlm/posts.scss'\nimport logo from '../assets/images/logo_all.png'\nimport nlm_logo from '../assets/images/nlm_logo_transparent.png'\nimport React from 'react'\nimport { connect } from 'react-redux'\nimport { sortNested } from '../tools/utilities'\n\nconst Posts = ({ posts, selectedPage }) => {\n    if (!posts || selectedPage !== 'home') {\n        return null\n    }\n\n    //const c = sortNested('acf', 'order', posts)\n\n    return posts.map((post, i) => {\n        //strange method to make alternating styles\n        let j = i % 2 === 0 ? 1 : 3\n\n        let mediaURL = ''\n        if (post._embedded['wp:featuredmedia']) {\n            mediaURL = post._embedded['wp:featuredmedia'][0].source_url || ''\n        }\n\n        if (parseInt(post.acf.columns) === 2) {\n            return (\n                <div key={i} className=\"row\">\n                    <div className=\"col s12 posts-col\">\n                        <h2>{post.acf.title}</h2>\n\n                        <div className=\"row flex\">\n                            <div className=\"col s12 m6\">\n                                <span className=\"image left\">\n                                    <img src={mediaURL} alt=\"\" />\n                                </span>\n                            </div>\n                            <div className=\"col s12 m6\">\n                                <p\n                                    className=\"down-push\"\n                                    dangerouslySetInnerHTML={{\n                                        __html: post.content.rendered,\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"divider-with-logo\">\n                            <div className=\"hr-line-left\"></div>\n                            <img src={nlm_logo} width=\"24px\" alt=\"logo\" />\n                            <div className=\"hr-line-right\"></div>\n                        </div>\n                    </div>\n                </div>\n            )\n        } else {\n            return (\n                <div key={i} className=\"row\">\n                    <div className=\"col s12 posts-col\">\n                        <h2>{post.acf.title}</h2>\n                        <span className=\"image\">\n                            <img src={mediaURL} alt=\"\" />\n                        </span>\n                        <p\n                            dangerouslySetInnerHTML={{\n                                __html: post.content.rendered,\n                            }}\n                        />\n                        <div className=\"divider-with-logo\">\n                            <div className=\"hr-line-left\"></div>\n                            <img src={nlm_logo} width=\"24px\" alt=\"logo\" />\n                            <div className=\"hr-line-right\"></div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    })\n}\n\nconst mapStateToProps = state => ({\n    fetchingPosts: state.WP.posts.isFetching,\n    selectedLanguage: state.selectedLanguage,\n    selectedPage: state.selectedPage,\n    posts: state.WP.posts.isFetching\n        ? []\n        : sortNested(\n              'acf',\n              'order',\n              state.WP.posts.items[state.selectedLanguage]\n          ),\n})\n\nexport default connect(mapStateToProps)(Posts)\n","import '../assets/sass/nlm/page.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\nimport { setLanguage } from '../store/actions'\nimport { constants } from '../store/_constants'\nimport nlm_logo from '../assets/images/nlm_logo_transparent.png'\nlet { defaultLanguage } = constants\n\nclass Page extends Component {\n    constructor(props) {\n        super(props)\n\n        this.setNumber = {\n            0: 'one',\n            1: 'one',\n            2: 'two',\n            3: 'three',\n            4: 'four',\n        }\n\n        this.rgbLight = [239, 239, 239]\n        this.rgbDark = [0, 0, 0]\n    }\n\n    renderContent = page => {\n        //console.log('render content of page', page)\n        if (parseInt(page.acf.columns) === 2) {\n            return (\n                <div key={page.slug} className=\"row\">\n                    <div className=\"col s12 posts-col\">\n                        <h2>{page.acf.title}</h2>\n\n                        <div className=\"row flex\">\n                            <div className=\"col s12 m6\">\n                                {/* <span className=\"image left\">\n                                    <img src={mediaURL} alt=\"\" />\n                                </span> */}\n                            </div>\n                            <div className=\"col s12 m6\">\n                                <p\n                                    className=\"down-push\"\n                                    dangerouslySetInnerHTML={{\n                                        __html: page.content.rendered,\n                                    }}\n                                />\n                            </div>\n                        </div>\n                        <div className=\"divider-with-logo\">\n                            <div className=\"hr-line-left\"></div>\n                            <img src={nlm_logo} width=\"24px\" alt=\"logo\" />\n                            <div className=\"hr-line-right\"></div>\n                        </div>\n                    </div>\n                </div>\n            )\n        } else {\n            return (\n                <div className=\"container\">\n                    <div key={page.slug} className=\"row\">\n                        <div className=\"col s12 posts-col\">\n                            <h2>{page.title.rendered}</h2>\n                            <p\n                                dangerouslySetInnerHTML={{\n                                    __html: page.content.rendered,\n                                }}\n                            />\n                            <div className=\"divider-with-logo\">\n                                <div className=\"hr-line-left\"></div>\n                                <img src={nlm_logo} width=\"24px\" alt=\"logo\" />\n                                <div className=\"hr-line-right\"></div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            )\n        }\n    }\n\n    resetPage = () => {\n        this.props.dispatch({ type: 'SET_PAGE', page: 'home' })\n        this.props.i18n.changeLanguage(defaultLanguage) // change locale\n        this.props.dispatch(setLanguage(defaultLanguage)) // set redux language\n    }\n\n    renderPage(selectedPage, pages) {\n        if (!pages.some(e => e.slug.split('-')[0] === selectedPage)) {\n            console.log('page not there')\n            this.resetPage()\n        }\n\n        return pages\n            .filter(page => page.slug.split('-')[0] === selectedPage)\n            .map((page, i) => {\n                let mediaURL = null\n                if (page._embedded['wp:featuredmedia']) {\n                    mediaURL = page._embedded['wp:featuredmedia'][0].source_url\n                }\n\n                return (\n                    <React.Fragment key={page.id}>\n                        <section\n                            id=\"banner\"\n                            style={{\n                                backgroundImage: `linear-gradient(to bottom, rgba(245, 246, 252, 0.52), rgba(117, 19, 93, 0.73)), url(${mediaURL})`,\n                                backgroundSize: 'cover',\n                            }}\n                        >\n                            <header className=\"major\">\n                                <h1>{page.acf.title}</h1>\n                                <div className=\"divider\" />\n                                <h3>{page.acf.subtitle}</h3>\n                            </header>\n                        </section>\n                        {selectedPage !== 'home'\n                            ? this.renderContent(page)\n                            : null}\n                    </React.Fragment>\n                )\n            })\n    }\n\n    render() {\n        if (this.props.fetchingWP) {\n            return (\n                <div className=\"blinky\">\n                    {this.props.t('technical.loading')}\n                </div>\n            )\n        }\n        if (this.props.selectedPage === 'archives') {\n            return null\n        }\n        return (\n            // <div className=\"container\">\n            <React.Fragment>\n                {this.renderPage(this.props.selectedPage, this.props.pages)}\n            </React.Fragment>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    fetchingWP: state.WP.pages.isFetching || state.WP.posts.isFetching,\n    selectedLanguage: state.selectedLanguage || defaultLanguage,\n    selectedPage: state.WP.pages.isFetching\n        ? []\n        : state.WP.pages.items[state.selectedLanguage].some(\n              page => page.slug.split('-')[0] === state.selectedPage\n          )\n        ? state.selectedPage\n        : 'home',\n    pages: state.WP.pages.isFetching\n        ? []\n        : state.WP.pages.items[state.selectedLanguage],\n})\n\nconst withN = new withNamespaces()(Page)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { Link } from 'react-router-dom'\n//import { useDispatch } from 'react-redux'\n//import { fetchIDAction } from '../store/actions'\n\nexport const SectionLink = ({ section, label }) => {\n    //const dispatch = useDispatch()\n    // check for array, if not return null\n    if (\n        typeof section === 'object' &&\n        section !== null &&\n        !Array.isArray(section)\n    ) {\n        section = [section]\n    }\n    if (Array.isArray(section)) {\n        return section.map(t => {\n            // straight from BDRC, @language / @value\n            if ('@value' in t) {\n                return (\n                    <div key={`${t['@language']}_${t['@value']}`}>\n                        {t['@value']}\n                    </div>\n                )\n                // created during python processing, _id / _value\n            } else if ('_value' in t) {\n                return (\n                    <div key={t._id}>\n                        <span className=\"span-title\">{label}</span>\n                        <span>\n                            <Link\n                                to={{\n                                    pathname: `/en/archives/doc/bdr:${t._id}`, //${lang}\n                                    // this is the trick!\n                                    state: { label: t._value, modalID: t._id },\n                                }}\n                                className=\"span-title card-item-link\"\n                                // onClick={() =>\n                                //     dispatch(fetchIDAction(`bdr:${t._id}`))\n                                // }\n                            >\n                                {t._value}\n                            </Link>\n                        </span>\n                    </div>\n                )\n            }\n        })\n    }\n    return null\n}\n","import React, { useEffect } from 'react'\nimport { Link } from 'react-router-dom'\nimport M from 'materialize-css'\nimport { constants } from '../store/_constants'\nlet { sectionLinks } = constants\n\nfunction convertSection(section) {\n    return section.map(r => {\n        let u = r._id.substring(0, 3) === 'bdr' ? r._id.substring(4) : r._id\n        return { _id: u, _value: r._source._label }\n    })\n}\nexport const SectionLinks = ({ section, label, convert }) => {\n    let icon = sectionLinks.find(l => l.key === label.toLowerCase())\n\n    useEffect(() => {\n        let elems = document.querySelectorAll('.collapsible')\n        M.Collapsible.init(elems)\n    })\n    let newSection = null\n    if (convert) {\n        newSection = convertSection(section)\n        section = newSection\n    }\n\n    if (Array.isArray(section)) {\n        let items = section.map(t => {\n            // straight from BDRC, @language / @value\n            if ('@value' in t) {\n                return (\n                    <div key={`${t['@language']}_${t['@value']}`}>\n                        {t['@value']}\n                    </div>\n                )\n                // created during python processing, _id / _value\n            } else if ('_value' in t) {\n                return (\n                    <Link\n                        key={t._id}\n                        to={{\n                            pathname: `/en/archives/doc/bdr:${t._id}`, //${lang}\n                            // this is the trick!\n                            state: { label: t._value, modalID: t._id },\n                        }}\n                        className={`span-title card-item-link ${label}`}\n                    >\n                        <i className={icon.icon} />\n                        {t._value}\n                    </Link>\n                )\n            }\n        })\n        let l = items.length > 1 ? `${label}s` : label\n        return (\n            <React.Fragment>\n                <ul className=\"collapsible details-sections\">\n                    <li className={`active ${label}`}>\n                        <div className=\"collapsible-header\">\n                            {l}\n                            <i className=\"fal fa-chevron-double-down right fade-up\" />\n                        </div>\n                        <div className=\"collapsible-body\">{items}</div>\n                    </li>\n                </ul>\n            </React.Fragment>\n        )\n    }\n    return null\n}\n","import React from 'react'\nimport { SectionLinks } from '../../../components/SectionLinks'\nimport { constants } from '../../../store/_constants'\nlet { sectionLinks } = constants\n\nexport default (itemDetail, ...args) => {\n    const items = args.map(a => {\n        let node = sectionLinks.find(r => r.key === a)\n\n        return (\n            <SectionLinks key={a} label={a} section={itemDetail[node.node]} />\n        )\n    })\n\n    return <React.Fragment>{items}</React.Fragment>\n}\n","import React, { useState, useEffect } from 'react'\nimport { constants } from '../../../store/_constants'\nlet { IIIFsuffix } = constants\n\nexport default ({ t, _img, _manifestURL }) => {\n    const [showNotFound, setShowNotFound] = useState(false)\n\n    useEffect(() => {\n        let timer = setTimeout(() => setShowNotFound(true), 3000)\n        return () => clearTimeout(timer)\n    }, [])\n\n    //SCANS button on the img itself\n    let img = null\n    let manifest = _manifestURL\n        ? process.env.PUBLIC_URL + '/uv.html?manifest=' + _manifestURL\n        : null\n    if (_img === 'Not Found') {\n        img = <div>{t('details.image-not-found')}</div>\n    } else if (_img == null) {\n        img = showNotFound ? (\n            <div>{t('details.image-not-found')}</div>\n        ) : (\n            <div className=\"blinky\">{t('technical.loading-image')}</div>\n        )\n    } else {\n        if (manifest) {\n            img = (\n                <a\n                    className=\"image item-link\"\n                    href={manifest}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                >\n                    <img\n                        className=\"img-link\"\n                        src={`${_img}/${IIIFsuffix}`}\n                        width=\"100%\"\n                        alt=\"scan\"\n                    />\n                    <div className=\"content\">View Scans</div>\n                    <i className=\"reverse-content fal fa-eye\" />\n                </a>\n            )\n        } else {\n            img = <img src={`${_img}/${IIIFsuffix}`} width=\"100%\" alt=\"scan\" />\n        }\n    }\n    return img\n}\n// ;<span className=\"image down-push-s\">\n//     <Link\n//         to={{ pathname: `/${lang}/archives` }}\n//         className=\"item-link\"\n//         onClick={this.handleClick}\n//     >\n//         <img className=\"img-link\" src={img} alt=\"\" />\n//         <div className=\"content\">\n//             Search the archives\n//             {/* <div className=\"img-text\">HI</div> */}\n//         </div>\n//     </Link>\n// </span>\n","import React from 'react'\nimport { SectionLink } from '../../../components/SectionLink'\nimport buildExplore from '../sections/buildExplore'\nimport Img from '../sections/buildImg'\n\n/*\nBDRC, Work type\n\nAvailable params:\n\n- @id: \"bdr:W1NLM116\"\n\nCURRENTLY USED\n- workIsAbout\n- workGenre\n- workNumberOfVolumes\n- _label\n_firstImageURL: \"https://iiif.bdrc.io/bdr:V1NLM116_I1NLM116_001::I1NLM116_0010001.jpg\"\n- _notes\n- workBiblioNote: use for attribution\n- workCatalogInfo: or is it this?\n- workLangScript: \"bdr:BoDbuCan\", do I need to re-run script to process this node?\n- _creator: this is the author (or main 'creator')\n- _manifestURL: use for IIIF manifest\n- workExtentStatement: refers to folios?, like \"10 ff., 56 ff.\"\n- workDimensions: not sure what the units are, like \"33x9\"\n- workPublisherName\n- workPublisherLocation\n\nNOT USED\n- type: not being used, using code instead parsed from ID\n- skos:prefLabel: prefLabel is coded to _label\n- workTitle: using _label instead\n- workEvent: current codes 'E' not indexed, like \"bdr:EVE3FCA4EF15FC\"\n- workHasItem: points to the image resource json, like \"bdr:I1NLM116\"\n- _resources: contains a list of all related id's, denormalized so not using yet\n- _distance: between 0 and 4, was to distinguish between catalogued ids and related ids\n- _collection: between 1 and 4, versions of the processed files in ES\n\n*/\n\n// use 't' variable to translate the labels (Author, etc)\nexport function buildWorkType(itemDetail, itemRelated, t, notes) {\n    let {\n        //workIsAbout,\n        //workGenre,\n        workNumberOfVolumes,\n        workBiblioNote,\n        //workCatalogInfo,\n        workExtentStatement,\n        workLangScript,\n        workPublisherName,\n        //workPublisherLocation,\n        _manifestURL,\n        _firstImageURL,\n        //_creator,\n    } = itemDetail\n\n    let volumes = workNumberOfVolumes ? workNumberOfVolumes : null\n    let attribution = workBiblioNote ? (\n        <SectionLink label=\"biblio\" section={workBiblioNote} />\n    ) : null\n\n    //let img = buildImg(t, _firstImageURL, _manifestURL) // _firstImageURL ? buildImg(t, _firstImageURL, _manifestURL) : null\n\n    let pubName = workPublisherName ? (\n        <SectionLink label=\"publisher\" section={workPublisherName} />\n    ) : null\n\n    let explore = buildExplore(itemDetail, 'author', 'subject', 'genre')\n\n    return (\n        <React.Fragment>\n            {!attribution ? null : (\n                <div className=\"meta-detail attribution\">\n                    <div className=\"meta-item\">\n                        <span>{attribution}</span>\n                    </div>\n                </div>\n            )}\n            <Img t={t} _img={_firstImageURL} _manifestURL={_manifestURL} />\n            <div className=\"row flex no-margin\">\n                <div className=\"col s12 m8 bottom-items\">\n                    <ul className=\"meta-detail-list\">\n                        {!volumes ? null : (\n                            <li className=\"meta-item all-caps\">\n                                Number of Volumes: {volumes}\n                            </li>\n                        )}\n                        {!pubName ? null : (\n                            <li className=\"meta-item all-caps\">\n                                {t('details.meta-published-by')}:{' '}\n                                <span className=\"no-trans\">{pubName}</span>\n                            </li>\n                        )}\n                        {!workExtentStatement ? null : (\n                            <li className=\"meta-item all-caps\">\n                                {t('details.meta-work-extent')}:{' '}\n                                <span className=\"no-trans\">\n                                    {workExtentStatement}, in{' '}\n                                    {workNumberOfVolumes} volume(s)\n                                </span>\n                            </li>\n                        )}\n                        {!workLangScript ? null : (\n                            <li className=\"meta-item all-caps\">\n                                {t('details.meta-language')}:{' '}\n                                <span className=\"no-trans\">\n                                    {workLangScript}\n                                </span>\n                            </li>\n                        )}\n                    </ul>\n\n                    {notes}\n                </div>\n                {explore ? (\n                    <div className=\"col s12 m4 explore-items with-border\">\n                        <p className=\"title\">Explore further</p>\n                        {explore}\n                    </div>\n                ) : null}\n            </div>\n        </React.Fragment>\n    )\n}\n","import React from 'react'\nimport { SectionLinks } from '../../../components/SectionLinks'\nimport buildExplore from '../sections/buildExplore'\n/*\nBDRC, Person type\n\nAvailable params:\n\nCURRENTLY USED\n_notes: \n_label: \n\nADD NEXT\npersonGender: example, \"bdr:GenderMale\"\npersonTeacherOf: \npersonStudentOf: \n\nNOT USED\n- type: not being used, using code instead parsed from ID\n- skos:prefLabel: prefLabel is coded to _label\n- _resources: contains a list of all related id's, denormalized so not using yet\n- _distance: between 0 and 4, was to distinguish between catalogued ids and related ids\n- _collection: between 1 and 4, versions of the processed files in ES\n\n- personName: not indexed, code NM, example \"bdr:NM1E7B3C3CFB05\", \"bdr:NM94C57879237C\"\n- personEvent: not indexed, code EV, exmaple \"bdr:EV7FB66BAD52BD\"\n\n*/\n\n// use 't' variable to translate the labels (Author, etc)\nexport function buildPersonType(itemDetail, itemRelated, t, notes) {\n    const buildRelatedItems = () => {\n        return (\n            <SectionLinks\n                label={'work'}\n                section={itemRelated.hits.hits}\n                convert={true}\n            />\n        )\n    }\n\n    let works = itemRelated.hits.total > 0 ? buildRelatedItems() : null\n    let explore = buildExplore(itemDetail, 'teacher', 'student')\n\n    return (\n        // main section for person: works and notes\n        <div className=\"row flex no-margin\">\n            <div className=\"col s12 m8 bottom-items\">\n                {works}\n                {notes}\n            </div>\n\n            {/* explore section for person: teachers and students */}\n            {explore ? (\n                <div className=\"col s12 m4 explore-items with-border\">\n                    <p className=\"title\">Explore further</p>\n                    {explore}\n                </div>\n            ) : null}\n        </div>\n    )\n}\n","import React from 'react'\nimport { SectionLinks } from '../../../components/SectionLinks'\nimport buildExplore from '../sections/buildExplore'\n/*\nBDRC, Person type\n\nAvailable params:\n\nCURRENTLY USED\n_notes: \n_label: \n\nADD NEXT\npersonGender: example, \"bdr:GenderMale\"\npersonTeacherOf: \npersonStudentOf: \n\nNOT USED\n- type: not being used, using code instead parsed from ID\n- skos:prefLabel: prefLabel is coded to _label\n- _resources: contains a list of all related id's, denormalized so not using yet\n- _distance: between 0 and 4, was to distinguish between catalogued ids and related ids\n- _collection: between 1 and 4, versions of the processed files in ES\n\n- personName: not indexed, code NM, example \"bdr:NM1E7B3C3CFB05\", \"bdr:NM94C57879237C\"\n- personEvent: not indexed, code EV, exmaple \"bdr:EV7FB66BAD52BD\"\n\n*/\n\n// use 't' variable to translate the labels (Author, etc)\nexport function buildPlaceType(itemDetail, itemRelated, t, notes) {\n    const buildRelatedItems = () => {\n        return (\n            <SectionLinks\n                label={'work'}\n                section={itemRelated.hits.hits}\n                convert={true}\n            />\n        )\n    }\n\n    let works = itemRelated.hits.total > 0 ? buildRelatedItems() : null\n    let explore = buildExplore(itemDetail, 'teacher', 'student')\n\n    return (\n        // main section for person: works and notes\n        <div className=\"row flex no-margin\">\n            <div className=\"col s12 m8 bottom-items\">\n                {works}\n                {notes}\n            </div>\n\n            {/* explore section for person: teachers and students */}\n            {explore ? (\n                <div className=\"col s12 m4 explore-items with-border\">\n                    <p className=\"title\">Explore further</p>\n                    {explore}\n                </div>\n            ) : null}\n        </div>\n    )\n}\n","import React from 'react'\nimport { SectionLinks } from '../../../components/SectionLinks'\nimport buildExplore from '../sections/buildExplore'\n/*\nBDRC, Person type\n\nAvailable params:\n\nCURRENTLY USED\n_notes: \n_label: \n\nADD NEXT\npersonGender: example, \"bdr:GenderMale\"\npersonTeacherOf: \npersonStudentOf: \n\nNOT USED\n- type: not being used, using code instead parsed from ID\n- skos:prefLabel: prefLabel is coded to _label\n- _resources: contains a list of all related id's, denormalized so not using yet\n- _distance: between 0 and 4, was to distinguish between catalogued ids and related ids\n- _collection: between 1 and 4, versions of the processed files in ES\n\n- personName: not indexed, code NM, example \"bdr:NM1E7B3C3CFB05\", \"bdr:NM94C57879237C\"\n- personEvent: not indexed, code EV, exmaple \"bdr:EV7FB66BAD52BD\"\n\n*/\n\n// use 't' variable to translate the labels (Author, etc)\nexport function buildSubjectType(itemDetail, itemRelated, t, notes) {\n    const buildRelatedItems = () => {\n        return (\n            <SectionLinks\n                label={'work'}\n                section={itemRelated.hits.hits}\n                convert={true}\n            />\n        )\n    }\n\n    let works = itemRelated.hits.total > 0 ? buildRelatedItems() : null\n\n    return (\n        // main section for person: works and notes\n        <div className=\"row flex no-margin\">\n            <div className=\"col s12 m7 bottom-items\">{notes}</div>\n            {/* explore section for person: teachers and students */}\n            {works ? (\n                <div className=\"col s12 m5 explore-items with-border\">\n                    <p className=\"title\">Explore further</p>\n                    {works}\n                </div>\n            ) : null}\n        </div>\n    )\n}\n","// NOTES *********************************************\nexport const unpackNotes = (arr, notesArray = [], possibleIDs = []) => {\n    if (arr == null) {\n        return null\n    } else if (Array.isArray(arr)) {\n        arr.forEach(a => {\n            if (typeof a === 'object') {\n                return unpackNotes(a, notesArray, possibleIDs)\n            }\n        })\n    } else if (typeof arr === 'object') {\n        //if ('noteText' in arr) {\n        //log('note object', arr.noteText)\n        if ('@value' in arr) {\n            //log(arr.noteText['@value'].toLowerCase().includes('nlmid'), arr.noteText['@value'])\n            if (arr['@value'].toLowerCase().includes('nlmid')) {\n                //grabNLMID(arr.noteText['@value'])\n                possibleIDs.push(arr['@value'])\n            } else {\n                notesArray.push(arr['@value'])\n            }\n        }\n        //}\n    } else if (typeof arr === 'string') {\n        //log('notes string', arr)\n    }\n    //log('the notes array', notesArray)\n    let id = possibleIDs.find(a => a.toLowerCase().includes('nlmid'))\n    return { parsedNotes: notesArray.sort(), nlmIDs: id == null ? null : id }\n}\n","import React from 'react'\nimport { SectionLink } from '../../../components/SectionLink'\nimport { constants } from '../../../store/_constants'\n\nconst { bdrGender } = constants\n\nconst buildGender = (personGender, t) => {\n    // GENDER\n    let gender =\n        personGender == null\n            ? null\n            : `${t('gender.gender')}: ${t(\n                  `gender.gender-${bdrGender[personGender]}`\n              )}`\n    if (gender) {\n        return (\n            <div className=\"meta-detail\">\n                <p className=\"meta-item\">\n                    <span>{gender}</span>\n                </p>\n            </div>\n        )\n    }\n}\n\nconst buildParents = (father, mother, parent) => {\n    let parents = []\n\n    if (mother) {\n        parents.push(\n            <SectionLink key=\"mother\" label=\"Mother\" section={mother} />\n        )\n    }\n    if (father) {\n        parents.push(\n            <SectionLink key=\"father\" label=\"Father\" section={father} />\n        )\n    }\n    if (!mother && !father && parent) {\n        parents.push(<div>Parents</div>)\n        parent.map((p, i) => {\n            parents.push(\n                <SectionLink key={`parent_${i}`} label=\"Parent\" section={p} />\n            )\n        })\n    }\n    if (parents.length > 0) {\n        return <div className=\"meta-detail parents\">{parents}</div>\n    }\n}\n\nexport function buildPersonalDetails(itemDetail, t) {\n    let { personGender, hasFather, hasMother, hasParent } = itemDetail\n\n    let gender = buildGender(personGender, t)\n    let parents = buildParents(hasFather, hasMother, hasParent)\n\n    return (\n        <React.Fragment>\n            <div>{gender}</div>\n            <div>{parents}</div>\n        </React.Fragment>\n    )\n}\n","import '../assets/sass/nlm/modal.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchIDAction } from '../store/actions'\nimport {\n    buildWorkType,\n    buildPersonType,\n    buildSubjectType,\n    buildPlaceType,\n    buildMeta,\n    buildNotes,\n    buildPersonalDetails,\n} from '../tools/ui'\nimport { selectorDetailsItem } from '../store/selectors'\nimport { SectionLink } from './SectionLink'\nimport { withNamespaces } from 'react-i18next'\n\nclass Modal extends Component {\n    state = {}\n\n    handleBackButton = (initialRender, e) => {\n        e.preventDefault()\n        let { lang, id } = this.props.match.params\n        // let previousModalID = null\n\n        // if (this.props.previousLocation.state) {\n        //     previousModalID = this.props.previousLocation.state.modalID\n        // }\n\n        // if (!this.props.previousLocation.state) {\n        //     this.props.dispatch({ type: 'SET_MODAL', payload: false })\n        // }\n\n        // if (initialRender) {\n        //     this.props.history.push(`/${lang}/archives`)\n        // }\n\n        this.props.history.goBack()\n\n        e.stopPropagation()\n    }\n\n    render() {\n        let showHideClassName = this.props.show\n            ? 'modal display-block'\n            : 'modal display-none'\n\n        const { itemDetail, itemRelated, t, match } = this.props\n        if (!itemDetail) {\n            return null\n        }\n        const { _notes, workCatalogInfo, _label } = itemDetail\n        const id = match.params.id\n        let buildType\n        let topSection, catalog\n        let personal = null\n\n        if (id[4] === 'W') {\n            buildType = buildWorkType\n            catalog = workCatalogInfo ? (\n                <div className=\"meta-catalog\">\n                    <div className=\"modal-text\">\n                        <span className=\"meta-title\">\n                            <SectionLink\n                                label=\"catalog\"\n                                section={workCatalogInfo}\n                            />\n                        </span>\n                    </div>\n                </div>\n            ) : null\n\n            topSection = <React.Fragment>{catalog}</React.Fragment>\n        } else if (id[4] === 'P') {\n            buildType = buildPersonType\n            personal = buildPersonalDetails(itemDetail, t)\n        } else if (id[4] === 'T') {\n            buildType = buildSubjectType\n        } else if (id[4] === 'G') {\n            buildType = buildPlaceType\n        }\n\n        const { notes, nlmIDs } = buildNotes(_notes)\n\n        // META DETAILS, like type and IDs\n        const meta = buildMeta(t, id, nlmIDs)\n\n        // CLOSE BUTTON\n        const closeBtn = (\n            <button\n                className=\"modal-btn with-border\"\n                onClick={e =>\n                    this.handleBackButton(this.props.initialRender, e)\n                }\n            >\n                <i className=\"fa fa-2x fa-times\"></i>\n                <span>\n                    {this.props.initialRender\n                        ? t('technical.btn-view')\n                        : t('technical.btn-close')}\n                </span>\n            </button>\n        )\n        return (\n            <div className={showHideClassName}>\n                <section className=\"modal-main\">\n                    <div className=\"details-container\">\n                        <div className=\"details-abs-container\">\n                            <div\n                                className=\"back-btn\"\n                                onClick={e =>\n                                    this.handleBackButton(\n                                        this.props.initialRender,\n                                        e\n                                    )\n                                }\n                            >\n                                <i className=\"icon fal fa-long-arrow-left fa-2x\" />\n                            </div>\n                        </div>\n                        <div className=\"detail-data\">\n                            <div className=\"detail-top-section with-border\">\n                                {topSection}\n                                {meta}\n                                {personal}\n                            </div>\n\n                            <div className=\"modal-title\">{_label}</div>\n\n                            {buildType(itemDetail, itemRelated, t, notes)}\n\n                            {/* {notes} */}\n                            {closeBtn}\n                        </div>\n                    </div>\n                </section>\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    show: state.setModal,\n    itemDetail:\n        state.ES.id.items.hits.hits.length === 0\n            ? []\n            : selectorDetailsItem(state.ES.id.items.hits.hits[0]),\n    itemRelated: state.ES.id.related,\n})\n\nconst withN = withNamespaces()(Modal)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { unpackNotes } from '../../ontology'\nimport { uniq } from '../../utilities'\n\nexport function buildNotes(notes) {\n    let parsedNotes = null,\n        nlmIDs = null\n    if (notes) {\n        ;({ parsedNotes, nlmIDs } = unpackNotes(notes))\n    }\n\n    parsedNotes = !parsedNotes || !parsedNotes.length ? null : uniq(parsedNotes)\n\n    parsedNotes =\n        !parsedNotes || !parsedNotes.length ? null : (\n            <div className=\"meta-grouping\">\n                {parsedNotes.map((s, i) => (\n                    <React.Fragment key={i}>\n                        <p className=\"meta-item with-fa-note\">{s}</p>\n                    </React.Fragment>\n                ))}\n            </div>\n        )\n\n    return { notes: parsedNotes, nlmIDs: nlmIDs }\n}\n","import React from 'react'\nexport function buildMeta(t, id, nlmIDs) {\n    return (\n        <div className=\"meta-detail\">\n            <p className=\"meta-item\">\n                <span>\n                    {t('details.detail')} {id},{' '}\n                </span>\n                <span> {t(`bdrc-ontology-code.${id[4]}`)}</span>\n            </p>\n            {nlmIDs == null ? null : (\n                <p className=\"meta-item\">\n                    <span>NLM ID: {nlmIDs.substring(7).trim()}</span>\n                </p>\n            )}\n        </div>\n    )\n}\n","import '../assets/sass/nlm/search.scss'\nimport React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport SidebarFilterList from './SidebarFilterList'\nimport { withNamespaces } from 'react-i18next'\nimport { constants } from '../store/_constants'\n//import { getRandomInt } from '../tools/utilities'\nimport {\n    resetOffsets,\n    clearFilterArray,\n    addTermToHistory,\n    setCurrentSearchTerm,\n    fetchResultsAction,\n    fetchWorksAction,\n    fetchAuthorsAction,\n    fetchSubjectsAction,\n    setMenu,\n    setOffsets,\n} from '../store/actions'\nimport { getTotal } from '../store/selectors'\n\nlet { searchOptions } = constants\n\nclass SearchBar extends Component {\n    state = {\n        term: this.props.currentSearchTerm, //'', //searchTerms[getRandomInt(0, searchTerms.length - 1)],\n        offsetCurrent: 0,\n        offsetSize: searchOptions.resultSetSize,\n        initialLoad: true,\n    }\n\n    handleNext = () => {\n        let action = null\n        let args = null\n        let offset = this.props.offsets[this.props.menu]\n        const total = this.props.total\n\n        if (total > offset + searchOptions.resultSetSize) {\n            offset = offset + searchOptions.resultSetSize\n            if (this.props.menu === 'search') {\n                action = this.props.fetchResultsAction\n                args = { term: this.state.term, offset: offset }\n            } else if (this.props.menu === 'works') {\n                action = this.props.fetchWorksAction\n                args = { offset: offset }\n            } else if (this.props.menu === 'authors') {\n                action = this.props.fetchAuthorsAction\n                args = { offset: offset }\n            } else if (this.props.menu === 'subjects') {\n                action = this.props.fetchSubjectsAction\n                args = { offset: offset }\n            }\n            action(args)\n            this.props.setOffsets(this.props.menu, offset)\n        }\n    }\n\n    handlePrev = () => {\n        let action = null\n        let args = []\n\n        let offset = this.props.offsets[this.props.menu]\n\n        if (offset - searchOptions.resultSetSize >= 0) {\n            offset = offset - searchOptions.resultSetSize\n            if (this.props.menu === 'search') {\n                action = this.props.fetchResultsAction\n                args = { term: this.state.term, offset: offset }\n            } else if (this.props.menu === 'works') {\n                action = this.props.fetchWorksAction\n                args = { offset: offset }\n            } else if (this.props.menu === 'authors') {\n                action = this.props.fetchAuthorsAction\n                args = { offset: offset }\n            } else if (this.props.menu === 'subjects') {\n                action = this.props.fetchSubjectsAction\n                args = { offset: offset }\n            }\n            action(args)\n            this.props.setOffsets(this.props.menu, offset)\n        } else {\n            this.props.setOffsets(this.props.menu, 0)\n        }\n    }\n\n    handleChange = e => {\n        e.preventDefault()\n        this.setState({ term: e.target.value })\n    }\n\n    handleSearch = e => {\n        e.preventDefault()\n        //this.updateSearchDefinitionAndFetch()\n        const {\n            resetOffsets,\n            clearFilterArray,\n            addTermToHistory,\n            setCurrentSearchTerm,\n            setMenu,\n        } = this.props\n        setMenu('search')\n        resetOffsets()\n        //clearResults()\n        clearFilterArray()\n        setCurrentSearchTerm(this.state.term)\n        addTermToHistory(this.state.term)\n        this.props.fetchResultsAction({ term: this.state.term, offset: 0 })\n    }\n\n    setUpControls = () => {\n        const offset = this.props.offsets[this.props.menu]\n        const total = this.props.total\n        const properOffset =\n            offset + searchOptions.resultSetSize > total\n                ? total\n                : offset + searchOptions.resultSetSize\n\n        let disableNext =\n            total <= offset + searchOptions.resultSetSize ||\n            this.props.currentlyFetchingResults\n\n        let disablePrev =\n            total <= searchOptions.resultSetSize ||\n            offset <= 0 ||\n            this.props.currentlyFetchingResults\n\n        let paginationMsg =\n            total > 0\n                ? `Showing <span className=\"boldy\">${offset +\n                      1} to ${properOffset} </span> of ${total}`\n                : `&nbsp;`\n\n        return { disableNext, disablePrev, paginationMsg }\n    }\n\n    render() {\n        const { disableNext, disablePrev, paginationMsg } = this.setUpControls()\n        return (\n            <div className=\"search-form col\">\n                <div className=\"search-ctl\">\n                    <label htmlFor=\"search-input\">Search</label>\n                    <input\n                        id=\"search-input\"\n                        className=\"search-input\"\n                        autoFocus\n                        type=\"text\"\n                        value={this.state.term}\n                        onChange={e => this.handleChange(e)}\n                        onKeyDown={e =>\n                            e.key === 'Enter' ? this.handleSearch(e) : null\n                        }\n                    />\n                </div>\n                <SidebarFilterList />\n                <button\n                    className=\"waves-effect waves-light btn\"\n                    disabled={this.props.currentlyFetchingResults}\n                    onClick={e => this.handleSearch(e)}\n                >\n                    {this.props.currentlyFetchingResults\n                        ? 'Searching'\n                        : `Search`}\n                </button>\n                <div className=\"result-pagination\">\n                    <button\n                        className=\"waves-effect waves-light btn\"\n                        disabled={disablePrev}\n                        onClick={this.handlePrev}\n                    >\n                        PREV\n                    </button>\n\n                    <button\n                        className=\"waves-effect waves-light btn\"\n                        disabled={disableNext}\n                        onClick={this.handleNext}\n                    >\n                        NEXT\n                    </button>\n                </div>\n                <div\n                    className=\"result-pagination-msg\"\n                    dangerouslySetInnerHTML={{\n                        __html: paginationMsg,\n                    }}\n                />\n            </div>\n        )\n    }\n}\n\nfunction getStatus(browse, state) {\n    if (state.ES[browse].isFetching || state.ES.search.isFetching) {\n        return true\n    }\n    return false\n}\n\nfunction getMenu(menu, browse) {\n    if (menu === 'search') {\n        return 'search'\n    }\n    return browse\n}\n\nconst mapStateToProps = state => ({\n    offsets: state.offsets,\n    menu: getMenu(state.selectedMenu, state.selectedBrowse),\n    total: getTotal(state.selectedBrowse, state.selectedMenu, state),\n    currentlyFetchingResults: getStatus(state.selectedBrowse, state),\n    filterArray: state.filterArray,\n    currentSearchTerm: state.currentSearchTerm,\n})\n\nconst withN = new withNamespaces()(SearchBar)\nexport default connect(mapStateToProps, {\n    resetOffsets,\n    addTermToHistory,\n    setCurrentSearchTerm,\n    clearFilterArray,\n    fetchResultsAction,\n    fetchWorksAction,\n    fetchAuthorsAction,\n    fetchSubjectsAction,\n    setMenu,\n    setOffsets,\n})(withN)\n","import '../assets/sass/nlm/navbar.scss'\nimport React from 'react'\nimport SearchBar from './SearchBar'\n\nconst NavSub = () => {\n    //let e = document.getElementsByClassName('search-input')\n\n    return (\n        <React.Fragment>\n            <div className=\"row no-margin valign-wrapper nav-sub\">\n                <div className=\"col s2 m3 center-align\">\n                    <i className=\"fad fa-search search-form-icon\" />\n                </div>\n                <div className=\"col s10 m9\">\n                    <SearchBar />\n                </div>\n            </div>\n        </React.Fragment>\n    )\n}\nexport default NavSub\n","import React, { Component } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport Header from '../Header'\nimport Footer from '../Footer'\nimport SearchContainer from '../SearchContainer'\nimport Stats from '../Stats'\nimport Posts from '../Posts'\nimport Page from '../Page'\nimport Modal from '../Modal'\n\nimport { setPage, setLanguage, fetchIDAction } from '../../store/actions'\nimport { constants } from '../../store/_constants'\nimport SearchForm from '../SearchForm'\nlet { languages, defaultLanguage } = constants\n\nclass RouteSwitch extends Component {\n    previousLocation = this.props.location\n    l = Object.keys(languages)\n        .map(l => l)\n        .join('|')\n\n    componentDidMount() {\n        this.generalCheckAndUpdate()\n    }\n\n    componentDidUpdate(prevProps) {\n        let { location } = this.props\n\n        if (prevProps.history.action !== 'POP') {\n            this.previousLocation = location\n        }\n\n        this.generalCheckAndUpdate()\n    }\n\n    generalCheckAndUpdate() {\n        const { history, dispatch, t } = this.props\n        const url = history.location.pathname\n\n        // when component mounts, match params empty, so must call this from routes\n        //dispatch(setPage(match.params.page))\n\n        if (url.split('/')[2]) {\n            //console.log('there is a page!', url.split('/')[2])\n            dispatch(setPage(url.split('/')[2]))\n        } else {\n            dispatch(setPage('home'))\n        }\n\n        if (url.split('/')[1] in languages) {\n            //this.setLang(url.split('/')[1])\n            dispatch(setLanguage(url.split('/')[1]))\n        } else {\n            //this.setLang(defaultLanguage)\n            dispatch(setLanguage(defaultLanguage))\n            dispatch(setPage('home'))\n            history.push(defaultLanguage)\n        }\n    }\n\n    // setLang = lng => {\n    //     const { i18n, dispatch } = this.props\n    //     //i18n.changeLanguage(lng) // change locale !!! this leads to infinite loop\n    //     dispatch(setLanguage(lng)) // set redux language\n    // }\n\n    render() {\n        let initialRender = this.props.location === this.previousLocation\n\n        return (\n            <React.Fragment>\n                {/* <div className=\"wrapper\"> */}\n                {/* pass location prop to switch and it will ignore \n                router location to continue showing gallery in background */}\n\n                {/* Passing data to a component through a route\n                <Route path=\"/somepath\" render={() => <SomeComponent somedata={somedata} />} /> */}\n\n                {/* Anytime you have a match.params like :lng \n                You will have to match the param to your data */}\n\n                <Route path={`/:lng(${this.l})`} component={Header} />\n\n                <Switch>\n                    <Route\n                        exact\n                        path={`/:lng(${this.l})/archives/doc/:id`}\n                        render={({ match, history }) => {\n                            let label = this.props.location.state\n                                ? this.props.location.state.label\n                                : null\n\n                            this.props.dispatch(fetchIDAction(match.params.id))\n\n                            this.props.dispatch({\n                                type: 'SET_MODAL',\n                                payload: true,\n                            })\n\n                            return (\n                                <React.Fragment>\n                                    <Modal\n                                        show={true}\n                                        match={match}\n                                        history={history}\n                                        label={label}\n                                        modalID={match.params.id}\n                                        previousLocation={this.previousLocation}\n                                        initialRender={initialRender}\n                                    />\n                                </React.Fragment>\n                            )\n                        }}\n                    />\n\n                    <Route\n                        exact\n                        path={`/:lng(${this.l})/archives`}\n                        render={({ match, history }) => (\n                            <React.Fragment>\n                                <div className=\"main\">\n                                    <SearchForm />\n                                    <SearchContainer\n                                        match={match}\n                                        history={history}\n                                    />\n                                </div>\n                            </React.Fragment>\n                        )}\n                    />\n\n                    {/* if we add other pages, would be something like this... */}\n                    <Route\n                        path={`/:lng(${this.l})/:page`}\n                        render={({ history }) => <Page history={history} />}\n                    />\n\n                    <Route\n                        exact\n                        path={`/:lng(${this.l})`}\n                        render={({ history, match }) => {\n                            return (\n                                <React.Fragment>\n                                    <Page history={history} />\n                                    <Stats match={match} />\n                                    <div className=\"container\">\n                                        <Posts />\n                                    </div>\n                                </React.Fragment>\n                            )\n                        }}\n                    />\n\n                    <Route\n                        render={() => <Redirect selectedPage=\"home\" to=\"/en\" />}\n                    />\n                </Switch>\n\n                <Footer />\n                {/* </div> */}\n                {/* <Route\n                    exact\n                    path={`/:lng(${this.l})/archives/doc/:id`}\n                    render={({ match, history }) => {\n                        let label = this.props.location.state\n                            ? this.props.location.state.label\n                            : null\n\n                        if (initialRender) {\n                            this.props.dispatch(fetchIDAction(match.params.id))\n                            // this.props.dispatch({\n                            //     type: 'SET_MODAL',\n                            //     modalID: match.params.id,\n                            //     show: true,\n                            //     initialRender: true,\n                            // })\n                        }\n\n                        return (\n                            <Modal\n                                match={match}\n                                show={true}\n                                history={history}\n                                label={label}\n                                initialRender={initialRender}\n                            />\n                        )\n                    }}\n                /> */}\n            </React.Fragment>\n        )\n    }\n}\n\n// const mapStateToProps = state => ({\n//     _id: state.ES.id.items.hits.hits[0]\n//         ? state.ES.id.items.hits.hits[0]._id\n//         : null,\n// })\n\nconst withN = new withNamespaces()(RouteSwitch)\nexport default connect()(withN)\n","import { actions } from '../types'\nexport default (state = {}, action) => {\n    switch (action.type) {\n        case actions.REQUEST_PAGES:\n            return {\n                ...state,\n                pages: {\n                    ...state.pages,\n                    isFetching: true,\n                },\n            }\n        case actions.RECEIVE_PAGES:\n            return {\n                ...state,\n                pages: {\n                    ...state.pages,\n                    isFetching: false,\n                    items: action.payload,\n                    lastUpdated: Date.now(),\n                },\n            }\n        case actions.REQUEST_POSTS:\n            return {\n                ...state,\n                posts: {\n                    ...state.posts,\n                    isFetching: true,\n                },\n            }\n        case actions.RECEIVE_POSTS:\n            return {\n                ...state,\n                posts: {\n                    ...state.posts,\n                    isFetching: false,\n                    items: action.payload,\n                    lastUpdated: Date.now(),\n                },\n            }\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nexport default (state = { items: {} }, action) => {\n    switch (action.type) {\n        case actions.REQUEST_GS:\n            return {\n                ...state,\n                isFetching: true,\n            }\n        case actions.RECEIVE_GS:\n            return {\n                ...state,\n                isFetching: false,\n                items: action.payload,\n                lastUpdated: Date.now(),\n            }\n        default:\n            return state\n    }\n}\n","export const initialState = {\n    ES: {\n        works: {\n            isFetching: false,\n            items: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n            lastUpdated: null,\n        },\n        authors: {\n            isFetching: false,\n            items: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n            lastUpdated: null,\n        },\n        subjects: {\n            isFetching: false,\n            items: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n            lastUpdated: null,\n        },\n        // places: {\n        //     isFetching: false,\n        //     items: {\n        //         hits: {\n        //             total: 0,\n        //             hits: [],\n        //         },\n        //     },\n        //     lastUpdated: null,\n        // },\n        search: {\n            isFetching: false,\n            currentSearch: false,\n            items: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n            aggregations: {},\n            lastUpdated: null,\n        },\n        id: {\n            isFetching: false,\n            items: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n            related: {\n                hits: {\n                    total: {\n                        value: 0,\n                    },\n                    hits: [],\n                },\n            },\n        },\n    },\n    // detailsItem: {\n    //     isFetching: false,\n    //     item: {\n    //         hits: {\n    //             total: 0,\n    //             hits: [],\n    //         },\n    //     },\n    //     lastUpdated: null,\n    // },\n    menu: 'browse',\n    browse: 'works',\n    offsets: {\n        works: 0,\n        authors: 0,\n        subjects: 0,\n        search: 0,\n        places: 0,\n    },\n    filterArray: [],\n}\n","import { actions } from '../types'\nimport { initialState } from '../initialState'\n\nexport default (state = initialState.ES, action) => {\n    switch (action.type) {\n        /* REQUESTS */\n        case actions.REQUEST_RESULTS:\n            return {\n                ...state,\n                search: {\n                    ...state.search,\n                    isFetching: true,\n                    currentSearch: false,\n                },\n            }\n        case actions.REQUEST_ID:\n            return {\n                ...state,\n                id: {\n                    ...state.id,\n                    isFetching: true,\n                },\n            }\n        case actions.REQUEST_WORKS:\n            return {\n                ...state,\n                works: {\n                    ...state.works,\n                    isFetching: true,\n                },\n            }\n        case actions.REQUEST_AUTHORS:\n            return {\n                ...state,\n                authors: {\n                    ...state.authors,\n                    isFetching: true,\n                },\n            }\n        case actions.REQUEST_SUBJECTS:\n            return {\n                ...state,\n                subjects: {\n                    ...state.subjects,\n                    isFetching: true,\n                },\n            }\n        // case actions.REQUEST_PLACES:\n        //     return {\n        //         ...state,\n        //         places: {\n        //             ...state.places,\n        //             isFetching: true,\n        //         },\n        //     }\n        case actions.REQUEST_ALL:\n            return {\n                ...state,\n                works: {\n                    ...state.works,\n                    isFetching: true,\n                },\n                authors: {\n                    ...state.authors,\n                    isFetching: true,\n                },\n                subjects: {\n                    ...state.subjects,\n                    isFetching: true,\n                },\n                // places: {\n                //     ...state.places,\n                //     isFetching: true,\n                // },\n            }\n        /* RECEIVES */\n        case actions.RECEIVE_RESULTS:\n            return {\n                ...state,\n                search: {\n                    ...state.search,\n                    isFetching: false,\n                    currentSearch: true,\n                    error: false,\n                    errorStatus: null,\n                    items: {\n                        hits: action.payload.RESULTS,\n                    },\n                    aggregations: Object.keys(action.payload.AGGS)\n                        .sort()\n                        .reduce(\n                            (r, k) => ((r[k] = action.payload.AGGS[k]), r),\n                            {}\n                        ),\n                    lastUpdated: Date.now(),\n                },\n            }\n        case actions.RECEIVE_ALL:\n            //console.log(action.payload)\n            return {\n                ...state,\n                works: {\n                    ...state.works,\n                    isFetching: false,\n                    items: action.payload.WORKS,\n                    lastUpdated: Date.now(),\n                },\n                authors: {\n                    ...state.authors,\n                    isFetching: false,\n                    items: action.payload.AUTHORS,\n                    lastUpdated: Date.now(),\n                },\n                subjects: {\n                    ...state.subjects,\n                    isFetching: false,\n                    items: action.payload.SUBJECTS,\n                    lastUpdated: Date.now(),\n                },\n                // places: {\n                //     ...state.places,\n                //     isFetching: false,\n                //     items: action.payload.PLACES,\n                //     lastUpdated: Date.now(),\n                // },\n            }\n        case actions.RECEIVE_ID:\n            return {\n                ...state,\n                id: {\n                    ...state.id,\n                    isFetching: false,\n                    items: action.payload.ID,\n                    lastUpdated: Date.now(),\n                    related: action.payload.RELATED,\n                },\n            }\n        case actions.RECEIVE_WORKS:\n            return {\n                ...state,\n                works: {\n                    ...state.works,\n                    isFetching: false,\n                    items: action.payload,\n                    lastUpdated: Date.now(),\n                },\n            }\n        case actions.RECEIVE_AUTHORS:\n            return {\n                ...state,\n                authors: {\n                    ...state.authors,\n                    isFetching: false,\n                    items: action.payload,\n                    lastUpdated: Date.now(),\n                },\n            }\n        case actions.RECEIVE_SUBJECTS:\n            return {\n                ...state,\n                subjects: {\n                    ...state.subjects,\n                    isFetching: false,\n                    items: action.payload,\n                    lastUpdated: Date.now(),\n                },\n            }\n        // case actions.RECEIVE_PLACES:\n        //     return {\n        //         ...state,\n        //         places: {\n        //             ...state.places,\n        //             isFetching: false,\n        //             items: action.payload,\n        //             lastUpdated: Date.now(),\n        //         },\n        //     }\n        case actions.CLEAR_ID:\n            console.log('this is clear id')\n            return {\n                ...state,\n                id: initialState.ES.id,\n            }\n        default:\n            return state\n    }\n}\n","import { constants } from '../_constants'\nimport { actions } from '../types'\nlet { defaultLanguage, routerActions } = constants\n\n// should use defaultLanguage code here\nexport default (state = defaultLanguage, action) => {\n    switch (action.type) {\n        case actions.SET_LANG:\n            return action.language\n        case routerActions.LOCATION_CHANGE:\n            if (action.payload.location.pathname.split('/')[1].length === 0) {\n                return state\n            }\n            return action.payload.location.pathname.split('/')[1]\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\n\nexport default (state = 'home', action) => {\n    switch (action.type) {\n        case actions.SET_PAGE:\n            return action.page\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\n\nexport default (state = true, action) => {\n    switch (action.type) {\n        case actions.SET_COLLAPSE:\n            return action.collapse\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nimport { initialState } from '../initialState'\n\nexport default (state = initialState.menu, action) => {\n    switch (action.type) {\n        case actions.SET_MENU:\n            return action.menu\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nexport default (state = false, action) => {\n    switch (action.type) {\n        case actions.SET_COLLECTION:\n            return action.collection\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\n// SEARCH RESULTS\nexport default (state = '', action) => {\n    switch (action.type) {\n        case actions.SET_CURRENT_SEARCH_TERM:\n            return action.payload\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nimport { initialState } from '../initialState'\n\n// SEARCH RESULTS\nexport default (state = initialState.offsets, action) => {\n    switch (action.type) {\n        case actions.RESET_OFFSETS:\n            return initialState.offsets\n        case actions.SET_OFFSETS:\n            return {\n                ...state,\n                [action.offsetType]: action.offset,\n            }\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nexport default (state = false, action) => {\n    switch (action.type) {\n        case actions.SET_MODAL:\n            return action.payload\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\n// SEARCH RESULTS\nexport default (state = [], action) => {\n    switch (action.type) {\n        case actions.ADD_TERM_TO_HISTORY:\n            return Array.from(new Set([...state, action.term])).sort()\n        default:\n            return state\n    }\n}\n","//import { UniqueLabelSet } from '../../tools/utilities'\nimport { uniqueFilters } from '../../tools/utilities'\n\nimport { actions } from '../types'\n\n// SEARCH RESULTS\nexport default (state = [], action) => {\n    switch (action.type) {\n        case actions.ADD_TERM_TO_FILTER:\n            let { filter, isActive } = action.payload\n            return uniqueFilters([...state, filter], isActive, filter.label)\n        case actions.REMOVE_FILTER:\n            return [...state].filter(f => f.label !== action.payload)\n        //return Array.from(new UniqueLabelSet([...state, action.term])) //.sort()\n        case actions.CLEAR_FILTER_ARRAY:\n            return []\n        default:\n            return state\n    }\n}\n","import { actions } from '../types'\nimport { initialState } from '../initialState'\n\nexport default (state = initialState.browse, action) => {\n    switch (action.type) {\n        case actions.SET_BROWSE:\n            return action.payload\n        default:\n            return state\n    }\n}\n","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\n\nimport fetchWordpress from './fetchWordpress'\nimport fetchGoogleSheets from './fetchGoogleSheets'\nimport fetchElasticsearch from './fetchElasticsearch'\n//import detailsItem from './detailsItem'\nimport selectLanguage from './selectLanguage'\nimport selectPage from './selectPage'\nimport setCollapse from './setCollapse'\nimport setMenu from './setMenu'\nimport setCollection from './setCollection'\nimport setCurrentSearchTerm from './setCurrentSearchTerm'\nimport setOffsets from './setOffsets'\nimport setModal from './setModal'\nimport addTermToHistory from './addTermToHistory'\nimport addTermToFilter from './addTermToFilter'\nimport setBrowse from './setBrowse'\n\nexport default history =>\n    combineReducers({\n        router: connectRouter(history),\n        history: addTermToHistory,\n        filterArray: addTermToFilter,\n        selectedLanguage: selectLanguage,\n        selectedPage: selectPage,\n        selectedMenu: setMenu,\n        selectedBrowse: setBrowse,\n        setCollapse,\n        setCollection,\n        setModal,\n        offsets: setOffsets,\n        currentSearchTerm: setCurrentSearchTerm,\n        WP: fetchWordpress,\n        GS: fetchGoogleSheets,\n        ES: fetchElasticsearch,\n        //detailsItem,\n    })\n","import i18n from 'i18next'\nimport Backend from 'i18next-xhr-backend'\n//import LanguageDetector from 'i18next-browser-languagedetector'\nimport { detectorOptions } from './detector'\nimport { reactI18nextModule } from 'react-i18next'\nimport { constants } from '../_constants'\nlet { languages } = constants\n\n// NOTE THAT 'en' is attempting to be loaded because of LanguageDetector (probably)\n// and in our case we're loading 'English'\n// this is due to how I originally coded the component\n// refactor to use language codes :)\n\nconst debug = process.env.NODE_ENV === 'production' ? false : true\n\ni18n.use(Backend)\n    //.use(LanguageDetector)\n    .use(reactI18nextModule)\n\n    .init({\n        fallbackLng: 'en',\n        debug: debug,\n        preload: Object.keys(languages).map(l => l),\n\n        returnObjects: true,\n\n        detection: detectorOptions,\n\n        interpolation: {\n            escapeValue: false,\n        },\n\n        react: {\n            wait: true,\n        },\n    })\n\nexport default i18n\n","export const detectorOptions = {\n    // order and from where user language should be detected\n    // we're using path /en /mn\n    order: ['path', 'localStorage'],\n    lookupFromPathIndex: 0, //1st element on path\n    lookupLocalStorage: 'i18nextLng', // caching to localStorage\n\n    // cache user language on\n    caches: ['localStorage'],\n    excludeCacheFor: false,\n}\n","import {\n    fetchGSAction,\n    fetchWorksAction,\n    fetchAllAction,\n    fetchWPPostsAction,\n    fetchWPPagesAction,\n} from './actions'\n\nexport default function initialize(store) {\n    // Wordpress data\n    store.dispatch(fetchWPPagesAction('pages'))\n    store.dispatch(fetchWPPostsAction('posts'))\n\n    // Google sheet data from NLM cataloguing\n    store.dispatch(fetchGSAction())\n\n    // ES data\n    //store.dispatch(fetchWorksAction({ offset: 0 }))\n    store.dispatch(fetchAllAction())\n}\n","import 'materialize-css/dist/css/materialize.min.css' // add for full on materialize\n//import './assets/sass/main.scss'\nimport './assets/sass/_entrypoint.scss'\nimport './assets/sass/nlm/index.scss'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\nimport InitializeStore from './store/initialize'\nimport * as serviceWorker from './serviceWorker'\n\nimport RouteSwitch from './components/router/RouteSwitch'\nimport configureStore from './store/configureStore'\n\n// this is what gives the entire app access to t, i18n...\nimport './store/localization/i18n'\n\nconst store = configureStore()\n\nInitializeStore(store)\n\nconst App = () => {\n    document.body.classList.add('landing')\n    return (\n        <React.StrictMode>\n            <Provider store={store}>\n                <Router>\n                    <Route component={RouteSwitch} />\n                </Router>\n            </Provider>\n        </React.StrictMode>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import { applyMiddleware, compose, createStore } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport reducers from './reducers'\nimport { log } from '../tools/utilities'\n\nimport { createBrowserHistory } from 'history'\n\nexport default function configureStore(preloadedState) {\n    const history = createBrowserHistory()\n\n    const middlewares = [thunkMiddleware]\n\n    if (process.env.NODE_ENV === 'development') {\n        log('In Dev, will add logger middleware...')\n        const loggerMiddleware = createLogger()\n        middlewares.push(loggerMiddleware)\n    }\n\n    const middlewareEnhancer = applyMiddleware(...middlewares)\n\n    const enhancers = [middlewareEnhancer]\n    const composedEnhancers = compose(...enhancers)\n\n    const store = createStore(\n        reducers(history),\n        preloadedState,\n        composedEnhancers\n    )\n\n    return store\n}\n","module.exports = __webpack_public_path__ + \"static/media/nlm_logo_transparent.f3d5d89f.png\";"],"sourceRoot":""}