(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{210:function(e,t,a){e.exports=a(495)},250:function(e,t){},252:function(e,t){},284:function(e,t){},285:function(e,t){},351:function(e,t){},450:function(e,t,a){e.exports=a.p+"static/media/UB-woodblock-closeup.67ac4b0f.jpg"},451:function(e,t,a){e.exports=a.p+"static/media/calligraphy_icon.b45851d1.ico"},469:function(e,t,a){},471:function(e,t,a){},474:function(e,t,a){},476:function(e,t,a){e.exports=a.p+"static/media/endless-knot.4a457e37.png"},477:function(e,t,a){},481:function(e,t,a){},495:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(201),c=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(47),i=a(202),o=a(10),u=a(204),d=a(38),m=a(93),p=a(94),g="REQUEST_PAGES",h="RECEIVE_PAGES",f="REQUEST_POSTS",b="RECEIVE_POSTS",v="REQUEST_GS",E="RECEIVE_GS",y="DETAIL_MODAL",k="RECEIVE_MANIFEST",w="REQUEST_MANIFEST",N="NULLIFY_IIIF",_="RECEIVE_IIIF",O="REQUEST_IIIF",j="RECEIVE_DATA",A="REQUEST_DATA",L="REQUEST_ID",I="RECEIVE_ID",W="RECEIVE_AUTHORS",G="REQUEST_AUTHORS",D="RECEIVE_TOPICS",P="REQUEST_TOPICS",T="REQUEST_RESOURCES",x="RECEIVE_RESOURCES",F=a(27),C=a.n(F),S=a(42),K=["bdr:W22677","bdr:W14260","bdr:W1GS135531","bdr:W1GS135873","bdr:W1GS136667","bdr:W1KG10720","bdr:W1KG1132","bdr:W1KG1247","bdr:W1KG1248","bdr:W1KG1249","bdr:W1KG1250","bdr:W1KG1251","bdr:W1KG1252","bdr:W1KG1253","bdr:W1KG1254","bdr:W1KG1279","bdr:W1KG1280","bdr:W1KG1284","bdr:W1KG1286","bdr:W1KG1320","bdr:W1KG1321","bdr:W1KG14630","bdr:W1KG14641","bdr:W1KG14700","bdr:W1KG1558","bdr:W1KG1559","bdr:W1KG1573","bdr:W1KG1578","bdr:W1KG1607","bdr:W1KG1608","bdr:W1KG1609","bdr:W1KG1610","bdr:W1KG1616","bdr:W1KG1617","bdr:W1KG1623","bdr:W1KG1624","bdr:W1KG1625","bdr:W1KG1626","bdr:W1KG1627","bdr:W1KG1645","bdr:W1KG1646","bdr:W1KG1653","bdr:W1KG1655","bdr:W1KG1656","bdr:W1KG1657","bdr:W1KG1658","bdr:W1KG2144","bdr:W1KG26108","bdr:W1KG5182","bdr:W1KG5200","bdr:W22344","bdr:W22434","bdr:W22677","bdr:W8238"],U=a(205),R="157.230.172.69",M=!1,V="red",Q=new(a.n(U).a.Client)({host:{protocol:"http",host:R,port:9200,path:""},log:"info"});function z(){return(z=Object(S.a)(C.a.mark(function e(){var t;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ie("process.env.NODE_ENV ",R);case 1:if(M){e.next=22;break}ie("Connnnnecting....");case 3:if("red"!==V){e.next=20;break}return ie("awaiting green light"),e.prev=5,e.next=8,Q.cluster.health({});case 8:t=e.sent,ie("health: ",t),V=t.status,M=!0,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("Connection is failing...",e.t0),M=!1;case 18:e.next=3;break;case 20:e.next=1;break;case 22:return e.abrupt("return",M);case 23:case"end":return e.stop()}},e,this,[[5,14]])}))).apply(this,arguments)}var q=function(e){var t={aggregations:{uniqueAuthors:{terms:{field:"workCreator.keyword",size:e.length}}},query:{ids:{type:de.type,values:e}}};return Q.search({index:de.initialIndex,body:t})},H=function(e){var t={aggregations:{uniqueTopics:{terms:{field:"workIsAbout.keyword",size:e.length}}},query:{ids:{type:de.type,values:e}}};return Q.search({index:de.initialIndex,body:t})},B=a(206),Y=function(e,t,a){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null,c=[];"P"===a?(n="v1_bdrc_person",c=["personName","skos:prefLabel","_*"]):"T"===a?(n=["v1_bdrc_person","v1_bdrc_topic","v1_bdrc_work"],c=["personName","@id","note.noteText","skos:prefLabel","workCreator","workIsAbout","_*"]):"W"===a&&(n="v1_bdrc_work",s="skos:prefLabel.@value.keyword",c=["@id","note.noteText","skos:prefLabel","workCreator","workIsAbout","_*"]);var l={size:t,query:{ids:{type:de.type,values:e}}};return r||(l._source=c),null!==s&&(l.sort=[Object(B.a)({},s,{order:"asc"})]),ie("search by id body",l),Q.search({index:n,body:l})};function J(e){return{type:W,data:e,receivedAt:Date.now()}}function $(e){return{type:D,data:e,receivedAt:Date.now()}}var X=function(e,t){return function(a){ie("fetch resources",e,t),a({type:T});try{(function(e){ie("how many resources",e.length);var t=[me],a={size:e.length,query:{ids:{type:de.type,values:e}}};return ie("resource search body",a),Q.search({index:t,body:a})})(t).then(function(e){a({type:x,data:e.hits,receivedAt:Date.now()})})}catch(n){console.error("fetch resources error, ",n)}}};function Z(e){return function(t){ie("fetchSpecificID!",e),t({type:L});try{Y([e],1,e.charAt(4),!0).then(function(e){return t({type:I,data:a=e,imageAsset:a.hits.hits[0]._source.workHasItemImageAsset,volume:a.hits.hits[0]._source.workHasItem,receivedAt:Date.now()});var a})}catch(a){console.error("fetch ID error! ",a)}}}var ee=a(207),te=a.n(ee),ae="".concat("https://docs.google.com/spreadsheets/d/").concat("1hPqe-Y2TWwMTAxIEXYvc8du_GMFUJQNPvZbJou7veAY","/edit?usp=sharing");var ne=function(){var e=Object(S.a)(C.a.mark(function e(){return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e,t){te.a.init({key:ae,callback:function(a,n){e(a.Stats.elements),t(n)}})});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();var re="http://178.128.7.239/",se="wp-json/wp/v2/";var ce="http://178.128.7.239/",le="wp-json/wp/v2/";var ie=function(){},oe="en",ue={en:"English",mn:"Mongolian"},de={initialIndex:"v1_bdrc_work",type:"_doc",size:10},me=["v1_*"],pe="max",ge="0",he="default.jpg",fe="/".concat("full","/").concat(pe,"/").concat(ge,"/").concat(he),be=function(e){return{type:"SET_LANG",language:e}},ve=function(e){return{type:"SET_PAGE",page:e}};function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object.assign({},e,{isFetching:!0});case h:return Object.assign({},e,{isFetching:!1,items:t.pages,lastUpdated:t.receivedAt});case f:return Object.assign({},e,{isFetching:!0});case b:return Object.assign({},e,{isFetching:!1,items:t.posts,lastUpdated:t.receivedAt});case A:return Object.assign({},e,{isFetching:!0});case j:return Object.assign({},e,{isFetching:!1,items:t.data,lastUpdated:t.receivedAt});case T:return Object.assign({},e,{isFetching:!0});case x:case W:return Object.assign({},e,{isFetching:!1,items:t.data,lastUpdated:t.receivedAt});case G:return Object.assign({},e,{isFetching:!0});case D:return Object.assign({},e,{isFetching:!1,items:t.data,lastUpdated:t.receivedAt});case P:case v:return Object.assign({},e,{isFetching:!0});case E:return Object.assign({},e,{isFetching:!1,gs:t.gs,lastUpdated:t.receivedAt});case L:return Object.assign({},e,{isFetching:!0});case I:return Object.assign({},e,{isFetching:!1,item:t.data,imageAsset:t.imageAsset,volume:t.volume,lastUpdated:t.receivedAt});case w:return Object.assign({},e,{isFetching:!0});case k:return Object.assign({},e,{isFetching:!1,manifestURL:t.manifestURL,lastUpdated:t.receivedAt});case O:return Object.assign({},e,{isFetching:!0});case _:return Object.assign({},e,{isFetching:!1,firstImage:t.firstImage,lastUpdated:t.receivedAt});case N:return Object.assign({},e,{firstImage:null});case y:return Object.assign({},e,{modalID:t.modalID,image:t.image,show:t.show});default:return e}}function ye(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:case g:return Object.assign({},e,Ee(e,t));default:return e}}function ke(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:case A:return Object.assign({},e,Ee(e,t));default:return e}}function we(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:case T:return Object.assign({},e,Ee(e,t));default:return e}}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:case G:return Object.assign({},e,Ee(e,t));default:return e}}function _e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:case P:return Object.assign({},e,Ee(e,t));default:return e}}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:case L:return Object.assign({},e,Ee(e,t));default:return e}}function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:case v:return Object.assign({},e,Ee(e,t));default:return e}}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:case w:return Object.assign({},e,Ee(e,t));default:return e}}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:case N:case O:return Object.assign({},e,Ee(e,t));default:return e}}function Ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:case f:return Object.assign({},e,Ee(e,t));default:return e}}var We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_LANG":return t.language;case"@@router/LOCATION_CHANGE":return 0===t.payload.location.pathname.split("/")[1].length?e:t.payload.location.pathname.split("/")[1];default:return e}};function Ge(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modalID:0,image:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object.assign({},e,Ee(e,t));default:return e}}var De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_PAGE":return t.page;default:return e}},Pe=function(e){return Object(l.c)({router:Object(p.b)(e),selectedLanguage:We,selectedPage:De,pages:ye,posts:Ie,works:ke,authors:Ne,topics:_e,resources:we,gsData:je,detailData:Oe,manifestData:Ae,IIIFData:Le,detailModal:Ge})},Te=a(498),xe=a(499),Fe=a(500),Ce=a(497),Se=a(49),Ke=a(50),Ue=a(63),Re=a(51),Me=a(64),Ve=a(454),Qe=a(20),ze=(new Qe.b)(function(e){var t=e.active,a=e.children,n=e.dispatch,s=e.lang,c=e.i18n;return r.a.createElement("li",{key:a,onClick:function(){var e;n(be(s)),e=s,console.log("in language connector with",e),c.changeLanguage(e)},className:t?"lang-active":"lang",style:t?{color:"red"}:{color:"black"}},r.a.createElement("button",{key:a,disabled:!!t,className:"btn-lang"},a))}),qe=Object(o.c)(function(e,t){return{active:t.selectedLanguage===e.selectedLanguage,lang:t.selectedLanguage||oe}})(ze),He=a(496),Be=(new Qe.b)(function(e){var t;return t=Object.entries(e.t("languageCodes")).map(function(t){var a=Object(Ve.a)(t,2),n=a[0],s=a[1],c="home"===e.page?"":"/".concat(e.page);return r.a.createElement(He.a,{key:n,to:"/".concat(n).concat(c)},r.a.createElement(qe,{key:s,selectedLanguage:n},s))}),r.a.createElement("ul",{className:"language-list"},t)}),Ye=Object(o.c)(function(e){return{page:e.selectedPage}})(Be),Je=Object(o.c)(function(e,t){return{active:t.selectedPage===e.selectedPage}},function(e,t){return{onClick:function(){return e(ve(t.selectedPage))}}})(function(e){var t=e.active,a=e.children,n=e.onClick;return r.a.createElement("li",{key:a,onClick:t?null:n,className:t?"nav-active":"nav",style:t?{color:"red"}:{color:"black"}},r.a.createElement("button",{key:a,disabled:!!t,className:"btn-nav"},a))}),$e=(new Qe.b)(function(e){ie("creating navbar with props",e.navigation);var t=e.navigation.map(function(t){var a="home"===t.match?"":"/".concat(t.match);return r.a.createElement(He.a,{key:t.slug,to:"/".concat(e.lng).concat(a)},r.a.createElement(Je,{key:t.slug,selectedPage:t.match},e.t("pages")[t.match]))});return r.a.createElement("ul",{className:"nav-list"},t)}),Xe=Object(o.c)(function(e){return{navigation:(t=e.pages.items[e.selectedLanguage],t.map(function(e){return{match:e.slug.split("-")[0],title:"home"===e.slug.substring(0,4)?"Home":e.title.rendered,slug:e.slug,order:e.menu_order}})),lang:e.selectedLanguage,page:e.selectedPage};var t})($e),Ze=function(){return r.a.createElement("header",{id:"header"},r.a.createElement(Ye,null),r.a.createElement(Xe,null))},et=Object(Qe.b)()(function(e){return r.a.createElement("footer",{id:"footer"},r.a.createElement("div",{className:"icon"},r.a.createElement("img",{src:"http://".concat("178.128.7.239","/wp-content/uploads/2018/10/nlm-logo-no-text.png"),alt:"mongolia-logo"})),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement("a",{href:"mailto:info@asianclassics.org",target:"_blank",rel:"noopener noreferrer"},e.t("footer.contact"))),r.a.createElement("li",null,r.a.createElement("a",{href:"http://nationallibrary.mn/mn/",target:"_blank",rel:"noopener noreferrer"},e.t("footer.library-site"))),r.a.createElement("li",null,r.a.createElement("a",{href:"http://178.128.7.239/wp-login.php",target:"_blank",rel:"noopener noreferrer"},e.t("footer.login")))),r.a.createElement("p",{className:"copyright"},"\xa9 ","".concat("2018"," ").concat(e.t("title"),". ").concat(e.t("footer.rights"),".")))}),tt=(a(469),Object(o.c)(function(e){return{fetchingPosts:e.posts.isFetching,selectedLanguage:e.selectedLanguage,posts:e.posts.isFetching?[]:(t="acf",a="order",n=e.posts.items[e.selectedLanguage],n.sort(function(e,n){return e[t][a]<n[t][a]?-1:e[t][a]>n[t][a]?1:0}))};var t,a,n})(function(e){var t=e.posts;return t?t.map(function(e,t){var a=t%2===0?1:3,n="";return e._embedded["wp:featuredmedia"]&&(n=e._embedded["wp:featuredmedia"][0].source_url||""),2===parseInt(e.acf.columns)?(console.log("2 columns!"),r.a.createElement("section",{key:t,id:t,className:"wrapper special style".concat(a)},r.a.createElement("div",{className:"inner"},r.a.createElement("section",{className:"spotlights"},r.a.createElement("section",null,r.a.createElement("h2",null,e.acf.title),r.a.createElement("span",{className:"image"},r.a.createElement("img",{src:n,alt:""}))),r.a.createElement("section",null,r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content.rendered}})))))):r.a.createElement("section",{key:t,id:t,className:"wrapper special style".concat(a)},r.a.createElement("div",{className:"inner"},r.a.createElement("section",{className:"spotlights col1"},r.a.createElement("section",null,r.a.createElement("h2",null,e.acf.title),r.a.createElement("span",{className:"image"},r.a.createElement("img",{src:n,alt:""})),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content.rendered}})))))}):r.a.createElement("div",null)})),at=a(450),nt=a.n(at),rt=(a(471),function(e){var t=e.stats,a=e.t;return r.a.createElement("section",{className:"wrapper special style3"},r.a.createElement("div",{className:"inner"},r.a.createElement("section",{className:"spotlights"},r.a.createElement("section",null,r.a.createElement("h2",null,a("stats.Title")),r.a.createElement("ul",{className:"list-stats"},r.a.createElement("li",{className:"stat-item"},r.a.createElement("p",null,a("stats.LastUpdate"),": ",r.a.createElement("em",null,t.LastUpdate))),r.a.createElement("li",{className:"stat-item"},r.a.createElement("p",null,a("stats.PagesDigitized"),": ",r.a.createElement("em",null,t.PagesDigitized))),r.a.createElement("li",{className:"stat-item"},r.a.createElement("p",null,a("stats.VolumesDigitized"),": ",r.a.createElement("em",null,t.VolumesDigitized))),r.a.createElement("li",{className:"stat-item"},r.a.createElement("p",null,a("stats.VolumesCataloged"),": ",r.a.createElement("em",null,t["VolumesCataloged(normalized)"]))),r.a.createElement("li",{className:"stat-item"},r.a.createElement("p",null,a("stats.TitlesCataloged"),": ",r.a.createElement("em",null,t["TitlesCataloged(ACIP)"]))))),r.a.createElement("section",null,r.a.createElement("span",{className:"image"},r.a.createElement("img",{src:nt.a,alt:""}))))))}),st=function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(Ue.a)(this,(e=Object(Re.a)(t)).call.apply(e,[this].concat(s)))).unpackNames=function(e,t){if(Array.isArray(e["rdfs:label"])){var a=e["rdfs:label"].map(function(e,t){return r.a.createElement("p",{key:t,className:"modal-text"},r.a.createElement("span",{className:"meta-italics"},"(",e["@language"],"): "),r.a.createElement("span",{className:"meta-title"},e["@value"]))});return r.a.createElement("div",{key:t,className:"modal-text"},r.a.createElement("span",{className:"meta-detail"},t.split("Person")[1],": "),a)}return r.a.createElement("p",{key:t,className:"modal-text"},r.a.createElement("span",{className:"meta-detail"},t.split("Person")[1],": "),r.a.createElement("span",{className:"meta-italics"},"(",e["rdfs:label"]["@language"],"): "),r.a.createElement("span",{className:"meta-title"},e["rdfs:label"]["@value"]))},a.unpack=function(e){return null===e?null:Array.isArray(e)?e.map(function(e,t){return"object"===typeof e?a.unpack(e):"bdr"===e.substring(0,3)?r.a.createElement("div",{key:t,className:"card-sub-item"},r.a.createElement("div",{onClick:function(){return a.showModal(e.split(":")[1])}},e)):r.a.createElement("div",{key:t,className:"card-sub-item"},e)}):"object"===typeof e?e.hasOwnProperty("type")?a.unpackNames(e,e.type):r.a.createElement("p",{key:e["@value"],className:"modal-text"},r.a.createElement("span",{className:"meta-title"},e["@value"])):"string"===typeof e?"bdr"===e.substring(0,3)?r.a.createElement("div",{onClick:function(){return a.showModal(e.split(":")[1])}},e):e:void 0},a.buildAttribution=function(e){return r.a.createElement("p",{className:"meta-detail"},r.a.createElement("span",null,e("archives.attribution")))},a.parseType=function(e,t,n,s){var c=e["skos:prefLabel"],l=e["@id"],i=e.type,o=e.workCatalogInfo,u=e.personName,d=e.note,m=e["adm:access"],p=r.a.createElement("p",{className:"meta-detail"},r.a.createElement("span",null,s("modal.detail")," ",l,", "),r.a.createElement("span",null," ",i)),g=a.buildAttribution(s),h=r.a.createElement("button",{className:"modal-btn",onClick:t},r.a.createElement("i",{className:"fa fa-2x fa-times"}),s("technical.btn-close"));switch(d=void 0!==d?d.noteText:null,i){case"Person":return r.a.createElement("div",{className:"detail-data"},p,r.a.createElement("div",{className:"modal-title"},a.unpack(c)),r.a.createElement("div",{className:""},r.a.createElement("span",{className:"lead-item"},s("modal.names"),": "),r.a.createElement("span",{className:"meta-catalog"},a.unpack(u))),h);case"Topic":return r.a.createElement("div",{className:"detail-data"},p,r.a.createElement("div",{className:"modal-title"},a.unpack(c)),null===d?null:r.a.createElement("div",{className:"meta-catalog"},s("modal.note"),": ",null!==d?a.unpack(d):null),h);case"Work":var f,b=a.buildScansBtn(m,s);return f="bdr:AccessRestrictedByTbrc"===m?r.a.createElement("div",null,s("modal.image-restricted")):null===n||void 0===n?r.a.createElement("div",{className:"blinky"},s("technical.loading-image")):r.a.createElement("img",{src:n,width:"100%",alt:"scan"}),r.a.createElement("div",{className:"detail-data"},r.a.createElement("div",{className:"modal-title"},a.unpack(c)),p,f,g,r.a.createElement("div",{className:"meta-catalog"},a.unpack(o)),h,b);default:return null}},a}return Object(Me.a)(t,e),Object(Ke.a)(t,[{key:"buildScansBtn",value:function(e,t){var a=null;return void 0!==this.props.manifestURL&&(a=0===this.props.manifestURL.length?null:"bdr:AccessRestrictedByTbrc"===e?r.a.createElement("button",{disabled:!0},r.a.createElement("i",{className:"fa fa-2x fa-eye-slash"})," ",t("modal.scans-restricted")):r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"/uv.html?manifest="+this.props.manifestURL},r.a.createElement("button",null,r.a.createElement("i",{className:"fa fa-2x fa-eye"})," ",t("modal.scans")))),a}},{key:"render",value:function(){var e,t=this.props.show?"modal display-block":"modal display-none";return e=Object.keys(this.props.workDetail).length>0?this.parseType(this.props.workDetail._source,this.props.hideModal,this.props.image,this.props.t):r.a.createElement("div",{className:"blinky"},this.props.t("technical.loading")," ",this.props.doc_id),r.a.createElement("div",{className:t,onClick:this.props.hideModal},r.a.createElement("section",{className:"modal-main"},e))}}]),t}(n.Component),ct=Object(Qe.b)()(st),lt=Object(o.c)(function(e){return{workDetail:e.detailData.isFetching||0===e.detailModal.modalID?{}:e.detailData.item.hits.hits[0],resources:e.resources.isFetching?[]:e.resources,image:e.detailModal.image,manifestURL:e.manifestData.isFetching||e.detailData.isFetching?"":e.manifestData.manifestURL,numberVolumes:e.detailData.isFetching||0===e.detailModal.modalID?null:e.detailData.item.hits.hits[0]._source.workNumberOfVolumes}})(ct),it=(a(474),function(e){function t(){var e,a;Object(Se.a)(this,t);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(a=Object(Ue.a)(this,(e=Object(Re.a)(t)).call.apply(e,[this].concat(s)))).showModal=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;a.props.dispatch(Z(e)),a.props.dispatch(X(e,t)),a.props.dispatch({type:"DETAIL_MODAL",modalID:e,image:n,show:!0})},a.hideModal=function(){a.props.dispatch({type:"DETAIL_MODAL",show:!1}),a.props.dispatch({type:"NULLIFY_IIIF"})},a.unpackFrontend=function(e,t){if("P"===e){var a=null;return Array.isArray(t.data.personName)&&(a=(a=t.data.personName.find(function(e){return"PersonPrimaryName"===e.type}))["rdfs:label"]["@value"]),a}if("T"===e){var n=null;return Array.isArray(t.data["skos:prefLabel"])?n=(n=null==(n=t.data["skos:prefLabel"].find(function(e){return"en"===e["@language"]}))?n=t.data["skos:prefLabel"].find(function(e){return"bo-x-ewts"===e["@language"]}):n)["@value"]:"object"===typeof t.data["skos:prefLabel"]&&(n=t.data["skos:prefLabel"]["@value"]),n}if("W"!==e)return null;console.log("I ended up in W",t)},a.unpack=function(e){return null===e||void 0===e?null:Array.isArray(e)?e.map(function(e,t){return"object"===typeof e?a.unpack(e):"bdr"===e.substring(0,3)?r.a.createElement("div",{key:t,className:"card-sub-item"},r.a.createElement("div",null,e)):r.a.createElement("div",{key:t,className:"card-sub-item"},e)}):"object"===typeof e?"key"in e?e.data.hasOwnProperty("@id")?e.data["@id"]:a.unpackFrontend(e.code,e):"noteText"in e?a.unpack(e.noteText):e.hasOwnProperty("@value")?e["@value"]:r.a.createElement("span",{key:e["rdfs:label"]["@value"]},e["rdfs:label"]["@value"]):"string"===typeof e?"bdr"===e.substring(0,3)?r.a.createElement("div",null,e):r.a.createElement("span",null,e):void 0},a.getAuthorNames=function(e){var t=null;if(null===e||void 0===e)return null;Array.isArray(e)&&(e=e[0]);try{var n=a.props.authors.find(function(t){return e===t._id});if(void 0!==n)if(Array.isArray(n._source.personName))t=n._source.personName.find(function(e){return"PersonPrimaryName"===e.type})["rdfs:label"]["@value"];else"object"===typeof n._source.personName&&(t=n._source.personName["rdfs:label"]["@value"]);else t=null}catch(r){console.log("error in finding author name",r)}return t},a.getPrefLabel=function(e,t){var n=null,r=null;if(null===e||void 0===e)return null;Array.isArray(e)&&(e=e[0]);try{var s=a.props[t].find(function(t){return e===t._id});void 0!==s&&("skos:prefLabel"in s._source?Array.isArray(s._source["skos:prefLabel"])?s._source["skos:prefLabel"].some(function(e){return"en"===e["@language"]})?n=(n=s._source["skos:prefLabel"].find(function(e){return"en"===e["@language"]}))["@value"]:s._source["skos:prefLabel"].some(function(e){return"bo-x-ewts"===e["@language"]})&&(n=(n=s._source["skos:prefLabel"].find(function(e){return"bo-x-ewts"===e["@language"]}))["@value"]):"object"===typeof s._source["skos:prefLabel"]&&(n=s._source["skos:prefLabel"]["@value"]):n=null,"_resources"in s._source&&(r=s._source._resources))}catch(c){console.error("getPrefLabel error in Archives component",c)}return{code:e,label:n,resources:r}},a.getImage=function(e){fetch(e).then(function(e){ie(e)}).catch(function(e){console.error(e)})},a.g=function(e){fetch(e).then(function(t){if(t.ok)return ie(e),"".concat(e,"/").concat(fe)})},a}return Object(Me.a)(t,e),Object(Ke.a)(t,[{key:"render",value:function(){var e=this;if(!this.props.authors.length)return r.a.createElement("div",{className:"blinky"},"LOADING");var t=this.props.works.map(function(t,a){var n=t._source,s=n["skos:prefLabel"],c=n["@id"],l=n.note,i=n.workCreator,o=n.workIsAbout,u=(n._manifestURL,n._firstImageURL),d=n._resources,m=e.getPrefLabel(i,"authors"),p=e.getPrefLabel(o,"subjects"),g="Not Found"===u?null:"".concat(u,"/").concat(fe);return r.a.createElement("div",{key:a,className:"card"},r.a.createElement("p",{className:"meta-detail"},c),null==g?null:r.a.createElement("div",{className:"card-item card-item-img-link"},r.a.createElement("div",{className:"image-first-image-scan"},r.a.createElement("img",{src:g,alt:"scan",width:"100%"}))),r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-work-label"},"Title: "),r.a.createElement("span",{className:"item-work"},r.a.createElement("span",{className:"card-item-link",key:c,onClick:function(){return e.showModal(c,d,g)}},e.unpack(s)))),null==m?null:r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-work-label"},"Author: "),r.a.createElement("span",{className:"item-work"},r.a.createElement("span",{className:"card-item-link",key:m.code,onClick:function(){return e.showModal(m.code,m.resources)}},m.label))),null==p?null:r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-work-label"},"Subject: "),r.a.createElement("span",{className:"item-work"},r.a.createElement("span",{className:"card-item-link",key:p.code,onClick:function(){return e.showModal(p.code,p.resources)}},p.label))),r.a.createElement("p",{className:"meta-detail"},e.unpack(l)))});return r.a.createElement("div",{className:"grid"},t,r.a.createElement(lt,{key:this.props.doc_id,hideModal:this.hideModal,doc_id:this.props.doc_id,show:this.props.showModal}))}}]),t}(n.Component)),ot=(new Qe.b)(it),ut=Object(o.c)(function(e){return{works:e.works.isFetching?[]:e.works.items.hits.hits,authors:e.authors.isFetching?[]:e.authors.items.hits.hits,subjects:e.topics.isFetching?[]:e.topics.items.hits.hits,workDetail:e.detailData.isFetching||0===e.detailModal.modalID?{}:e.detailData.item.hits.hits[0],doc_id:e.detailModal.modalID,showModal:e.detailModal.show,manifestURL:e.manifestData.isFetching?"":e.manifestData.manifestURL}})(ot),dt=a(451),mt=a.n(dt),pt=(a(476),function(e){function t(e){var a;return Object(Se.a)(this,t),(a=Object(Ue.a)(this,Object(Re.a)(t).call(this,e))).setLang=function(e){var t=a.props,n=t.i18n,r=t.dispatch;n.changeLanguage(e),r(be(e))},a.resetPage=function(){a.props.dispatch({type:"SET_PAGE",page:"home"}),a.setLang(oe)},a.setNumber={0:"one",1:"one",2:"two",3:"three",4:"four"},a}return Object(Me.a)(t,e),Object(Ke.a)(t,[{key:"componentWillMount",value:function(){this.languageCheckAndUpdate()}},{key:"componentDidUpdate",value:function(){var e=this;window.onpopstate=function(t){t.preventDefault(),e.languageCheckAndUpdate()}}},{key:"languageCheckAndUpdate",value:function(){var e=this.props,t=e.history,a=e.url,n=e.selectedPage,r=e.dispatch,s=e.t;void 0!==a.split("/")[2]?Object.keys(s("pages")).includes(a.split("/")[2])?r(ve("archives")):(r(ve("home")),t.push("/".concat(a.split("/")[1]))):r(ve("home")),a.split("/")[1]in ue?this.setLang(a.split("/")[1],n):(this.setLang(oe,n),t.push(oe))}},{key:"renderPage",value:function(e,t){return t.some(function(t){return t.slug.split("-")[0]===e})||(ie("page not there"),this.resetPage()),t.filter(function(t){return t.slug.split("-")[0]===e}).map(function(e,t){var a=null;return e._embedded["wp:featuredmedia"]&&(a=e._embedded["wp:featuredmedia"][0].source_url),r.a.createElement("div",{key:e.slug},r.a.createElement("section",{id:"banner",key:e.id,style:{backgroundImage:"linear-gradient(to bottom, \n                  rgba(239, 239, 239,0.1) 50%,\n                  rgba(239, 239, 239,1.0) 100%), \n                  url(".concat(a,")")}},r.a.createElement("header",{className:"major"},r.a.createElement("span",{className:"icon style7"},r.a.createElement("img",{width:"90px",alt:"hi",src:mt.a})),r.a.createElement("h1",null,e.acf.title),r.a.createElement("h3",null,e.acf.subtitle),r.a.createElement("div",{className:"inner-page"},r.a.createElement("section",{className:"spotlights-page"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content.rendered}}))))))})}},{key:"render",value:function(){return this.props.fetchingPages||this.props.fetchingPosts?r.a.createElement("div",{className:"blinky"},this.props.t("technical.loading")):r.a.createElement("div",{className:"container"},r.a.createElement(Ze,null),this.renderPage(this.props.selectedPage,this.props.pages),ie("is it archives?",this.props.selectedPage,this.props.pages),"home"===this.props.selectedPage?r.a.createElement("div",null,r.a.createElement(rt,{stats:this.props.gs,t:this.props.t}),r.a.createElement(tt,null)):null,"archives"===this.props.selectedPage?r.a.createElement(ut,null):null,r.a.createElement(et,null))}}]),t}(n.Component)),gt=(new Qe.b)(pt),ht=Object(o.c)(function(e){return{router:e.router,url:e.router.location.pathname,fetchingPages:e.pages.isFetching,selectedLanguage:e.selectedLanguage||oe,selectedPage:e.pages.isFetching?[]:e.pages.items[e.selectedLanguage].some(function(t){return t.slug.split("-")[0]===e.selectedPage})?e.selectedPage:"home",pages:e.pages.isFetching?[]:e.pages.items[e.selectedLanguage],gs:e.gsData.isFetching?{}:e.gsData.gs}})(gt),ft=function(){return r.a.createElement(Te.a,null,r.a.createElement(xe.a,null,r.a.createElement(Fe.a,{path:"/en",component:ht}),r.a.createElement(Fe.a,{path:"/mn",component:ht}),r.a.createElement(Fe.a,{path:"/en/archives",component:ht}),r.a.createElement(Fe.a,{path:"/mn/archives",component:ht}),r.a.createElement(Fe.a,{path:"/mn/\u0410\u0440\u0445\u0438\u0432\u0443\u0443\u0434",component:ht}),r.a.createElement(Ce.a,{push:!0,from:"*",to:"/en",component:ht})))},bt=(a(477),a(481),a(447)),vt=a(452),Et=a.n(vt),yt=a(453),kt=a.n(yt);bt.a.use(Et.a).use(kt.a).use(Qe.a).init({fallbackLng:"en",debug:!0,load:"languageOnly",returnObjects:!0,interpolation:{escapeValue:!1},react:{wait:!0}});bt.a;var wt=Object(i.createLogger)(),Nt=Object(d.a)(),_t=Object(l.e)(Pe(Nt),Object(l.d)(Object(l.a)(Object(m.a)(Nt),u.a,wt)));_t.dispatch(function(e){return e({type:g}),fetch("".concat(re).concat(se,"pages?_embed")).then(function(e){return e.json()},function(e){return console.log("An error ",e)}).then(function(e){return e.reduce(function(e,t){var a=Object.keys(ue).find(function(e){return ue[e]===t.acf.language});return e[a]=e[a]||[],e[a].push(t),e},[])}).then(function(t){e(function(e){return{type:h,pages:e,receivedAt:Date.now()}}(t))})}),_t.dispatch(function(e){return e({type:f}),fetch("".concat(ce).concat(le,"posts?_embed")).then(function(e){return e.json()},function(e){return console.log("An error ",e)}).then(function(e){return e.reduce(function(e,t){var a=Object.keys(ue).find(function(e){return ue[e]===t.acf.language});return e[a]=e[a]||[],e[a].push(t),e},[])}).then(function(t){return e(function(e){return{type:b,posts:e,receivedAt:Date.now()}}(t))})}),_t.dispatch(function(){var e=Object(S.a)(C.a.mark(function e(t){var a,n;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:v}),e.prev=1,e.next=4,ne();case 4:return a=e.sent,ie("GS Data:",a),n={},a.map(function(e){var t=e.StatName.split(" ").join("");n[t]=isNaN(e.Value)?e.Value:String(e.Value).replace(/(.)(?=(\d{3})+$)/g,"$1,")}),e.abrupt("return",t({type:E,gs:n,receivedAt:Date.now()}));case 11:e.prev=11,e.t0=e.catch(1),console.error("error from tabletop",e.t0);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}()),function(){z.apply(this,arguments)}(),_t.dispatch(function(){var e=Object(S.a)(C.a.mark(function e(t){var a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:A}),e.prev=1,e.next=4,Y(K,K.length,"W");case 4:return a=e.sent,e.abrupt("return",t({type:j,data:a,receivedAt:Date.now()}));case 8:e.prev=8,e.t0=e.catch(1),console.error("there been fetchData error ",e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(t){return e.apply(this,arguments)}}()),_t.dispatch(function(){var e=Object(S.a)(C.a.mark(function e(t){var a,n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:G}),e.prev=1,e.next=4,q(K);case 4:return a=e.sent,n=a.aggregations.uniqueAuthors.buckets.map(function(e){return e.key}),e.next=8,Y(n,n.length,"P");case 8:return r=e.sent,e.abrupt("return",t(J(r)));case 12:e.prev=12,e.t0=e.catch(1),console.error("been done error",e.t0);case 15:case"end":return e.stop()}},e,this,[[1,12]])}));return function(t){return e.apply(this,arguments)}}()),_t.dispatch(function(){var e=Object(S.a)(C.a.mark(function e(t){var a,n,r;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:P}),e.prev=1,e.next=4,H(K);case 4:return a=e.sent,ie("initial topic search",a),n=a.aggregations.uniqueTopics.buckets.map(function(e){return e.key}),ie(n,n.length),e.next=10,Y(n,n.length,"T");case 10:return r=e.sent,ie(r),e.abrupt("return",t($(r)));case 15:e.prev=15,e.t0=e.catch(1),console.error("been topic error",e.t0);case 18:case"end":return e.stop()}},e,this,[[1,15]])}));return function(t){return e.apply(this,arguments)}}());c.a.render(r.a.createElement(function(){return document.body.classList.add("landing"),r.a.createElement(o.a,{store:_t},r.a.createElement(p.a,{history:Nt},r.a.createElement(ft,null)))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[210,2,1]]]);
//# sourceMappingURL=main.c933cc21.chunk.js.map