{"version":3,"sources":["assets/images/UB-woodblock-closeup.jpg","serviceWorker.js","store/actions/types.js","store/connection.js","store/queries/initialAuthorsSearch.js","store/actions/searchActions.js","store/queries/initialTopicsSearch.js","store/queries/searchByID.js","store/queries/searchByTerm.js","store/collections/nlm01.js","store/collections/nlm02.js","store/actions/googleSheetsActions.js","store/actions/WPPagesActions.js","store/actions/WPPostsActions.js","store/actions/utilityActions.js","store/actions/ontology/bdrcNotes.js","store/actions/ontology/bdrcPerson.js","store/actions/ontology/bdrcPersonEvent.js","store/actions/ontology/index.js","store/actions/index.js","components/containers/Language.js","components/Languages.js","components/containers/NavItem.js","components/Nav.js","components/Page.js","components/Header.js","components/Footer.js","components/Sidebar.js","components/SubItems.js","components/Items.js","components/Archives.js","components/Stats.js","components/Posts.js","components/Modal.js","components/router/RouteSwitch.js","store/reducers/index.js","store/localization/i18n.js","store/localization/detector.js","index.js","store/configureStore.js"],"names":["module","exports","__webpack_require__","p","Boolean","window","location","hostname","match","REQUEST_PAGES","RECEIVE_PAGES","REQUEST_POSTS","RECEIVE_POSTS","REQUEST_GS","RECEIVE_GS","DETAIL_MODAL","RECEIVE_MANIFEST","REQUEST_MANIFEST","NULLIFY_IIIF","RECEIVE_IIIF","REQUEST_IIIF","REQUEST_ES_DATA","RECEIVE_ES_DATA","RECEIVE_DATA","REQUEST_DATA","REQUEST_WORKS","RECEIVE_WORKS","REQUEST_ID","RECEIVE_ID","RECEIVE_AUTHORS","REQUEST_AUTHORS","RECEIVE_TOPICS","REQUEST_TOPICS","RECEIVE_SUBJECTS","REQUEST_SUBJECTS","REQUEST_RESOURCES","RECEIVE_RESOURCES","isConnected","healthStatus","client","elasticsearch","Client","host","protocol","port","path","log","_callee","health","regenerator_default","a","wrap","_context","prev","next","cluster","sent","status","t0","console","error","abrupt","stop","this","_collection","initialAuthorSearch","ids","idx","searchParams","initialIndexPrefix","body","aggregations","uniqueAuthors","terms","field","size","length","query","type","values","search","index","initialTopicsSearch","uniqueTopics","searchByID","code","allSource","arguments","undefined","sortValue","source","idxp","collections","order","_count","bool","filter","_source","sort","Object","defineProperty","searchIDSbyTerm","qterm","searchField","qids","must","term","value","collection","requestESData","types","receiveESData","json","data","receivedAt","Date","now","push","apply","toConsumableArray","fetchSpecificID","doc_id","dispatch","charAt","then","dataDetail","imageAsset","hits","workHasItemImageAsset","volume","workHasItem","mutateDataWithRelatedDocs","_ref4","asyncToGenerator","mark","_callee5","_context5","Promise","all","map","_ref5","_callee4","d","i","_context4","_id","initialIndex","newData","modifiedData","injectPrefLabel","_x6","_x7","_x4","_x5","_ref6","_callee6","tid","_context6","Array","isArray","some","l","find","t","_x8","b","_tid","localeCompare","injectSinglePrefLabel","skos","spreadSheet","concat","tableTopInit","_ref","response","Tabletop","init","key","callback","tabletop","Stats","elements","nodeWP","endpointWP","uniq","prims","boolean","number","string","objs","item","hasOwnProperty","indexOf","unpackNotes","arr","notesArray","possibleIDs","noteText","toLowerCase","includes","id","parsedNotes","nlmIDs","namesOfInterest","unpackPersonName","substring","react_default","createElement","className","s","unpackNames","onClick","bdrcPerson_this","showModal","split","unpackPersonEvent","lifeEvents","workEvents","events","typeEvent","onYear","keys","k","notBefore","notAfter","eventWhere","_url","bdrPurlURL","unpackOntology","stringArray","defaultLanguage","languages","en","mn","browseOptionsObj","browse","stateType","bdrGender","bdr:GenderMale","bdr:GenderFemale","bdrObjectType","bdr:ObjectTypeBlockprint","IIIFImageAPI","IIIFsuffix","setLanguage","language","setPage","page","withN","withNamespaces","active","children","lang","i18n","lng","changeLanguage","disabled","connect","state","ownProps","selectedLanguage","props","list","entries","_ref2","slicedToArray","react_router_dom","to","containers_Language","selectedPage","style","color","navigation","slugs","nav","slug","params","containers_NavItem","pages","isFetching","items","c","Page","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","resetPage","setNumber","0","1","2","3","4","rgbLight","rgbDark","e","mediaURL","_embedded","source_url","backgroundImage","acf","title","subtitle","dangerouslySetInnerHTML","__html","content","rendered","fetchingWP","renderPage","Component","posts","Header","history","components_Languages","Nav","components_Page","src","alt","href","target","rel","Sidebar","o","n","checked","onChange","htmlFor","getNumberOfItems","buckets","doc_count","total","setBrowse","number_esWorks","esWorks","setCollection","number_esAuthors","esAuthors","number_esSubjects","esSubjects","SubItems","related","handleShowModal","relatedItems","pathname","label","Items","modalID","show","initialRender","_this2","currentESdata","x","_related","components_SubItems","getCurrentData","collapse","setCollapse","detailModal","components_Sidebar","components_Items","statList","_this$props","stats","constructor","LastUpdate","PagesDigitized","VolumesDigitized","img","gsData","gs","fetchingPosts","nestedObj","prop","post","j","parseInt","columns","Modal","handleHideModal","goBack","stopPropagation","buildImg","access","_img","width","buildWorkMetadata","workExtentStatement","workLangScript","workNumberOfVolumes","workObjectType","workPublisherName","objectType","pubName","buildAttribution","parseModalDetails","workDetail","note","_firstImageURL","_manifestURL","_access","typet","_unpackNotes","notes","Fragment","attribution","closeBtn","metaDetail","trim","personEvent","personName","personGender","join","buildWorkEvents","gender","personalDetails","buildPersonalDetails","scanBtn","buildScansBtn","workMetadata","catalog","workCatalogInfo","catalogInfo","manifestURL","btn","showHideClassName","hideModal","detailData","numberVolumes","RouteSwitch","previousLocation","setLang","languageCheckAndUpdate","prevProps","action","_this$props2","url","react_router","component","exact","render","components_Stats","components_Posts","components_Archives","components_Footer","components_Modal","assign","lastUpdated","firstImage","esResources","manifestData","IIIFData","payload","rootReducer","combineReducers","router","connectRouter","use","Backend","reactI18nextModule","fallbackLng","debug","preload","returnObjects","detection","lookupFromPathIndex","lookupLocalStorage","caches","excludeCacheFor","interpolation","escapeValue","react","wait","store","preloadedState","createBrowserHistory","middlewares","thunkMiddleware","enhancers","applyMiddleware","composedEnhancers","compose","createStore","configureStore","fetch","reduce","r","receivePages","receivePosts","_callee2","_context2","StatName","isNaN","Value","String","replace","_x","checkConnection","authors","_x2","_ref3","_callee3","topics","_context3","_x3","ReactDOM","document","classList","add","StrictMode","es","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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AAMX,EAAO,CACZK,KAAM,GACNE,MAAO,CACNkB,KAAM,CACLU,KAAM,CACLC,KAAKP,OAAAC,EAAA,EAAAD,CAAA,GACHI,EAAc,CACdI,MAAOL,KAIVN,OAAQ,CACP9B,IAAK,CACJY,KAAMV,GAAaU,KACnBC,OAAQyB,OAOb,OAAOjE,EAAOyC,OAAO,CAAEC,QAAOX,UHV3BsC,EAAa,GAajB,SAASC,GAAc/B,GACnB,OAAOA,GACH,KAAKgC,EACD,MAAO,CAAEhC,KAAMgC,GACnB,KAAKA,EACD,MAAO,CAAEhC,KAAMgC,GACnB,KAAKA,EACD,MAAO,CAAEhC,KAAMgC,GACnB,QACI,OAAO,MAInB,SAASC,GAAcjC,EAAMkC,GACzB,MAAO,CACHlC,KAAMA,EACNmC,KAAMD,EACNE,WAAYC,KAAKC,QA3BrBpD,EADA4C,EIlByB,CACzB,aACA,aACA,iBACA,iBACA,iBACA,gBACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,gBACA,gBACA,gBACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,gBACA,eACA,eACA,aACA,aACA,aACA,cJnCWS,KAAXC,MAAAtD,EAAAmC,OAAAoB,EAAA,EAAApB,CKnByB,CACzB,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,aACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,cACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,kBLpEG,SAASqB,GAAgBC,GAC5B,OAAO,SAAAC,GAEH5E,GAAI,mBAAoB2E,GACxBC,EAjCG,CACH5C,KAAMgC,IAiCN,IACI1B,EAAW,CAACqC,GAAS,EAAGA,EAAOE,OAAO,IAAI,GAAMC,KAAK,SAACC,GAClD,OAAOH,EA9BZ,CACH5C,KAAMgC,EACNG,KAHWD,EA+BuBa,EA3BlCC,WAAYd,EAAKe,KAAKA,KAAK,GAAG9B,QAAQ+B,sBACtCC,OAAQjB,EAAKe,KAAKA,KAAK,GAAG9B,QAAQiC,YAClChB,WAAYC,KAAKC,QANzB,IAAmBJ,IAiCT,MAAMpD,GACJD,QAAQC,MAAM,mBAAoBA,KAK9C,IAAMuE,GAAyB,eAAAC,EAAAjC,OAAAkC,EAAA,EAAAlC,CAAAlD,EAAAC,EAAAoF,KAAG,SAAAC,EAAOtB,EAAMV,GAAb,OAAAtD,EAAAC,EAAAC,KAAA,SAAAqF,GAAA,cAAAA,EAAAnF,KAAAmF,EAAAlF,MAAA,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","file":"static/js/main.c01d4a5d.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/UB-woodblock-closeup.67ac4b0f.jpg\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const LOCATION_CHANGE = '@@router/LOCATION_CHANGE'\n\nexport const SET_LANG = 'SET_LANG'\nexport const SET_PAGE = 'SET_PAGE'\nexport const REQUEST_PAGES = 'REQUEST_PAGES'\nexport const RECEIVE_PAGES = 'RECEIVE_PAGES'\nexport const REQUEST_POSTS = 'REQUEST_POSTS'\nexport const RECEIVE_POSTS = 'RECEIVE_POSTS'\n\nexport const REQUEST_GS = 'REQUEST_GS'\nexport const RECEIVE_GS = 'RECEIVE_GS'\n\nexport const DETAIL_MODAL = 'DETAIL_MODAL'\n\nexport const RECEIVE_MANIFEST = 'RECEIVE_MANIFEST'\nexport const REQUEST_MANIFEST = 'REQUEST_MANIFEST'\nexport const NULLIFY_IIIF = 'NULLIFY_IIIF'\nexport const RECEIVE_IIIF = 'RECEIVE_IIIF'\nexport const REQUEST_IIIF = 'REQUEST_IIIF'\n\nexport const REQUEST_ES_DATA = 'REQUEST_ES_DATA'\nexport const RECEIVE_ES_DATA = 'RECEIVE_ES_DATA'\nexport const RECEIVE_DATA = 'RECEIVE_DATA'\nexport const REQUEST_DATA = 'REQUEST_DATA'\nexport const REQUEST_WORKS = 'REQUEST_WORKS'\nexport const RECEIVE_WORKS = 'RECEIVE_WORKS'\n\nexport const REQUEST_ID = 'REQUEST_ID'\nexport const RECEIVE_ID = 'RECEIVE_ID'\n\nexport const RECEIVE_AUTHORS = 'RECEIVE_AUTHORS'\nexport const REQUEST_AUTHORS = 'REQUEST_AUTHORS'\n\nexport const RECEIVE_TOPICS = 'RECEIVE_TOPICS'\nexport const REQUEST_TOPICS = 'REQUEST_TOPICS'\n\nexport const RECEIVE_SUBJECTS = 'RECEIVE_SUBJECTS'\nexport const REQUEST_SUBJECTS = 'REQUEST_SUBJECTS'\n\nexport const REQUEST_RESOURCES = 'REQUEST_RESOURCES'\nexport const RECEIVE_RESOURCES = 'RECEIVE_RESOURCES'\n\nexport const SET_COLLAPSE = 'SET_COLLAPSE'\nexport const SET_BROWSE = 'SET_BROWSE'\nexport const SET_COLLECTION = 'SET_COLLECTION'","import elasticsearch from 'elasticsearch'\nimport { log } from './actions'\n\nconst port = 9200\n//const host = process.env.NODE_ENV === 'production' ? '157.230.172.69' : 'localhost';\nconst host = '157.230.172.69' // : 'localhost';\n\n\nlet isConnected = false\nlet healthStatus = 'red'\n\nconst client = new elasticsearch.Client({\n\thost: {\n\t\tprotocol: 'http',\n\t\thost: host,\n\t\tport: port,\n\t\tpath: ''\n\t},\n\tlog: 'info' //'trace'\n})\n\nasync function checkConnection() {\n\twhile(!isConnected) {\n\t\tlog('Connnnnecting....')\n\t\twhile(healthStatus === 'red') {\n\t\t\t//log('awaiting green light')\n\t\t\ttry {\n\t\t\t\tconst health = await client.cluster.health({});\n\t\t\t\tlog('health: ', health)\n\t\t\t\thealthStatus = health.status\n                isConnected = true\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Connection is failing...', err)\n                isConnected = false\n\t\t\t}\n\t\t}\n    }\n    \n\treturn isConnected\n}\n\nexport { client, checkConnection, isConnected }","import { client } from '../connection'\nimport { searchParams } from '../../store/actions'\n\nexport const initialAuthorSearch = (ids) => {\n\n    // we're searching through the works for authors\n    const idx = searchParams.initialIndexPrefix + \"work\"\n\n\tconst body = {\n\n        // aggregations.uniqueAuthors.buckets.map()\n        \n        aggregations: {\n            uniqueAuthors: {\n                terms: {\n                    field: \"workCreator.keyword\",\n                    size: ids.length\n                }\n            }\n        },\n        \n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n\n\t}\n\n\treturn client.search({ index: idx, body })\n\n}\n","import { log, searchParams } from './index'\nimport * as types from './types'\nimport { collection_v1 } from '../collections/nlm01'\nimport { collection_v2 } from '../collections/nlm02'\nimport { testCollection } from '../collections/testCollection40'\n\nimport {\n    initialTopicsSearch,\n    initialAuthorSearch,\n    searchByID,\n    searchResources,\n    searchIDSbyTerm\n} from '../queries'\n\n//collection_v1.push(...collection_v2)\n//const collection = process.env.NODE_ENV === 'production' ? \nlet collection = []\nif(process.env.NODE_ENV === 'production') {\n    collection = collection_v1\n    collection.push(...collection_v2)\n} else {\n    collection = testCollection\n}\n\n\n/* ******************************************\nDATA\nElasticsearch data from http://142.93.23.6:9200\n********************************************/\nfunction requestESData(type) {\n    switch(type) {\n        case types.REQUEST_WORKS:\n            return { type: types.REQUEST_WORKS }\n        case types.REQUEST_AUTHORS:\n            return { type: types.REQUEST_AUTHORS }\n        case types.REQUEST_SUBJECTS:\n            return { type: types.REQUEST_SUBJECTS }\n        default:\n            return null\n    }\n}\n\nfunction receiveESData(type, json) {\n    return {\n        type: type,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchData() {\n    //const fc = filterCollection(collection)\n    return async dispatch => {\n        dispatch(requestESData(types.REQUEST_WORKS))\n        try {\n            const data = await searchByID(collection, collection.length, \"W\")\n            //log('buckets', collection.length, data.aggregations.collections.buckets)\n            const modifiedData = injectPrefLabel(data)\n            return dispatch(receiveESData(types.RECEIVE_WORKS, modifiedData))\n        } catch (error) {\n            console.error('there been fetchData error ', error)\n        }\n    }\n}\n\nexport function fetchAuthors() {\n    //const fc = filterCollection(collection)\n    //log('fetchAuthors receiving', fc.length, fc)\n    return async dispatch => {\n        dispatch(requestESData(types.REQUEST_AUTHORS))\n        try {\n            const a = await initialAuthorSearch(collection)\n            //log('#0, authors...')\n            const authors = a.aggregations.uniqueAuthors.buckets.map(a => {\n                return a.key\n            })\n            //log('#1, authors keys', authors.length)\n            const data = await searchByID(authors, authors.length, \"P\")\n            //log('#2, authors in works')\n            await mutateDataWithRelatedDocs(data, 'workCreator.keyword')\n            //log('#3, authors add related docs')\n            const modifiedData = injectPrefLabel(data)\n            return dispatch(receiveESData(types.RECEIVE_AUTHORS, modifiedData))\n        } catch(error) {\n            console.error('been done error in fetchAuthors', error)\n        }\n    }\n}\n\nexport function fetchTopics() {\n    return async dispatch => {\n        dispatch(requestESData(types.REQUEST_SUBJECTS))\n        try {\n            const t = await initialTopicsSearch(collection)\n            //log('#0, topics...')\n            const topics = t.aggregations.uniqueTopics.buckets.map(t => {\n                return t.key\n            })\n            //log('#1, topics keys', topics.length)\n            const data = await searchByID(topics, topics.length, \"T\")\n            //log('#2, topics in works')\n            await mutateDataWithRelatedDocs(data, 'workIsAbout.keyword')\n            //log('#3, topic add related docs')\n            \n            const modifiedData = injectPrefLabel(data)\n            \n            return dispatch(receiveESData(types.RECEIVE_SUBJECTS, modifiedData))\n        } catch(error) {\n            console.error('been error in da fetchTopics', error)\n        }\n    }\n}\n\nfunction requestID() {\n    return {\n        type: types.REQUEST_ID\n    }\n}\n\nfunction receiveID(json) {\n    return {\n        type: types.RECEIVE_ID,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        imageAsset: json.hits.hits[0]._source.workHasItemImageAsset,\n        volume: json.hits.hits[0]._source.workHasItem,\n        receivedAt: Date.now()\n    }\n}\n\nexport const fetchResources = (id, resources) => {\n    return dispatch => {\n        //log('fetch resources', id, resources)\n        dispatch(requestESData(types.REQUEST_RESOURCES))\n        try {\n            searchResources(resources).then((data) => {\n                dispatch(receiveESData(types.RECEIVE_RESOURCES, data))\n            })\n        } catch (error) {\n            console.error('fetch resources error, ', error)\n        }\n    }\n}\n\nexport function fetchSpecificID(doc_id) {\n    return dispatch => {  \n        \n        log('fetchSpecificID!', doc_id)\n        dispatch(requestID())\n        try {\n            searchByID([doc_id], 1, doc_id.charAt(4), true).then((dataDetail) => {\n                return dispatch(receiveID(dataDetail))\n            })\n        } catch(error) {\n            console.error('fetch ID error! ', error)\n        }\n    }\n}\n\nconst mutateDataWithRelatedDocs = async (data, searchField) => {\n    // YO!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n    // async within an array.map for a Promise.all :)\n    // but, this is mutating data directly\n    // THIS IS AN ANTI-PATTERN, learn correct pattern\n    await Promise.all(data.hits.hits.map(async (d, i) => {\n        if('_id' in d) {\n            return await searchIDSbyTerm(d._id, searchField, collection, searchParams.initialIndex).then(newData => {\n                //log('within the mutate with related', newData)\n                const modifiedData = injectPrefLabel(newData)\n                return d[\"_related\"] = modifiedData\n                \n            })\n        }\n    }))\n}\n\n// this function should be done in python as pre-processing\n// add _tid to each document before indexing to ES\nconst injectPrefLabel = (data) => {\n    //log('trying to inject preflabel now...')\n    data.hits.hits.map(async p => {\n        let tid\n\n        if(p !== undefined) {\n            if('skos:prefLabel' in p._source) {\n                if(Array.isArray(p._source[\"skos:prefLabel\"])) {\n                    //log('skos is an array', p._id)\n                    if (p._source[\"skos:prefLabel\"].some(l => l[\"@language\"] === 'en')) {\n                        tid = p._source[\"skos:prefLabel\"].find(t => \"en\" === t[\"@language\"])\n                        tid = tid[\"@value\"]\n\n                    } else if (p._source[\"skos:prefLabel\"].some(l => l[\"@language\"] === 'bo-x-ewts')) {\n                        tid = p._source[\"skos:prefLabel\"].find(t => \"bo-x-ewts\" === t[\"@language\"])\n                        tid = tid[\"@value\"]\n\n                    }\n                } else if(typeof p._source[\"skos:prefLabel\"] === 'object') {\n                    tid = p._source[\"skos:prefLabel\"][\"@value\"]\n\n                }\n\n            } else {\n                tid = null\n            }\n        }\n\n        return p[\"_tid\"] = tid\n\n    })\n    \n    data.hits.hits.sort((a, b) => a._tid.localeCompare(b._tid))\n\n    return data\n}\n\nexport const injectSinglePrefLabel = (skos) => {\n    //log('trying to inject preflabel now...')\n    let tid\n    if(Array.isArray(skos)) {\n        //log('skos is an array', p._id)\n        if (skos.some(l => l[\"@language\"] === 'en')) {\n            tid = skos.find(t => \"en\" === t[\"@language\"])\n            tid = tid[\"@value\"]\n\n        } else if (skos.some(l => l[\"@language\"] === 'bo-x-ewts')) {\n            tid = skos.find(t => \"bo-x-ewts\" === t[\"@language\"])\n            tid = tid[\"@value\"]\n\n        }\n    } else if(typeof skos === 'object') {\n        tid = skos[\"@value\"]\n    } else {\n        tid = null\n    }\n    return tid\n}\n","import { client } from '../connection'\nimport { searchParams } from '../../store/actions'\n\nexport const initialTopicsSearch = (ids) => {\n\n    // we're searching through the works for topics\n    const idx = searchParams.initialIndexPrefix + \"work\"\n\n\tconst body = {\n\n        // aggregations.uniqueAuthors.buckets.map()\n        aggregations: {\n            uniqueTopics: {\n                terms: {\n                    field: \"workIsAbout.keyword\",\n                    size: ids.length\n                }\n            }\n        },\n        \n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n\n\t}\n\n\treturn client.search({ index: idx, body })\n\n}\n","import { client } from '../connection'\nimport { searchParams, log } from '../../store/actions'\n\nexport const searchByID = (ids, size, code, allSource = false, collection = null) => {\n\n    let sortValue = null\n    let index\n    let source = []\n    let sort = \"asc\"\n    const idxp = searchParams.initialIndexPrefix\n    \n    const id_filter = {\n        type: searchParams.type,\n        values: ids\n    }\n\n    const agg_terms = {\n        collections: {\n            terms: {\n                field: '_collection',\n                order: { _count: 'desc' }\n            }\n        }\n    }\n\n    if(code === \"P\") {\n        index = idxp + \"person\"\n        source = [\"personName\", \"skos:prefLabel\", \"_*\"]\n\n    } else if(code === \"T\") {\n        index = [idxp + \"person\", idxp + \"topic\", idxp + \"work\"]\n        source = [\n            \"personName\", \"@id\", \"note.noteText\", \"skos:prefLabel\", \n            \"workCreator\", \"workIsAbout\",\n            \"_*\"\n        ]\n    }\n    else if(code === \"W\") {\n        index = idxp + \"work\"\n        sortValue = \"skos:prefLabel.@value.keyword\"\n        source = [\n            \"@id\", \"note.noteText\", \"skos:prefLabel\", \n            \"workCreator\", \"workIsAbout\",\n            \"_*\"\n        ]\n\n    }\n    \n    const body = {\n        size: size,\n        aggregations: agg_terms,\n        query: {\n            bool: {\n                filter: [\n                    { ids: id_filter }\n                ]\n            }\n        }\n    }\n\t\n\n    if(!allSource) { body._source = source }\n    \n    if(sortValue !== null) {\n        // note the [] around variable in the value being appended...?\n        body.sort = [ { [sortValue]: { \"order\" : sort } }]\n    }\n\n\t//log('search by id body', code, body)\n\n\treturn client.search({ index: index, body })\n\n}\n","import { client } from '../connection'\nimport { searchParams } from '../actions/index'\n\nexport const searchIDSbyTerm = (qterm, searchField, qids, index) => {\n\t//log(qterm, index, qids)\n\tconst body = {\n\t\tsize: 18,\n\t\tquery: {\n\t\t\tbool: {\n\t\t\t\tmust: {\n\t\t\t\t\tterm: {\n\t\t\t\t\t\t[searchField]: {\n\t\t\t\t\t\t\tvalue: qterm\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfilter: {\n\t\t\t\t\tids: {\n\t\t\t\t\t\ttype: searchParams.type,\n\t\t\t\t\t\tvalues: qids\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn client.search({ index, body })\n\t\n}","export const collection_v1 = [\n    'bdr:W22677',\n    'bdr:W14260',\n    'bdr:W1GS135531',\n    'bdr:W1GS135873',\n    'bdr:W1GS136667',\n    'bdr:W1KG10720',\n    'bdr:W1KG1132',\n    'bdr:W1KG1247',\n    'bdr:W1KG1248',\n    'bdr:W1KG1249',\n    'bdr:W1KG1250',\n    'bdr:W1KG1251',\n    'bdr:W1KG1252',\n    'bdr:W1KG1253',\n    'bdr:W1KG1254',\n    'bdr:W1KG1279',\n    'bdr:W1KG1280',\n    'bdr:W1KG1284',\n    'bdr:W1KG1286',\n    'bdr:W1KG1320',\n    'bdr:W1KG1321',\n    'bdr:W1KG14630',\n    'bdr:W1KG14641',\n    'bdr:W1KG14700',\n    'bdr:W1KG1558',\n    'bdr:W1KG1559',\n    'bdr:W1KG1573',\n    'bdr:W1KG1578',\n    'bdr:W1KG1607',\n    'bdr:W1KG1608',\n    'bdr:W1KG1609',\n    'bdr:W1KG1610',\n    'bdr:W1KG1616',\n    'bdr:W1KG1617',\n    'bdr:W1KG1623',\n    'bdr:W1KG1624',\n    'bdr:W1KG1625',\n    'bdr:W1KG1626',\n    'bdr:W1KG1627',\n    'bdr:W1KG1645',\n    'bdr:W1KG1646',\n    'bdr:W1KG1653',\n    'bdr:W1KG1655',\n    'bdr:W1KG1656',\n    'bdr:W1KG1657',\n    'bdr:W1KG1658',\n    'bdr:W1KG2144',\n    'bdr:W1KG26108',\n    'bdr:W1KG5182',\n    'bdr:W1KG5200',\n    'bdr:W22344',\n    'bdr:W22434',\n    'bdr:W22677',\n    'bdr:W8238'\n]","export const collection_v2 = [\n    \"bdr:W1NLM1\",\n    \"bdr:W1NLM2\",\n    \"bdr:W1NLM3\",\n    \"bdr:W1NLM4\",\n    \"bdr:W1NLM5\",\n    \"bdr:W1NLM6\",\n    \"bdr:W1NLM7\",\n    \"bdr:W1NLM8\",\n    \"bdr:W1NLM9\",\n    \"bdr:W1NLM10\",\n    \"bdr:W1NLM11\",\n    \"bdr:W1NLM12\",\n    \"bdr:W1NLM13\",\n    \"bdr:W1NLM14\",\n    \"bdr:W1NLM15\",\n    \"bdr:W1NLM16\",\n    \"bdr:W1NLM17\",\n    \"bdr:W1NLM18\",\n    \"bdr:W1NLM19\",\n    \"bdr:W1NLM20\",\n    \"bdr:W1NLM21\",\n    \"bdr:W1NLM22\",\n    \"bdr:W1NLM23\",\n    \"bdr:W1NLM24\",\n    \"bdr:W1NLM25\",\n    \"bdr:W1NLM26\",\n    \"bdr:W1NLM27\",\n    \"bdr:W1NLM28\",\n    \"bdr:W1NLM29\",\n    \"bdr:W1NLM30\",\n    \"bdr:W1NLM31\",\n    \"bdr:W1NLM32\",\n    \"bdr:W1NLM33\",\n    \"bdr:W1NLM34\",\n    \"bdr:W1NLM35\",\n    \"bdr:W1NLM36\",\n    \"bdr:W1NLM37\",\n    \"bdr:W1NLM38\",\n    \"bdr:W1NLM39\",\n    \"bdr:W1NLM40\",\n    \"bdr:W1NLM41\",\n    \"bdr:W1NLM42\",\n    \"bdr:W1NLM43\",\n    \"bdr:W1NLM44\",\n    \"bdr:W1NLM45\",\n    \"bdr:W1NLM46\",\n    \"bdr:W1NLM47\",\n    \"bdr:W1NLM48\",\n    \"bdr:W1NLM49\",\n    \"bdr:W1NLM50\",\n    \"bdr:W1NLM51\",\n    \"bdr:W1NLM52\",\n    \"bdr:W1NLM53\",\n    \"bdr:W1NLM54\",\n    \"bdr:W1NLM55\",\n    \"bdr:W1NLM56\",\n    \"bdr:W1NLM57\",\n    \"bdr:W1NLM58\",\n    \"bdr:W1NLM59\",\n    \"bdr:W1NLM60\",\n    \"bdr:W1NLM61\",\n    \"bdr:W1NLM62\",\n    \"bdr:W1NLM63\",\n    \"bdr:W1NLM64\",\n    \"bdr:W1NLM65\",\n    \"bdr:W1NLM66\",\n    \"bdr:W1NLM67\",\n    \"bdr:W1NLM68\",\n    \"bdr:W1NLM69\",\n    \"bdr:W1NLM70\",\n    \"bdr:W1NLM71\",\n    \"bdr:W1NLM72\",\n    \"bdr:W1NLM73\",\n    \"bdr:W1NLM74\",\n    \"bdr:W1NLM75\",\n    \"bdr:W1NLM76\",\n    \"bdr:W1NLM77\",\n    \"bdr:W1NLM78\",\n    \"bdr:W1NLM79\",\n    \"bdr:W1NLM80\",\n    \"bdr:W1NLM81\",\n    \"bdr:W1NLM82\",\n    \"bdr:W1NLM83\",\n    \"bdr:W1NLM84\",\n    \"bdr:W1NLM85\",\n    \"bdr:W1NLM86\",\n    \"bdr:W1NLM87\",\n    \"bdr:W1NLM88\",\n    \"bdr:W1NLM89\",\n    \"bdr:W1NLM90\",\n    \"bdr:W1NLM91\",\n    \"bdr:W1NLM92\",\n    \"bdr:W1NLM93\",\n    \"bdr:W1NLM94\",\n    \"bdr:W1NLM95\",\n    \"bdr:W1NLM96\",\n    \"bdr:W1NLM97\",\n    \"bdr:W1NLM98\",\n    \"bdr:W1NLM99\",\n    \"bdr:W1NLM100\",\n    \"bdr:W1NLM101\",\n    \"bdr:W1NLM102\",\n    \"bdr:W1NLM103\",\n    \"bdr:W1NLM104\",\n    \"bdr:W1NLM105\",\n    \"bdr:W1NLM106\",\n    \"bdr:W1NLM107\",\n    \"bdr:W1NLM108\",\n    \"bdr:W1NLM109\",\n    \"bdr:W1NLM110\",\n    \"bdr:W1NLM111\",\n    \"bdr:W1NLM112\",\n    \"bdr:W1NLM113\",\n    \"bdr:W1NLM114\",\n    \"bdr:W1NLM115\",\n    \"bdr:W1NLM116\",\n    \"bdr:W1NLM117\",\n    \"bdr:W1NLM118\",\n    \"bdr:W1NLM119\",\n    \"bdr:W1NLM120\",\n    \"bdr:W1NLM121\",\n    \"bdr:W1NLM122\",\n    \"bdr:W1NLM123\",\n    \"bdr:W1NLM124\",\n    \"bdr:W1NLM125\",\n    \"bdr:W1NLM126\",\n    \"bdr:W1NLM127\",\n    \"bdr:W1NLM128\",\n    \"bdr:W1NLM129\",\n    \"bdr:W1NLM130\",\n    \"bdr:W1NLM131\",\n    \"bdr:W1NLM132\",\n    \"bdr:W1NLM133\",\n    \"bdr:W1NLM134\",\n    \"bdr:W1NLM135\",\n    \"bdr:W1NLM136\",\n    \"bdr:W1NLM137\",\n    \"bdr:W1NLM138\",\n    \"bdr:W1NLM139\",\n    \"bdr:W1NLM140\",\n    \"bdr:W1NLM141\",\n    \"bdr:W1NLM142\",\n    \"bdr:W1NLM143\",\n    \"bdr:W1NLM144\",\n    \"bdr:W1NLM145\",\n    \"bdr:W1NLM146\",\n    \"bdr:W1NLM147\",\n    \"bdr:W1NLM148\",\n    \"bdr:W1NLM149\",\n    \"bdr:W1NLM150\",\n    \"bdr:W1NLM151\",\n    \"bdr:W1NLM152\",\n    \"bdr:W1NLM153\",\n    \"bdr:W1NLM154\",\n    \"bdr:W1NLM155\",\n    \"bdr:W1NLM156\",\n    \"bdr:W1NLM157\",\n    \"bdr:W1NLM158\",\n    \"bdr:W1NLM159\",\n    \"bdr:W1NLM160\",\n    \"bdr:W1NLM161\",\n    \"bdr:W1NLM162\",\n    \"bdr:W1NLM163\",\n    \"bdr:W1NLM164\",\n    \"bdr:W1NLM165\",\n    \"bdr:W1NLM166\",\n    \"bdr:W1NLM167\",\n    \"bdr:W1NLM168\",\n    \"bdr:W1NLM169\",\n    \"bdr:W1NLM170\",\n    \"bdr:W1NLM171\",\n    \"bdr:W1NLM172\",\n    \"bdr:W1NLM173\",\n    \"bdr:W1NLM174\",\n    \"bdr:W1NLM175\",\n    \"bdr:W1NLM176\",\n    \"bdr:W1NLM177\",\n    \"bdr:W1NLM178\",\n    \"bdr:W1NLM179\",\n    \"bdr:W1NLM180\",\n    \"bdr:W1NLM181\",\n    \"bdr:W1NLM182\",\n    \"bdr:W1NLM183\",\n    \"bdr:W1NLM184\",\n    \"bdr:W1NLM185\",\n    \"bdr:W1NLM186\",\n    \"bdr:W1NLM187\",\n    \"bdr:W1NLM188\",\n    \"bdr:W1NLM189\",\n    \"bdr:W1NLM190\",\n    \"bdr:W1NLM191\",\n    \"bdr:W1NLM192\",\n    \"bdr:W1NLM193\",\n    \"bdr:W1NLM194\",\n    \"bdr:W1NLM195\",\n    \"bdr:W1NLM196\",\n    \"bdr:W1NLM197\",\n    \"bdr:W1NLM198\",\n    \"bdr:W1NLM199\",\n    \"bdr:W1NLM200\",\n    \"bdr:W1NLM201\",\n    \"bdr:W1NLM202\",\n    \"bdr:W1NLM203\",\n    \"bdr:W1NLM204\",\n    \"bdr:W1NLM205\",\n    \"bdr:W1NLM206\",\n    \"bdr:W1NLM207\",\n    \"bdr:W1NLM208\",\n    \"bdr:W1NLM209\",\n    \"bdr:W1NLM210\",\n    \"bdr:W1NLM211\"\n]","import Tabletop from 'tabletop'\nimport * as types from './types'\nimport { log } from './index'\n\nconst d = `https://docs.google.com/spreadsheets/d/`\nconst gsKey = `1hPqe-Y2TWwMTAxIEXYvc8du_GMFUJQNPvZbJou7veAY`\n//const testKey = `1P6Dk9SN0af7GDitw7-tRXGc5N22AEXoaOpDIKzVdlK0`\nconst spreadSheet = `${d}${gsKey}/edit?usp=sharing`\n\nfunction requestGS() {\n    return {\n        type: types.REQUEST_GS\n    }\n}\n\nfunction receiveGS(gs) {\n    return {\n        type: types.RECEIVE_GS,\n        gs: gs,\n        receivedAt: Date.now()\n    }\n}\n\nconst tableTopInit = async () => {\n    return await new Promise((response, error) => {\n        Tabletop.init({\n            key: spreadSheet,\n            callback: (data, tabletop) => { \n                response(data.Stats.elements)\n                error(tabletop)\n            }\n            //, simpleSheet: true\n        })\n    })\n}\n\nexport function getGS() {\n    return async dispatch => {\n        dispatch(requestGS())\n        try {\n            const data = await tableTopInit()\n            //log('GS Data:', data)\n            // add some data processing\n            let gsData = {}\n            data.map(d => {\n                const key = d.StatName.split(' ').join('')\n                gsData[key] = isNaN(d.Value) ? d.Value : String(d.Value).replace(/(.)(?=(\\d{3})+$)/g,'$1,')\n            })\n            return dispatch(receiveGS(gsData))\n        } catch(error) {\n            console.error('error from tabletop', error)\n        }\n    }\n}\n","import * as types from './types'\nimport { languages } from './index'\n\nexport const nodeWP = 'http://178.128.7.239/'\nexport const onlyIP = '178.128.7.239'\n\nconst endpointWP = 'wp-json/wp/v2/'\n\n/* ******************************************\nPAGES\nwp pages for content pages (about, preservation)\n********************************************/\n\nfunction requestPages() {\n    return {\n        type: types.REQUEST_PAGES\n    }\n}\n\nfunction receivePages(json) {\n    return {\n        type: types.RECEIVE_PAGES,\n        pages: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchPages() {\n    return function(dispatch) {\n        dispatch(requestPages())\n        return fetch(`${nodeWP}${endpointWP}pages?_embed`)\n            .then(\n                response => response.json(),\n                error => console.error('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                //log('json pages', json)\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json => { \n                // do NOT receivePages until there are pages!\n                dispatch(receivePages(json)) \n            })\n    }\n}","import * as types from './types'\nimport { languages } from './index'\n\nconst nodeWP = 'http://178.128.7.239/'\nconst endpointWP = 'wp-json/wp/v2/'\n\n/* ******************************************\nPOSTS\nwp posts for home page content\n********************************************/\n\nfunction requestPosts() {\n    return {\n        type: types.REQUEST_POSTS\n    }\n}\n\nfunction receivePosts(json) {\n    return {\n        type: types.RECEIVE_POSTS,\n        posts: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchPosts() {\n    return function(dispatch) {\n        dispatch(requestPosts())\n        return fetch(`${nodeWP}${endpointWP}posts?_embed`)\n            .then(\n                response => response.json(),\n                error => console.error('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json =>\n                dispatch(receivePosts(json))\n            )\n    }\n}","export const log = (...msgs) => {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.log(...msgs)\n\t}\n}\n\n// return a unique map\nexport const uniqBy = (a, key) => {\n    return [\n        ...new Map(\n            a.map(x => [key(x), x])\n        ).values()\n    ]\n}\n\n// using hash tables and filter\nexport const uniq = (a) => {\n    var prims = {\"boolean\":{}, \"number\":{}, \"string\":{}}, objs = [];\n\n    return a.filter(function(item) {\n        var type = typeof item;\n        if(type in prims)\n            return prims[type].hasOwnProperty(item) ? false : (prims[type][item] = true);\n        else\n            return objs.indexOf(item) >= 0 ? false : objs.push(item);\n    });\n}\n\n// ES6 sort\nexport const sortNestedES6 = (nestedItem, prop, arr) => {\n    return arr.sort((a, b) => {\n        return a[nestedItem][prop].localeCompare((b[nestedItem][prop]))\n    })\n}\n\n\n// arr is the array of objects, prop is the property to sort by\nexport const sortNested = (nestedObj, prop, arr) => {\n    return arr.sort((a, b) => {\n        if (a[nestedObj][prop] < b[nestedObj][prop]) {\n            return -1;\n        } else if (a[nestedObj][prop] > b[nestedObj][prop]) {\n            return 1;\n        } else {\n            return 0;\n        }\n    })\n}\n","//import React from 'react'\nimport { log } from '..'\n\n// NOTES *********************************************\nexport const unpackNotes = (arr, notesArray = [], possibleIDs = []) => {\n    \n    if(arr == null) {\n        return null\n    } else if(Array.isArray(arr)) {\n        \n        arr.map((a) => {\n            if(typeof a === 'object') {\n                return unpackNotes(a, notesArray, possibleIDs)\n            } \n        })\n\n    } else if(typeof arr === 'object') {\n        \n        if('noteText' in arr) {\n            //log('note object', arr.noteText)\n            if('@value' in arr.noteText) {\n                //log(arr.noteText['@value'].toLowerCase().includes('nlmid'), arr.noteText['@value'])\n                if(arr.noteText['@value'].toLowerCase().includes('nlmid')) {\n                    //grabNLMID(arr.noteText['@value'])\n                    possibleIDs.push(arr.noteText['@value'])\n                } else {\n                    notesArray.push(arr.noteText['@value'])\n                }\n            }\n            \n        }\n    } else if(typeof arr === 'string') {\n        //log('notes string', arr)\n    }\n    //log('the notes array', notesArray)\n    let id = possibleIDs.find(a =>a.toLowerCase().includes(\"nlmid\"))\n    return { parsedNotes: notesArray.sort(), nlmIDs: id == null ? null : id }\n\n}","import React from 'react'\nimport { log } from '../index'\n\nconst namesOfInterest = ['primary', 'personal']\n\nexport const unpackPersonName = (arr) => {\n    if(arr == null) {\n        return null\n    } else if(Array.isArray(arr)) {\n        return arr.map((a, i) => {\n            if(typeof a === 'object') {\n                return unpackPersonName(a)\n            } else if(a.substring(0,3) === 'bdr') {\n                return (\n                    <div key={i} className=\"card-sub-item\">\n                        <div>{a}</div>\n                    </div> \n                )\n            } else {\n                return ( <div key={i} className=\"card-sub-item\">{a}</div>)\n            }\n            \n        })\n    } else if (typeof arr === 'object') {\n        // re-factor to allow for retreival of '@value' from any key\n        if(arr.hasOwnProperty('type')) {\n            if(namesOfInterest.some(s => arr.type.toLowerCase().includes(s))) {\n                return unpackNames(arr, arr.type)\n            }\n        } else {\n            return (\n                <p key={arr['@value']} className=\"meta-item\">\n                    <span className=\"meta-title\">{arr['@value']}</span>\n                </p>\n            )\n        }\n        \n    } else if (typeof arr === 'string') {\n        if(arr.substring(0,3) === 'bdr') {\n            return ( <div onClick={() => this.showModal(arr.split(\":\")[1])}>{arr}</div> )\n        } else {\n            return arr\n        }\n        \n    }\n}\n\nexport const unpackNames = (arr, type) => {\n    \n    if(Array.isArray(arr['rdfs:label'])) {\n        \n        const a = arr['rdfs:label'].sort().map((l, i) => {\n            return (\n                <div key={i}>\n                    <span className=\"meta-italics\">({l['@language']}): </span>\n                    <span className=\"meta-title\">{l['@value']}</span>\n                </div>\n            )}\n        )\n\n        return (\n            <div key={type} className=\"meta-item with-fa\">\n                <span className=\"meta-detail\">{type.substring(6)}:</span>\n                {a}\n            </div>\n        )\n\n    } else {\n        return (\n            <p key={type} className=\"meta-item with-fa\">\n                <span className=\"meta-detail\">{type.substring(6)}: </span>\n                <span className=\"meta-italics\">({arr['rdfs:label']['@language']}): </span>\n                <span className=\"meta-title\">{arr['rdfs:label']['@value']}</span>\n            </p>\n        )\n    }\n}","import { log, bdrPurlURL } from '../../actions'\n\nexport const unpackPersonEvent = (arr, lifeEvents = [], workEvents = []) => {\n    let events = []\n    if(arr == null) {\n        return null\n\n    } else if(Array.isArray(arr)) {\n        \n        arr.map((a) => {\n            if(typeof a === 'object') {\n                return unpackPersonEvent(a, lifeEvents, workEvents)\n            } \n        })\n\n    } else if (typeof arr === 'object') {\n        \n        if(arr.type === 'PersonBirth' || arr.type === 'PersonDeath') {\n            const typeEvent = arr.type.includes('Birth') ? 'Born' : 'Died'\n            if('onYear' in arr) {\n                lifeEvents.push(`${typeEvent} in ${arr.onYear}`)\n            } else if(Object.keys(arr).some((k) => { return ~k.indexOf(\"not\") })){\n                lifeEvents.push(`${typeEvent} between ${arr.notBefore} and ${arr.notAfter}`)\n            }\n        } else if(arr.type === 'PersonOccupiesSeat') {\n            if('eventWhere' in arr) {\n                workEvents.push({ _id: arr.eventWhere.substring(4), _url: `${bdrPurlURL}${arr.eventWhere.substring(4)}.ttl`})\n            }\n            \n        }\n\n    }\n    \n    events.push(lifeEvents.sort())\n    events.push(workEvents.sort())\n    //log(events)\n    return events    \n}\n\nexport const unpackPersonEventObj = (arr, lifeEvents = [], workEvents = []) => {\n    if(arr.type === 'PersonBirth' || arr.type === 'PersonDeath') {\n        const typeEvent = arr.type.includes('Birth') ? 'Born' : 'Died'\n        if('onYear' in arr) {\n            lifeEvents.push(`${typeEvent} in ${arr.onYear}`)\n        } else if(Object.keys(arr).some((k) => { return ~k.indexOf(\"not\") })){\n            lifeEvents.push(`${typeEvent} between ${arr.notBefore} and ${arr.notAfter}`)\n        }\n    } else if(arr.type === 'PersonOccupiesSeat') {\n        if('eventWhere' in arr) {\n            workEvents.push(arr.eventWhere)\n        }\n        \n    }\n}","import { log } from '../../actions'\n\nexport * from './bdrcNotes'\nexport * from './bdrcPerson'\nexport * from './bdrcPersonEvent'\n\nexport const unpackOntology = (arr, stringArray = []) => {\n    //log('unpacking ontology', arr)\n    if(arr == null) {\n        return null\n    } else if(Array.isArray(arr)) {\n        arr.map((a, i) => {\n            if(typeof a === 'object') {\n                return unpackOntology(a, stringArray)\n            } else if(a.substring(0,3) === 'bdr') {\n                stringArray.push(a)\n            } else {\n                stringArray.push(a)\n            }\n            \n        })\n        return stringArray\n    } else if (typeof arr === 'object') {\n        if('@value' in arr) {\n            return arr['@value']\n        }\n        \n    } else if (typeof arr === 'string') {\n        if(arr.substring(0,3) === 'bdr') {\n            return arr\n        } else {\n            return arr\n        }\n    }\n}","import { SET_LANG, SET_PAGE, SET_COLLAPSE, SET_BROWSE, SET_COLLECTION } from './types'\n\nexport * from './searchActions'\nexport * from './googleSheetsActions'\nexport * from './WPPagesActions'\nexport * from './WPPostsActions'\nexport * from './utilityActions'\nexport * from './ontology'\n\nexport const buildYear = '2018'\nexport const defaultLanguage = 'en'\nexport const languages = {\n  en: \"English\",\n  mn: \"Mongolian\"\n}\n\nexport const pages = [ 'home', 'archives' ]\n\n\nexport const browseOptions = ['Title', 'Author', 'Subject']\nexport const browseOptionsObj = [\n  {browse: 'Title', stateType: 'esWorks'},\n  {browse: 'Author', stateType: 'esAuthors'},\n  {browse: 'Subject', stateType: 'esSubjects'}\n]\n\nexport const bdrGender = {\n  \"bdr:GenderMale\": \"Male\",\n  \"bdr:GenderFemale\": \"Female\"\n}\n\nexport const bdrObjectType = {\n  \"bdr:ObjectTypeBlockprint\": \"Blockprint\"\n}\n\nexport const bdrPurlURL = `http://purl.bdrc.io/resource/`\n\nexport const collections = [\n  {key: '1', name: 'Collection 1'},\n  {key: '2', name: 'Collection 2'}\n]\n\nexport const searchParams = {\n  initialIndex: 'v1_bdrc_work',\n  initialIndexPrefix: 'v1_bdrc_',\n  type: '_doc',\n  size: 10\n}\n\nexport const v1Indices = ['v1_*']\nexport const v2Indices = ['v2_*']\n\nconst IIIFImageAPI = {\n  region: 'full',\n  size: 'max', \n  rotation: '0',\n  qualityAndFormat: 'default.jpg'\n}\n\nexport const IIIFsuffix = \n  `/${IIIFImageAPI.region}/${IIIFImageAPI.size}/${IIIFImageAPI.rotation}/${IIIFImageAPI.qualityAndFormat}`\n\nexport const setLanguage = language => ({\n  type: SET_LANG,\n  language\n})\n\nexport const setLanguage2 = (language, i18n) => {\n  i18n.changeLanguage(language)\n  return {\n    type: SET_LANG,\n    language\n  }\n}\n\nexport const setPage = page => ({\n    type: SET_PAGE,\n    page\n})\n\nexport const setCollapse = collapse => ({\n  type: SET_COLLAPSE,\n  collapse\n})\n\nexport const setCollection = collection => ({\n  type: SET_COLLECTION,\n  collection\n})\n\nexport const setBrowse = browse => ({\n  type: SET_BROWSE,\n  browse\n})","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport { defaultLanguage, setLanguage } from '../../store/actions'\n\nimport '../../assets/css/navbar.css'\n\nconst Language = ({ active, children, dispatch, lang, i18n }) => {\n    \n    const changeI18n = (lng) => { i18n.changeLanguage(lng) }\n  \n    return (\n        <li\n            key={ children }\n            onClick={() => {\n                dispatch(setLanguage(lang, i18n))\n                changeI18n(lang)\n            }}\n            className={ active ? \"lang-active\" : \"lang\" }\n        >\n            <button\n                key={ children }\n                disabled={ active ? true : false }\n                className=\"btn-lang\">\n                    { children }\n            </button>\n        </li>\n    )\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedLanguage === state.selectedLanguage,\n  lang: ownProps.selectedLanguage || defaultLanguage\n})\n\nconst withN = new withNamespaces()(Language)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { withNamespaces } from 'react-i18next'\nimport Language from './containers/Language'\n\nimport '../assets/css/navbar.css'\n\n// language codes, ISO 639-1\n// mongolian - mn, english - en, tibetan - bo\nconst Languages = (props) => {\n    \n    let list = []\n    \n    list = Object.entries(props.t('languages')).map(([k, l]) => {\n        //const p = props.page === 'home' ? '' : `/${props.t('pages')[props.page]}`\n        const p = props.page === 'home' ? '' : `/${props.page}`\n        return (\n            <Link key={k} to={`/${k}${p}`} >\n                <Language key={l} selectedLanguage={k}>\n                    {l}\n                </Language>\n            </Link>\n        )\n    })\n\n    return ( <ul className=\"language-list\">{list}</ul> )\n    \n}\n\nconst mapStateToProps = (state) => ({ page: state.selectedPage })\n\nconst withN = new withNamespaces()(Languages)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { setPage } from '../../store/actions'\nimport { connect } from 'react-redux'\nimport '../../assets/css/navbar.css'\n\nconst NavItem = ({ active, children, onClick }) => (\n    <li\n      key={children}\n       onClick={active ? null : onClick}\n       className={active ? \"nav-active\" : \"nav\"}\n       style={active ? \n        { color: 'red', } :\n        { color: 'black', } \n        }\n    >\n    <button\n      key={children}\n      disabled={active ? true : false}\n      className=\"btn-nav\">\n      {children}\n    </button>\n    </li>\n)\n\nNavItem.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\n\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedPage === state.selectedPage\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    onClick: () => dispatch(setPage(ownProps.selectedPage)) \n  });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NavItem)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport NavItem from './containers/NavItem'\nimport { withNamespaces } from 'react-i18next'\nimport '../assets/css/navbar.css'\n\nconst NavBar = ({ navigation, match, t}) => {\n  \n  if(navigation ==  null) { return null }\n  // THIS NAV BAR GETS RENDERED TOO MUCH, NEED TO REFACTOR, MEMOIZE!\n    const slugs = navigation.map(nav => {\n      const p = nav.match === 'home' ? '' : `/${nav.match}`\n        return (\n          <Link key={nav.slug} to={`/${match.params.lng}${p}`}>\n            <NavItem key={nav.slug} selectedPage={nav.match}>\n              {t('pages')[nav.match]}\n            </NavItem>\n          </Link>\n        )\n      })\n\n    return (\n\t\t<ul className=\"nav-list\">\n\t\t\t{slugs}\n\t\t</ul>\n    )\n\n}\n\n// $$$ MEMOIZE\nconst createNavigation = (pages) => {\n    return pages.map(c => {\n        return {\n          //match: c.slug.substring(0,4),\n          match: c.slug.split('-')[0],\n          slug: c.slug,\n          //title: c.slug.substring(0,4) ==='home' ? 'Home' : c.title.rendered,\n          //order: c.menu_order\n        }\n      })\n}\n\nconst mapStateToProps = (state) => ({\n    navigation: state.pages.isFetching ? null : createNavigation(state.pages.items[state.selectedLanguage])  \n})\n\nconst withN = new withNamespaces()(NavBar)\nexport default connect(mapStateToProps)(withN)","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\nimport { defaultLanguage, setLanguage, log } from '../store/actions/index'\n\nclass Page extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.setNumber = {\n      0: 'one',\n      1: 'one',\n      2: 'two',\n      3: 'three',\n      4: 'four'\n    }\n\n    this.rgbLight = [239, 239, 239]\n    this.rgbDark = [0, 0, 0]\n    \n  }\n\n  resetPage = () => {\n    this.props.dispatch({ type: 'SET_PAGE', page: 'home' });\n    this.props.i18n.changeLanguage(defaultLanguage) // change locale\n    this.props.dispatch(setLanguage(defaultLanguage)) // set redux language\n  }\n\n  renderPage(selectedPage, pages) {\n    if (!pages.some(e => e.slug.split('-')[0] === selectedPage)) {\n      log('page not there');\n      this.resetPage();\n    }\n    return pages\n      .filter(page => page.slug.split('-')[0] === selectedPage)\n      .map((page, i) => {\n        let mediaURL = null\n        if(page._embedded[\"wp:featuredmedia\"]) {\n          mediaURL = page._embedded[\"wp:featuredmedia\"][0].source_url\n        }\n        // `linear-gradient(to bottom, \n        //     rgba(${this.rgbLight},0.1) 70%,\n        //     rgba(${this.rgbLight},1.0) 100%), \n        return (\n          <div key={page.slug}>\n            <section \n              id=\"banner\" \n              key={page.id}\n              style={{\n                backgroundImage: `url(${mediaURL})`\n              }}>\n              <header className=\"major\">\n                <h1>{page.acf.title}</h1>\n                <h3>{page.acf.subtitle}</h3>\n                <div className=\"inner-page\">\n                  <section className=\"spotlights-page\">\n                    <p dangerouslySetInnerHTML={{__html: page.content.rendered}} />\n                  </section>\n                </div>\n              </header>\n            </section>\n          </div>\n        )\n    })\n  }\n\n  render() {\n   \n    if(this.props.fetchingWP) {\n        return (\n          <div className=\"blinky\">{this.props.t('technical.loading')}</div>\n        )\n    }\n    return (\n      <div className=\"container\">\n        \n        { this.renderPage(this.props.selectedPage, this.props.pages) }\n        \n      </div>\n    )\n  }\n\n}\n\nconst mapStateToProps = (state) => ({\n    fetchingWP: (state.pages.isFetching || state.posts.isFetching),\n    selectedLanguage: state.selectedLanguage || defaultLanguage,\n    selectedPage: \n      state.pages.isFetching \n      ? [] \n      : state.pages.items[state.selectedLanguage].some(page => page.slug.split('-')[0] === state.selectedPage) \n      ? state.selectedPage \n      : \"home\",\n    pages: state.pages.isFetching ? [] : state.pages.items[state.selectedLanguage]\n})\n\nconst withN = new withNamespaces()(Page)\nexport default connect(mapStateToProps)(withN);","import React from 'react'\n\nimport Languages from './Languages'\nimport Nav from './Nav'\nimport Page from './Page'\n\nimport '../assets/css/header.css'\n\nexport default({ history, match }) => {\n    \n    return (\n        <div className=\"wrapper\">\n            <header id=\"header\">\n                <Languages />\n                <Nav history={history} match={match} />\n            </header>\n            <Page history={history} />\n        </div>\n    )\n}","import React from 'react'\nimport { withNamespaces } from 'react-i18next'\nimport { onlyIP, buildYear } from '../store/actions'\n\nimport '../assets/css/footer.css'\n\nconst Footer = ({t}) => {\n    return (\n        <footer id=\"footer\">\n            <div className=\"icon\">\n              <img \n                src={`http://${onlyIP}/wp-content/uploads/2018/10/nlm-logo-no-text.png`} \n                alt=\"mongolia-logo\" />\n            </div>\n            {/* <ul className=\"alt-icons\">\n                <li><a href=\"#1\" className=\"icon fa-twitter\"><span className=\"label\">Twitter</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-facebook\"><span className=\"label\">Facebook</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-linkedin\"><span className=\"label\">LinkedIn</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-github\"><span className=\"label\">GitHub</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-phone\"><span className=\"label\">Phone</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-envelope\"><span className=\"label\">Email</span></a></li>\n            </ul> */}\n            <ul className=\"menu\">\n                <li>\n                    <a \n                        href=\"mailto:info@asianclassics.org\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\">\n                            {t('footer.contact')}\n                    </a>\n                </li>\n                <li>\n                    <a \n                        href=\"http://nationallibrary.mn/mn/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\">\n                            {t('footer.library-site')}\n                    </a>\n                </li>\n                <li>\n                    <a \n                        href=\"http://178.128.7.239/wp-login.php\" \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\">\n                            {t('footer.login')}\n                    </a>\n                </li>\n            </ul>\n            <p className=\"copyright\">\n                &copy; {`${buildYear} ${t('title')}. ${t('footer.rights')}.`}\n            </p>\n        </footer>\n    )\n}\n\nexport default withNamespaces()(Footer)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport { setBrowse, browseOptionsObj } from '../store/actions'\n\nimport '../assets/css/sidebar.css'\n\nclass Sidebar extends Component {\n\n    render() {\n        return (\n            <div className=\"sidenav wrapper style1\">\n                <div className=\"sidenav-title\">{`${this.props.t('sidebar.browse')}:`}</div>\n                <form>\n\n                    {browseOptionsObj.map(o => {\n                        //o.browse === 'Title' ? log(this.props[`number_${o.stateType}`]) : log('hi')\n                        let n = this.props[`number_${o.stateType}`] == null ? this.props.t('technical.loading') : this.props[`number_${o.stateType}`]\n                        return (\n                            <div key={o.browse} className=\"col-4 col-12-small\">\n                                <input\n                                    id={o.browse}\n                                    type=\"radio\"\n                                    value={o.browse}\n                                    checked={this.props.browse === o.browse}\n                                    onChange={(e) => this.props.dispatch(setBrowse(e.target.value))}\n                                />\n                                <label htmlFor={o.browse}>{this.props.t(`browse.${o.browse}`)}</label>\n                                <span className=\"meta-count\">({n})</span>\n                            </div>\n                        )\n                    })}\n\n                </form>\n                    \n            </div>\n        )\n    }\n}\n\nconst getNumberOfItems = (data, filter) => {\n    let d\n    if(filter) {\n        d = data.aggregations.collections.buckets.find(t => t.key === 2)\n        d = d.doc_count\n    } else {\n        d = data.hits.total\n    }\n    return d \n}\n\nconst mapStateToProps = (state) => ({\n    browse: state.setBrowse,\n    number_esWorks: state.esWorks.isFetching ? null : getNumberOfItems(state.esWorks.items, state.setCollection),\n    number_esAuthors: state.esAuthors.isFetching ? null : getNumberOfItems(state.esAuthors.items, state.setCollection),\n    number_esSubjects: state.esSubjects.isFetching ? null : getNumberOfItems(state.esSubjects.items, state.setCollection)\n})\n\nconst withN = new withNamespaces()(Sidebar)\nexport default connect(mapStateToProps)(withN)","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport '../assets/css/items.css'\n\nconst SubItems = ({related, handleShowModal, match}) => {\n    \n    if(related == null) {\n        return null\n    }\n\n    const lang = match.params.lng\n\n    const relatedItems = related.hits.hits.map((d, i) => {\n        \n        return (\n            <Link \n                key={i} \n                to={{\n                    pathname: `/${lang}/archives/doc/${d._id}`,\n                    // this is the trick!\n                    state: { label: d._tid }\n                }}\n                className=\"subitems card-item-link\"\n                onClick={() =>  handleShowModal(d._id)}\n            >\n                {d._tid}\n            </Link>\n        )\n    })\n    \n    return (\n        <div>\n            {relatedItems}\n        </div>\n    )\n}\n\nexport default SubItems\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport { withNamespaces } from 'react-i18next'\n\nimport SubItems from './SubItems'\nimport { fetchSpecificID, browseOptionsObj } from '../store/actions'\n\nimport '../assets/css/items.css'\n\nclass Items extends Component {\n\n    // fetch ID from ES and show modal\n    handleShowModal = (doc_id) => {\n        this.props.dispatch(fetchSpecificID(doc_id))\n        this.props.dispatch(\n            { type: 'DETAIL_MODAL', modalID: doc_id, show: true, initialRender: false }\n        )\n    }\n\n    render() {\n        \n        let lang = this.props.match.params.lng\n        let currentESdata = browseOptionsObj.find(x => x.browse === this.props.browse)\n\n        if(!this.props[currentESdata.stateType].length) {\n            return (\n                <div className=\"blinky\">\n                    {this.props.t('technical.loading-simple')} {this.props.t(`browse.${currentESdata.browse}-plural`)}\n                </div>\n            )\n        }\n\n        const items = this.props[currentESdata.stateType].map((d, i) => {\n            \n            return (\n                <div key={i} className=\"item\">\n                    <Link \n                        to={{\n                            pathname: `/${lang}/archives/doc/${d._id}`,\n                            // this is the trick!\n                            state: { label: d._tid }\n                        }}\n                        className=\"item-title card-item-link\"\n                        onClick={() => this.handleShowModal(d._id)}\n                    >{d._tid}\n                    </Link>\n                    \n                    { d._related ? \n                        <SubItems \n                            key={d._id}\n                            match={this.props.match}\n                            related={d._related}\n                            handleShowModal={this.handleShowModal}\n                        /> : null }\n                        \n                </div>\n            )\n        })\n    \n        return ( <div>{items}</div> )\n        \n    }\n\n    \n}\n\n// pseudo-selector, rewrite this using re-select package (selectors)\nconst getCurrentData = (data, filter) => {\n    if(filter) {\n        return data.filter(t => t._source._collection === 2)\n    } else {\n        return data\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    esWorks: state.esWorks.isFetching ? [] : getCurrentData(state.esWorks.items.hits.hits, state.setCollection),\n    esAuthors: state.esAuthors.isFetching ? [] : getCurrentData(state.esAuthors.items.hits.hits, state.setCollection),\n    esSubjects: state.esSubjects.isFetching ? [] : getCurrentData(state.esSubjects.items.hits.hits, state.setCollection),\n    browse: state.setBrowse,\n    collapse: state.setCollapse,\n    collection: state.setCollection,\n    doc_id: state.detailModal.modalID,\n    showModal: state.detailModal.show\n})\n\n\nconst withN = new withNamespaces()(Items)\nexport default connect(mapStateToProps)(withN)\n//export default Items","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport Sidebar from './Sidebar'\nimport Items from './Items'\n\nimport '../assets/css/archives.css'\n\nconst Archives = ({t, browse, match, history}) => {\n    return (\n            <div className=\"content\">\n                <Sidebar />\n                <div className=\"grid\">\n                    <h1 className=\"archives-title\">{`${t(`browse.${browse}`)}s`}</h1>\n                    <Items match={match} history={history} />\n                </div>\n            </div>\n        )\n    }\n\nconst mapStateToProps = (state) => ({\n    browse: state.setBrowse\n})\n\nconst withN = new withNamespaces()(Archives)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\nimport img from '../assets/images/UB-woodblock-closeup.jpg'\nimport '../assets/css/stats.css'\n\nclass Stats extends Component {\n    \n    render() {\n        let statList\n        const { stats, t } = this.props\n\n        if(Object.entries(stats).length === 0 && stats.constructor === Object) {\n            statList = (<div className=\"blinky\">{t('technical.loading')}</div>)\n        } else {\n            statList = (\n                <ul className=\"list-stats\">\n                    <li className=\"stat-item\">\n                        <p>{t('stats.LastUpdate')}: <em>{stats.LastUpdate}</em></p>\n                    </li>\n                    <li className=\"stat-item\">\n                    <p>{t('stats.PagesDigitized')}: <em>{stats.PagesDigitized}</em></p>\n                    </li>\n                    <li className=\"stat-item\">\n                    <p>{t('stats.VolumesDigitized')}: <em>{stats.VolumesDigitized}</em></p>\n                    </li>\n                    <li className=\"stat-item\">\n                    <p>{t('stats.VolumesCataloged')}: <em>{stats[\"VolumesCataloged(normalized)\"]}</em></p>\n                    </li>\n                    <li className=\"stat-item\">\n                    <p>{t('stats.TitlesCataloged')}: <em>{stats[\"TitlesCataloged(ACIP)\"]}</em></p>\n                    </li>\n                </ul>\n            )\n        }\n    \n        return (\n            <section className=\"wrapper special style3\">\n                <div className=\"inner\">\n                    <section className=\"spotlights\">\n                        <section>\n                            <h2>{t('stats.Title')}</h2>\n                            {statList}\n                        </section>\n                        <section>\n                            <span className=\"image\"><img src={img} alt=\"\" /></span>\n                        </section>\n                    </section>\n                </div>\n            </section>\n        )\n    }\n    \n    \n}\n\nconst mapStateToProps = (state) => ({\n    stats: state.gsData.isFetching ? {} : state.gsData.gs\n})\n\nconst withN = new withNamespaces()(Stats)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { sortNested } from '../store/actions'\nimport '../assets/css/posts.css'\n\n\n\nconst Posts = ({ posts }) => {\n    if(!posts) { return null }\n\n    //const c = sortNested('acf', 'order', posts)\n    \n    return posts.map((post, i) => {\n\n        //strange method to make alternating styles\n        let j = i % 2 === 0 ? 1 : 3;\n        \n        let mediaURL = \"\"\n        if(post._embedded[\"wp:featuredmedia\"]) {\n            mediaURL = post._embedded[\"wp:featuredmedia\"][0].source_url || \"\"\n        }\n\n        if(parseInt(post.acf.columns) === 2) {\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                            </section>\n                            <section>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n            )\n        } else {\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights col1\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n            )\n        }\n    })  \n}\n\nconst mapStateToProps = (state) => ({\n    fetchingPosts: state.posts.isFetching,\n    selectedLanguage: state.selectedLanguage,\n    posts: state.posts.isFetching ? [] : sortNested('acf', 'order', state.posts.items[state.selectedLanguage])\n})\n\nexport default connect(mapStateToProps)(Posts)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport i18n from 'i18next'\nimport { withNamespaces } from 'react-i18next'\nimport { log, IIIFsuffix, injectSinglePrefLabel,\n    unpackPersonEvent, unpackPersonName, \n    unpackNotes, unpackOntology,\n    bdrGender, bdrObjectType, uniq } from '../store/actions'\nimport '../assets/css/modal.css'\n\nclass Modal extends Component {\n\n    handleHideModal = (initialRender, e) => {\n        \n        this.props.dispatch({ type: 'DETAIL_MODAL', show: false})\n        this.props.dispatch({ type: 'NULLIFY_IIIF'})\n\n        \n        if(initialRender) {\n            this.props.history.push(`/${i18n.language}/archives`)\n        } else {\n            this.props.history.goBack()\n        }\n        \n\n        e.stopPropagation()\n    }\n\n    buildImg = (t, access, _img) => {\n        let img = null\n        if(access === 'bdr:AccessRestrictedSealed') {\n            img = ( \n                <div>{t('modal.image-restricted')}</div> \n            )\n        } else if(_img === 'Not Found') {\n            img = (\n                <div>{t('modal.image-not-found')}</div>\n            )\n        } else if(_img == null) {\n            img = (\n                <div className=\"blinky\">{t('technical.loading-image')}</div>\n            )\n        } else {\n            img = (\n                <img src={`${_img}/${IIIFsuffix}`} width=\"100%\" alt=\"scan\" />\n            )\n        }\n        return img\n    }\n\n    buildWorkMetadata = (source, t) => {\n        let {\n            workExtentStatement,\n            workLangScript,\n            workNumberOfVolumes,\n            workObjectType,\n            workPublisherName\n        } = source\n\n        let objectType = workObjectType ? unpackOntology(workObjectType) : null\n        let pubName = workPublisherName ? unpackOntology(workPublisherName) : null\n        //let pubLoc = workPublisherLocation ? <span>{` at ${workPublisherLocation}`}</span> : null\n        return (\n            <ul className=\"meta-detail-list\">\n                {!objectType ? null : <li className=\"meta-item all-caps\">{t('modal.meta-print-type')}: <span className=\"no-trans\">{bdrObjectType[objectType]}</span></li>}\n                \n                {!pubName ? null : <li className=\"meta-item all-caps\">{t('modal.meta-published-by')}: <span className=\"no-trans\">{pubName}</span></li>}\n                {!workExtentStatement ? null : \n                    <li className=\"meta-item all-caps\">{t('modal.meta-work-extent')}: <span className=\"no-trans\">{workExtentStatement}, in {workNumberOfVolumes} volume(s)</span></li>\n                }\n                {!workLangScript ? null : <li className=\"meta-item all-caps\">{t('modal.meta-language')}: <span className=\"no-trans\">{workLangScript}</span></li>}\n            </ul>\n        )\n    }\n\n    buildAttribution = (t) => {\n        return (\n            <p className=\"meta-detail\">\n                <span>{t('archives.attribution')}</span>\n            </p>\n        )\n    }\n\n    buildScansBtn(access, t, manifestURL) {\n        let btn = null\n        if(manifestURL == null) {\n            return null\n        }\n        if(manifestURL !== undefined) {\n            //window.localStorage.setItem(\"manifestURL\", this.props.manifestURL)\n            if(manifestURL.length === 0) {\n                //window.localStorage.setItem(\"manifestURL\", \"\")\n                btn = null\n            } else if(access === 'restricted') {\n                btn = (\n                    <button disabled={true}>\n                        <i className=\"fa fa-2x fa-eye-slash\"></i> {t('modal.scans-restricted')}\n                    </button>\n                )\n            } else {\n                btn = ( \n                    <a \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        href={process.env.PUBLIC_URL + '/uv.html?manifest=' + manifestURL}>\n                        <button>\n                            <i className=\"fa fa-2x fa-eye\"></i> {t('modal.scans')}\n                        </button>\n                    </a>\n                )\n            }\n        }\n        return btn\n    }\n\n    parseModalDetails = ({ workDetail, label, t }) => {\n        // vars common to all types\n        let source = workDetail._source\n        let { \n            '@id': id,\n            type,\n            note,\n            _firstImageURL, \n            _manifestURL, \n            'adm:access': _access\n        } = source\n\n        if(!label && source['skos:prefLabel']) {\n            label = injectSinglePrefLabel(source['skos:prefLabel'])\n        }\n        //log('modal', showing)\n        // map returned bdrc type to localization\n        const typet = Object.keys(t('bdrc-ontology')).find(t => t === type.toLowerCase())\n\n        //set access to restricted if needed\n        const access = _access == null || !_access.toLowerCase().includes('restricted') ? null : 'restricted'\n\n        //if truthy, unpack, also nlm id is found in the notes section\n        let parsedNotes = null, nlmIDs = null\n        if(note) { ({ parsedNotes, nlmIDs } = unpackNotes(note)) }\n        parsedNotes = !parsedNotes || !parsedNotes.length ? null : uniq(parsedNotes)\n        // using react fragment here, look into what it does...\n        const notes = !parsedNotes || !parsedNotes.length ? null : (\n            <div className=\"meta-grouping\"> \n                { parsedNotes.map((s, i) => \n                    <React.Fragment key={i}>\n                        <p className=\"meta-item with-fa-note\">{s}</p>\n                    </React.Fragment>)\n                }\n            </div> \n        )\n        // ultimately use this block to fetch proper attribution from data\n        // workBiblioNote or workScanInfo\n        const attribution = this.buildAttribution(t)\n\n        // CLOSE BUTTON\n        const closeBtn = (\n            <button className=\"modal-btn\" onClick={(e) => this.handleHideModal(this.props.initialRender, e)}>\n                <i className=\"fa fa-2x fa-times\"></i> \n                { this.props.initialRender ? t('technical.btn-view') : t('technical.btn-close') }\n            </button>\n        )\n\n        // META DETAILS, like type and IDs\n        const metaDetail = (\n            <div className=\"meta-detail\">\n                <p className=\"meta-item\">\n                    <span>{t('modal.detail')} {id}, </span>\n                    <span> {t(`bdrc-ontology.${typet}`)}</span>\n                </p>\n                { nlmIDs == null ? null : \n                <p className=\"meta-item\">\n                    <span>NLM ID: {nlmIDs.substring(7).trim()}</span>\n                </p>\n                }\n            </div>\n        ) \n\n        // Render modal depending on type\n        switch(type) {\n            case 'Person':\n                //vars specific to PERSON\n                let {\n                    personEvent,\n                    personName,\n                    personGender\n                } = source\n\n                const buildPersonalDetails = (gender, lifeEvents) => {\n                    return [gender, lifeEvents].map((d, i) => {\n                        if(d) { return <p key={i} className=\"meta-item\">{ d }</p> }\n                    })\n                }\n\n                const buildWorkEvents = (events) => {\n                    //log('build work pre', events)\n                    const ev = events.map((e, i) => {\n                        return (\n                            <span key={i} className=\"spacer\">\n                                <a href={e._url} target=\"_blank\" rel=\"noopener noreferrer\">{e._id}</a>\n                            </span>\n                        )\n                    })\n                    //log('build work events', ev)\n                    return ev\n                }\n\n                // EVENTS\n                const events = personEvent == null ? null : unpackPersonEvent(personEvent)\n                let lifeEvents = null, workEvents = null\n                //log('what does event array look like?', events)\n                if(events) {\n                    lifeEvents = events[0].length > 0 ? uniq(events[0]).join(', ') : null\n                    workEvents = events[1].length > 0 ? buildWorkEvents(events[1]) : null\n                }\n\n                //log('workEvents', workEvents)\n                // GENDER\n                let gender = personGender == null ? null : `${t('gender.gender')}: ${t(`gender.gender-${bdrGender[personGender]}`)}`\n\n                //workEvents = workEvents == null ? null : workEvents\n                let personalDetails = gender || lifeEvents ?\n                    buildPersonalDetails(gender, lifeEvents) : null\n                \n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{label}</div>\n\n                        {!personalDetails ? null : <div className=\"meta-detail\">{personalDetails}</div> }\n                        {!workEvents ? null : <div className=\"meta-detail\">{t('modal.geography-associated-places')}:{workEvents}</div>}\n                        <div className=\"meta-grouping\">\n                            { unpackPersonName(personName) }\n                        </div>\n                        { notes }\n                        {closeBtn}\n                    </div>\n                )\n            case 'Topic':\n                //vars specific to TOPIC, nothing noted as unique to TOPIC\n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{label}</div>\n                        { notes }\n                        {closeBtn}\n                    </div>\n                )\n            case 'Work':\n                //vars specific to WORK\n                \n                let scanBtn = this.buildScansBtn(access, t, _manifestURL)\n                let img = this.buildImg(t, access, _firstImageURL)\n\n                let workMetadata = this.buildWorkMetadata(source, t)\n\n                let catalog = unpackOntology(source.workCatalogInfo)\n\n                const catalogInfo = !catalog ? null : (\n                    <div className=\"meta-catalog\">\n                            <p className=\"modal-text\">\n                                <span className=\"meta-title\">{ catalog }</span>\n                            </p>\n                        </div>\n                )\n\n                return (\n                    <div className=\"detail-data\">\n                        <div className=\"modal-title\">{label}</div>\n                        \n                        {metaDetail}\n                        \n                        {img}\n                        {attribution}\n                        \n                        { catalogInfo }\n                        { workMetadata }\n                        { notes }\n                        {closeBtn}{scanBtn}\n                    </div>\n                )\n            default:\n                return null\n        }\n    }\n\n    render() {\n        log('modal is being rendered...more than once? need memoized selector!', this.props)\n        let showHideClassName = this.props.show ? 'modal display-block' : 'modal display-none';\n        \n\n        if(Object.keys(this.props.workDetail).length === 0) {\n            return (\n                <div className={showHideClassName}>\n                    <section className='modal-main'>\n                        <div className=\"blinky\">{this.props.t('technical.loading')} {this.props.doc_id}</div>\n                        <button className=\"modal-btn\" onClick={this.props.hideModal}>\n                            <i className=\"fa fa-2x fa-times\"></i> \n                            { this.props.initialRender ? this.props.t('technical.btn-view') : this.props.t('technical.btn-close') }\n                        </button>\n                    </section>\n                </div>\n            )\n        }\n        \n        return (\n            <div className={showHideClassName}>\n                <section className='modal-main'>\n                    { this.parseModalDetails(this.props) }\n                </section>\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    //modalDetails: state.detailData.isFetching || state.detailData.modalID === 0 ? {} : state.detailModal,\n    workDetail: state.detailData.isFetching || state.detailModal.modalID === 0 ? {} : state.detailData.item.hits.hits[0],\n    numberVolumes: state.detailData.isFetching || state.detailModal.modalID === 0 ? null : state.detailData.item.hits.hits[0]._source.workNumberOfVolumes,\n    initialRender: !!state.detailModal.initialRender ? state.detailModal.initialRender : false\n})\n\nconst withN = withNamespaces()(Modal)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport Header from '../Header'\nimport Footer from '../Footer'\nimport Archives from '../Archives'\nimport Stats from '../Stats'\nimport Posts from '../Posts'\nimport Modal from '../Modal'\n\nimport { languages, defaultLanguage, log, \n    fetchSpecificID, setPage, setLanguage } from '../../store/actions'\n\nclass RouteSwitch extends Component {\n    \n    previousLocation = this.props.location\n    l = Object.keys(languages).map(l => l).join('|')\n    \n    componentDidMount() {\n        this.languageCheckAndUpdate()\n    }\n\n    componentDidUpdate(prevProps) {\n        let { location } = this.props\n\n        if(prevProps.history.action !== \"POP\") {\n            this.previousLocation = location\n        }\n    }\n    \n    languageCheckAndUpdate() {\n        log('RS check lang and page', this.props)\n\n        const { history, dispatch, t } = this.props\n        const url = history.location.pathname\n\n        if(url.split('/')[2] !== undefined) {\n            if(Object.keys(t('pages')).includes(url.split('/')[2])) {\n                dispatch(setPage('archives'))\n            } else {\n                dispatch(setPage('home'))\n                history.push(`/${url.split('/')[1]}`)\n            }\n        } \n    \n        if(url.split('/')[1] in languages) { \n            this.setLang(url.split('/')[1])\n        } else {\n            this.setLang(defaultLanguage)\n            dispatch(setPage('home'))\n            history.push(defaultLanguage)\n            \n        }  \n    }\n\n  setLang = (lng) => {\n\n    const { i18n, dispatch } = this.props;\n    i18n.changeLanguage(lng) // change locale\n    dispatch(setLanguage(lng)) // set redux language\n\n  }\n\n    render() {\n        let initialRender = this.props.location === this.previousLocation\n        return (\n            <div>\n                {/* pass location prop to switch and it will ignore \n                router location to continue showing gallery in background */}\n                \n                {/* Passing data to a component through a route\n                <Route path=\"/somepath\" render={() => <SomeComponent somedata={somedata} />} /> */}\n\n                {/* Anytime you have a match.params like :lng \n                You will have to match the param to your data */}\n\n                <Route path={`/:lng(${this.l})`} component={Header} />\n\n                <Switch>  \n\n                    <Route exact path={`/:lng(${this.l})`} render={() => \n                    <div className=\"container\">\n                        <Stats />\n                        <Posts />\n                    </div>\n                    } />\n\n                    {/* if we add other pages, would be something like this...\n                    <Route path={`/:lng(${this.l})/:page`} component={Page} /> */}\n                    \n                    <Route path={`/:lng(${this.l})/archives`} render={({match, history}) =>\n                        <div className=\"container\">\n                            <Archives match={match} history={history} />\n                        </div>\n                    } />\n\n                    <Route render={() => <Redirect selectedPage=\"home\" to=\"/en\" /> } />\n                    \n                </Switch>\n\n                <Footer />\n            \n                <Route exact path={`/:lng(${this.l})/archives/doc/:id`} render={({match, history}) => {\n                    \n                    let label = this.props.location.state ? this.props.location.state.label : null\n                    \n                    if(initialRender) {\n                        this.props.dispatch(fetchSpecificID(match.params.id))\n                        this.props.dispatch({ type: 'DETAIL_MODAL', modalID: match.params.id, show: true, initialRender: true })\n                    }\n                    \n                    return <Modal \n                        key={match.params.id}\n                        history={history}\n                        doc_id={match.params.id}\n                        show={true}\n                        label={label}\n                        />\n                    }} />\n            </div>\n        )\n    }\n  }\n\n  const withN = new withNamespaces()(RouteSwitch)\n  export default connect()(withN)","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\nimport { defaultLanguage } from '../actions/index'\nimport * as types from '../actions/types'\n\nfunction content(\n    state = {\n        isFetching: false,\n        items: []\n    },\n    action\n) {\n    switch(action.type) {\n        case types.REQUEST_PAGES:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_PAGES:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.pages,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_POSTS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_POSTS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.posts,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_DATA:\n        case types.REQUEST_WORKS:\n        case types.REQUEST_ES_DATA:\n        case types.REQUEST_RESOURCES:\n        case types.REQUEST_AUTHORS:\n        case types.REQUEST_TOPICS:\n        case types.REQUEST_SUBJECTS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_DATA:\n        case types.RECEIVE_WORKS:\n        case types.RECEIVE_RESOURCES:\n        case types.RECEIVE_AUTHORS:\n        case types.RECEIVE_ES_DATA:\n        case types.RECEIVE_TOPICS:\n        case types.RECEIVE_SUBJECTS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_GS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_GS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                gs: action.gs,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_ID:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_ID:\n            return Object.assign({}, state, {\n                isFetching: false,\n                item: action.data,\n                imageAsset: action.imageAsset,\n                volume: action.volume,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: false,\n                manifestURL: action.manifestURL,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_IIIF:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_IIIF:\n            return Object.assign({}, state, {\n                isFetching: false,\n                firstImage: action.firstImage,\n                lastUpdated: action.receivedAt\n            })\n        case types.NULLIFY_IIIF:\n            return Object.assign({}, state, {\n                firstImage: null\n            })\n        case types.DETAIL_MODAL:\n            return Object.assign({}, state, {\n                modalID: action.modalID,\n                show: action.show,\n                initialRender: action.initialRender\n            })\n        default:\n            return state;\n    }\n}\n\nfunction pages(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_PAGES:\n        case types.REQUEST_PAGES:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction esWorks(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_DATA:\n        case types.RECEIVE_WORKS:\n        case types.RECEIVE_ES_DATA:\n        case types.REQUEST_ES_DATA:\n        case types.REQUEST_DATA:\n        case types.REQUEST_WORKS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction esResources(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_RESOURCES:\n        case types.REQUEST_RESOURCES:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction esAuthors(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_AUTHORS:\n        case types.REQUEST_AUTHORS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction esSubjects(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_TOPICS:\n        case types.RECEIVE_SUBJECTS:\n        case types.REQUEST_TOPICS:\n        case types.REQUEST_SUBJECTS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction detailData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_ID:\n        case types.REQUEST_ID:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction gsData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_GS:\n        case types.REQUEST_GS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction manifestData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_MANIFEST:\n        case types.REQUEST_MANIFEST:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction IIIFData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_IIIF:\n        case types.NULLIFY_IIIF:\n        case types.REQUEST_IIIF:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction posts(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_POSTS:\n        case types.REQUEST_POSTS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\n// should use defaultLanguage code here\nconst selectedLanguage = (state = defaultLanguage, action) => {\n    switch (action.type) {\n        case types.SET_LANG:\n            return action.language\n        case types.LOCATION_CHANGE:\n            if(action.payload.location.pathname.split('/')[1].length === 0) {\n                return state\n            }\n            return action.payload.location.pathname.split('/')[1]\n      default:\n        return state\n    }\n}\n\nfunction detailModal(state = { modalID: 0, initialRender: false }, action) {\n    switch(action.type) {\n        case types.DETAIL_MODAL:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nconst selectedPage = (state = 'home', action) => {\n    switch (action.type) {\n        case types.SET_PAGE:\n            return action.page\n        default:\n            return state\n    }\n}\n\nconst setCollapse = (state = true, action) => {\n    switch (action.type) {\n        case types.SET_COLLAPSE:\n            return action.collapse\n        default:\n            return state\n    }\n}\n\nconst setBrowse = (state = 'Title', action) => {\n    switch (action.type) {\n        case types.SET_BROWSE:\n            return action.browse\n        default:\n            return state\n    }\n}\n\nconst setCollection = (state = false, action) => {\n    switch (action.type) {\n        case types.SET_COLLECTION:\n            return action.collection\n        default:\n            return state\n    }\n}\n\nconst rootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    selectedLanguage,\n    selectedPage,\n    setCollapse,\n    setBrowse,\n    setCollection,\n    pages,\n    posts,\n    esWorks,\n    esAuthors,\n    esSubjects,\n    esResources,\n    gsData,\n    detailData,\n    manifestData,\n    IIIFData,\n    detailModal\n})\n\nexport default rootReducer","import i18n from 'i18next'\nimport Backend from 'i18next-xhr-backend'\n//import LanguageDetector from 'i18next-browser-languagedetector'\nimport { detectorOptions } from './detector'\nimport { reactI18nextModule } from 'react-i18next'\nimport { languages } from '../actions'\n\n\n// NOTE THAT 'en' is attempting to be loaded because of LanguageDetector (probably)\n// and in our case we're loading 'English'\n// this is due to how I originally coded the component\n// refactor to use language codes :)\n\nconst debug = process.env.NODE_ENV === 'production' ? false : true\n\ni18n\n  .use(Backend)\n  //.use(LanguageDetector)\n  .use(reactI18nextModule)\n\n  .init({\n    fallbackLng: 'en',\n    debug: debug,\n    preload: Object.keys(languages).map(l => l),\n\n    returnObjects: true,\n\n    detection: detectorOptions,\n\n    interpolation: {\n      escapeValue: false,\n    },\n\n    react: {\n      wait: true\n    }\n  })\n\nexport default i18n\n","export const detectorOptions = {\n    // order and from where user language should be detected\n    // we're using path /en /mn\n    order: ['path', 'localStorage'],\n    lookupFromPathIndex: 0, //1st element on path\n    lookupLocalStorage: 'i18nextLng', // caching to localStorage\n    \n    // cache user language on\n    caches: ['localStorage'],\n    excludeCacheFor: false\n}","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { Provider } from 'react-redux'\nimport { Route, BrowserRouter as Router } from 'react-router-dom'\nimport * as serviceWorker from './serviceWorker'\n\nimport { \n    fetchPages, fetchPosts, \n    fetchData, fetchAuthors, fetchTopics,\n    getGS } from './store/actions'\n\nimport RouteSwitch from './components/router/RouteSwitch'\n\nimport configureStore from './store/configureStore'\nimport { checkConnection } from './store/connection'\n\nimport './assets/css/main.css'\nimport './assets/css/index.css'\n\n// this is what gives the entire app access to t, i18n...\nimport './store/localization/i18n'\n\nconst store = configureStore()\n\n// log('initial state index.js', store.getState()) \n// THIS COULD BE REPLACED WITH ONE 'INITIALIZE APP' type function\n// GET PAGES, POSTS, ES DATA\n\n// Wordpress data\nstore.dispatch(fetchPages())\nstore.dispatch(fetchPosts())\n\n// Google sheet data from NLM cataloguing\nstore.dispatch(getGS())\n\n// check connection and get ES data\nif(checkConnection()) {\n    store.dispatch(fetchData())\n    store.dispatch(fetchAuthors())\n    store.dispatch(fetchTopics())\n} else {\n    console.log(\"Can't make connection to ES...\")\n}\n\n\nconst App = () => {\n    document.body.classList.add('landing')\n    return (\n        <div className=\"container\">\n            <React.StrictMode>\n                <Provider store={store}>\n                    <Router> {/* history={history}> */}\n                        <Route component={RouteSwitch} />\n                    </Router>\n                </Provider>\n            </React.StrictMode>\n        </div>\n    )\n}\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import { applyMiddleware, compose, createStore } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger';\nimport rootReducer from './reducers'\nimport { log } from '../store/actions'\n\nimport { createBrowserHistory } from 'history'\n\nexport default function configureStore(preloadedState) {\n\n    \n    const history = createBrowserHistory()\n\n    const middlewares = [thunkMiddleware]\n\n    if (process.env.NODE_ENV === 'development') {\n        log('In Dev, will add logger middleware...')\n        const loggerMiddleware = createLogger()\n        middlewares.push(loggerMiddleware)\n    }\n\n    const middlewareEnhancer = applyMiddleware(...middlewares)\n\n    const enhancers = [middlewareEnhancer]\n    const composedEnhancers = compose(...enhancers)\n\n    const store = createStore(\n        rootReducer(history), \n        preloadedState, \n        composedEnhancers\n    )\n\n  return store\n}"],"sourceRoot":""}