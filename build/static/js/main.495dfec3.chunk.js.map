{"version":3,"sources":["assets/images/UB-woodblock-closeup.jpg","assets/images/calligraphy_icon.ico","assets/images/endless-knot.png","serviceWorker.js","server/connection.js","server/search.js","actions/index.js","reducers/index.js","containers/Language.js","components/Languages.js","containers/NavItem.js","components/Nav.js","components/Header.js","components/Footer.js","components/Posts.js","components/Stats.js","components/Modal.js","components/Archives.js","components/Page.js","router.js","i18n.js","index.js"],"names":["module","exports","__webpack_require__","p","Boolean","window","location","hostname","match","host","isConnected","healthStatus","client","elasticsearch","Client","protocol","port","path","log","_callee","health","regenerator_default","a","wrap","_context","prev","next","cluster","sent","status","t0","console","error","abrupt","stop","this","initialSearch","ids","body","size","query","type","values","search","index","searchID","id","spreadSheet","concat","nodeWP","endpointWP","iiifpres","initialIDs","defaultLanguage","languages","en","mn","setLanguage","language","setPage","page","REQUEST_PAGES","RECEIVE_PAGES","REQUEST_GS","RECEIVE_GS","tableTopInit","_ref","Object","asyncToGenerator","mark","Promise","response","Tabletop","init","key","callback","data","tabletop","simpleSheet","apply","arguments","REQUEST_POSTS","RECEIVE_POSTS","REQUEST_DATA","RECEIVE_DATA","REQUEST_ID","RECEIVE_ID","fetchSpecificID","doc_id","dispatch","then","dataDetail","imageAsset","hits","_source","workHasItemImageAsset","volumes","workNumberOfVolumes","REQUEST_MANIFEST","imageURL","receiveManifest","includes","split","volumeID","itemHasVolume","fetchIIIF","fetchManifest","json","volume","workHasItem","receivedAt","Date","now","RECEIVE_MANIFEST","manifestURL","DETAIL_MODAL","NULLIFY_IIIF","RECEIVE_IIIF","receiveIIIF","firstImage","REQUEST_IIIF","url","fetch","method","manifest","image","sequences","manifests","canvases","found","i","s","label","images","resource","e","content","state","length","undefined","isFetching","items","action","assign","pages","lastUpdated","posts","gs","item","modalID","show","detailData","gsData","manifestData","IIIFData","selectedLanguage","payload","pathname","detailModal","selectedPage","rootReducer","history","combineReducers","router","connectRouter","withN","withNamespaces","active","children","lang","i18n","react_default","createElement","onClick","lng","changeLanguage","className","style","color","disabled","connect","ownProps","props","list","entries","t","map","_ref2","slicedToArray","k","l","Link","to","containers_Language","navigation","slugs","nav","slug","containers_NavItem","c","title","substring","rendered","order","menu_order","Header","components_Languages","Nav","src","alt","href","fetchingPosts","post","j","mediaURL","_embedded","source_url","acf","dangerouslySetInnerHTML","__html","Stats","stats","LastUpdate","PagesDigitized","VolumesDigitized","img","Modal","unpackNames","arr","Array","isArray","unpack","_this","showModal","hasOwnProperty","buildAttribution","parseType","source","hideModal","catalogInfo","personName","note","access","metaDetail","attribution","closeBtn","noteText","scanBtn","buildScansBtn","width","btn","target","rel","showHideClassName","keys","workDetail","Component","numberVolumes","Archives","unpackFrontend","code","o","find","g","lead","_this2","_this3","works","work","_work$_source","genre","topic","author","creatorMainAuthor","authorCode","genreCode","topicCode","workCode","itemAuthor","buildCardItem","itemGenre","itemTopic","components_Modal","Page","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setLang","_this$props","resetPage","setNumber","0","1","2","3","4","languageCheckAndUpdate","onpopstate","preventDefault","_this$props2","push","some","filter","backgroundImage","icon","subtitle","fetchingPages","Header_Header","renderPage","components_Stats","components_Posts","components_Archives","components_Footer","Routes","BrowserRouter","Switch","Route","component","Redirect","from","use","Backend","LanguageDetector","reactI18nextModule","fallbackLng","debug","load","returnObjects","interpolation","escapeValue","react","wait","loggerMiddleware","createLogger","createBrowserHistory","store","createStore","compose","applyMiddleware","routerMiddleware","thunkMiddleware","reduce","r","x","receivePages","receivePosts","_callee2","_context2","d","StatName","join","Value","isNaN","String","replace","_x","checkConnection","_ref3","_callee3","_context3","_x2","ReactDOM","render","document","classList","add","es","esm","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.495dfec3.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/UB-woodblock-closeup.67ac4b0f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/calligraphy_icon.b45851d1.ico\";","module.exports = __webpack_public_path__ + \"static/media/endless-knot.4a457e37.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import elasticsearch from 'elasticsearch'\nimport { log } from '../actions'\n\nconst port = 9200;\nconst host = process.env.NODE_ENV === 'production' ? '157.230.172.69' : 'localhost';\n//const host = '157.230.172.69' // : 'localhost';\n\n\nlet isConnected = false\nlet healthStatus = 'red'\n\nconst client = new elasticsearch.Client({\n\thost: {\n\t\tprotocol: 'http',\n\t\thost: host,\n\t\tport: port,\n\t\tpath: ''\n\t},\n\tlog: 'info' //'trace'\n})\n\nasync function checkConnection() {\n\tlog('process.env.NODE_ENV ', host);\n\twhile(!isConnected) {\n\t\tlog('Connnnnecting....')\n\t\twhile(healthStatus === 'red') {\n\t\t\tlog('awaiting green light')\n\t\t\ttry {\n\t\t\t\tconst health = await client.cluster.health({});\n\t\t\t\tlog('health: ', health)\n\t\t\t\thealthStatus = health.status\n\t\t\t\tisConnected = true\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Connection is failing...', err)\n\t\t\t\tisConnected = false\n\t\t\t}\n\t\t}\n    }\n    \n    // HAVE A LOOK INTO THIS FOR FILTERING OBJECTS\n    // Object.filter = (obj, predicate) => \n    // Object.assign(...Object.keys(obj)\n    //                 .filter( key => predicate(obj[key]) )\n    //                 .map( key => ({ [key]: obj[key] }) ) );\n\n    // STATS MODULE to retreive indices\n    // client.indices.stats({\n    //     index: \"_all\",\n    //     level: \"indices\"\n    //  }, function(err, res) {\n    //     // res contains JSON data about indices stats\n    //     log('stats', res.indices)\n    //  });\n    \n\treturn isConnected;\n}\n\nexport { client, checkConnection, isConnected, log };","import { client, log } from './connection';\nconst initialIndex = 'frontend';\nconst type = ''; // 'data'\nconst size = 10;\n\nconst initialSearch = (ids) => {\n\t\n\tconst body = {\n\t\t\n\t\tsize: size,\n\t\tquery: {\n            ids: {\n                type: \"_doc\",\n                values: ids\n            }\n        }\n\t};\n\tlog('initial search body', body);\n\treturn client.search({index: initialIndex, type, body});\n};\n\nconst searchID = (id) => {\n\t\n\tconst body = {\n\t\t\n\t\tsize: size,\n\t\tquery: {\n            ids: {\n                type: \"_doc\",\n                values: id\n            }\n        }\n\t};\n\tlog('initial search body', body);\n\treturn client.search({index: ['bdrc_work', 'bdrc_topic', 'bdrc_person', 'bdrc_item'], type, body});\n};\n\nconst textOnlyTerm = (term, catref, filterClause) => {\n\n\t// const filter = {\n\t// \tbool: { should: [ filterClause ] }\n\t// };\n\t\n\t// const multiMatchPhrase = {\n\t// \tquery: term,\n\t// \ttype: 'phrase',\n\t// \tfields: ['author*^10', 'title*^10', 'tibtext^3']\n\t// };\n\n\tconst highlight_all = {\n\t\tfields: {\n\t\t\ttibtext: {\n\t\t\t\tfragment_size: 0,\n\t\t\t\thighlight_query: {\n\t\t\t\t\tmatch_phrase: {\n\t\t\t\t\t\ttibtext: term \n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tpre_tags: ['<yo>'],\n\t\tpost_tags: ['</yo>']\n\t};\n\n\tconst body = {\n\t\tquery: {\n\t\t\tterm: {\n\t\t\t\t'catref': catref\n\t\t\t}\n\t\t},\n\t\thighlight: highlight_all,\n\t\t_source: {\n\t\t\tincludes: ['tibtext']\n\t\t}\n\t\t\n\t};\n\t\n\treturn client.search({initialIndex, type, body});\n};\n\n\nexport { initialSearch, textOnlyTerm, searchID };\n","import fetch from 'cross-fetch'\n\nimport { initialSearch, searchID } from '../server/search'\n\nimport Tabletop from 'tabletop'\n\nconst d = `https://docs.google.com/spreadsheets/d/`\nconst gsKey = `1hPqe-Y2TWwMTAxIEXYvc8du_GMFUJQNPvZbJou7veAY`\n//const testKey = `1P6Dk9SN0af7GDitw7-tRXGc5N22AEXoaOpDIKzVdlK0`\nconst spreadSheet = `${d}${gsKey}/edit?usp=sharing`\n\n\n\n\n// possibly needed for authenticated requests?\n//import config from './config-defaults.json'\n\n//const nodeWP = 'http://206.189.71.52'\nexport const nodeWP = 'http://178.128.7.239/'\nexport const onlyIP = '178.128.7.239'\n\nconst endpointWP = 'wp-json/wp/v2/'\n\nconst iiifpres = \"http://iiifpres.bdrc.io\" ;\n\nconst initialIDs = [\n    'W22677',\n    'W1GS135873',\n    'W1KG5200',\n    'W22344',\n    'W1GS135531',\n    'W1KG1132',\n    'W1KG10720',\n    'W1KG1279',\n    'W1KG14700'\n]\n\nexport const buildYear = '2018'\n\nexport const defaultLanguage = 'en'\n\nexport const languages = {\n    en: \"English\",\n    mn: \"Mongolian\"\n}\n\nexport const log = (...msgs) => {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.log(...msgs)\n\t}\n}\n\nexport const LOCATION_CHANGE = '@@router/LOCATION_CHANGE'\n\nexport const SET_LANG = 'SET_LANG';\nexport const setLanguage = language => ({\n  type: SET_LANG,\n  language\n})\n\nexport const SET_PAGE = 'SET_PAGE';\nexport const setPage = page => ({\n    type: SET_PAGE,\n    page\n})\n/* ******************************************\nPAGES\nwp pages for content pages (about, preservation)\n********************************************/\nexport const REQUEST_PAGES = 'REQUEST_PAGES';\nfunction requestPages() {\n    return {\n        type: REQUEST_PAGES\n    }\n}\n\nexport const RECEIVE_PAGES = 'RECEIVE_PAGES';\nfunction receivePages(json) {\n    return {\n        type: RECEIVE_PAGES,\n        pages: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport const REQUEST_GS = 'REQUEST_GS'\nfunction requestGS() {\n    return {\n        type: REQUEST_GS\n    }\n}\n\nexport const RECEIVE_GS = 'RECEIVE_GS'\nfunction receiveGS(gs) {\n    return {\n        type: RECEIVE_GS,\n        gs: gs,\n        receivedAt: Date.now()\n    }\n}\n\nconst tableTopInit = async () => {\n    return await new Promise((response, error) => {\n        Tabletop.init({\n            key: spreadSheet,\n            callback: (data, tabletop) => { \n                response(data)\n                error(tabletop)\n            }, \n            simpleSheet: true\n        })\n    })\n}\n\nexport function getGS() {\n    return async dispatch => {\n        dispatch(requestGS())\n        try {\n            const data = await tableTopInit()\n            // add some data processing\n            let gsData = {}\n            data.map(d => {\n                const key = d.StatName.split(' ').join('')\n                console.log(typeof(d.Value), isNaN(d.Value), d.Value)\n                gsData[key] = isNaN(d.Value) ? d.Value : String(d.Value).replace(/(.)(?=(\\d{3})+$)/g,'$1,')\n            })\n            return dispatch(receiveGS(gsData))\n        } catch(error) {\n            console.error('error from tabletop', error)\n        }\n    }\n}\n\nexport function fetchPages() {\n    return function(dispatch) {\n        dispatch(requestPages())\n        return fetch(`${nodeWP}${endpointWP}pages?_embed`)\n            .then(\n                response => response.json(),\n                error => console.log('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                //console.log('json pages', json)\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json => { \n                // do NOT receivePages until there are pages!\n                dispatch(receivePages(json)) \n            })\n    }\n}\n\n/* ******************************************\nPOSTS\nwp posts for home page content\n********************************************/\nexport const REQUEST_POSTS = 'REQUEST_POSTS';\nfunction requestPosts() {\n    return {\n        type: REQUEST_POSTS\n    }\n}\n\nexport const RECEIVE_POSTS = 'RECEIVE_POSTS';\nfunction receivePosts(json) {\n    return {\n        type: RECEIVE_POSTS,\n        posts: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchPosts() {\n    return function(dispatch) {\n        dispatch(requestPosts())\n        return fetch(`${nodeWP}${endpointWP}posts?_embed`)\n            .then(\n                response => response.json(),\n                error => console.log('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json => \n                dispatch(receivePosts(json))\n            )\n    }\n}\n\n/* ******************************************\nDATA\nElasticsearch data from http://142.93.23.6:9200\n********************************************/\nexport const REQUEST_DATA = 'REQUEST_DATA';\nfunction requestData() {\n    return {\n        type: REQUEST_DATA\n    }\n}\n\nexport const RECEIVE_DATA = 'RECEIVE_DATA';\nfunction receiveData(json) {\n    return {\n        type: RECEIVE_DATA,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchData() {\n    return async dispatch => {\n        dispatch(requestData())\n        try {\n            const data = await initialSearch(initialIDs)\n            return dispatch(receiveData(data))\n        } catch (error) {\n            console.error('there been error ', error)\n        }\n    }\n}\n\nexport const REQUEST_ID = 'REQUEST_ID';\nfunction requestID() {\n    return {\n        type: REQUEST_ID\n    }\n}\n\nexport const RECEIVE_ID = 'RECEIVE_ID';\nfunction receiveID(json) {\n    return {\n        type: RECEIVE_ID,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        imageAsset: json.hits.hits[0]._source.workHasItemImageAsset,\n        volume: json.hits.hits[0]._source.workHasItem,\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchSpecificID(doc_id) {\n    return dispatch => {  \n        log('fetchSpecificID!', doc_id)\n        dispatch(requestID())\n        try {\n            searchID([doc_id]).then((dataDetail) => {\n                log('THEN', dataDetail)\n                const imageAsset = dataDetail.hits.hits[0]._source.workHasItemImageAsset\n                const volumes = dataDetail.hits.hits[0]._source.workNumberOfVolumes\n                dispatch(fetchManifest(imageAsset, volumes))\n                return dataDetail\n            }).then((dataDetail) => {\n                return dispatch(receiveID(dataDetail))\n            })\n        } catch(error) {\n            console.error('fetch ID error! ', error)\n        }\n    }\n}\n\nfunction fetchManifest(imageAsset, volumes) {\n    return dispatch => {\n        log('INSIDE fetchManifest', imageAsset)\n        dispatch(requestManifest())\n        try {\n            let imageURL\n            \n            if(imageAsset) {\n                const id = imageAsset.includes(\":\") ? imageAsset.split(\":\")[1] : imageAsset\n                if(volumes === 1) {\n                    // must reconstruct imageItem based on workHasItem > hasVolume\n                    // bdr:W22677\n                    // W22677 > workHasItem > bdr:I22677 > HasVolume > V22677_I1KG1714\n                    // BDRC \"http://iiifpres.bdrc.io/2.1.1/v:bdr:V22677_I1KG1714/manifest\"\n                    searchID([id]).then((dataDetail) => {\n                        log('THEN', dataDetail)\n                        const volumeID = dataDetail.hits.hits[0]._source.itemHasVolume\n                        imageURL = `${iiifpres}/2.1.1/v:${volumeID}/manifest`\n                        log('THIS IS IMAGE URL', imageURL)\n                        dispatch(fetchIIIF(imageURL))\n                        return dispatch(receiveManifest(imageURL))\n                    })\n                } else if(volumes > 1) {\n                    // bdr:W1GS135873\n                    // BDRC \"http://iiifpres.bdrc.io/2.1.1/collection/i:bdr:I1GS135873\"\n                    imageURL = `${iiifpres}/2.1.1/collection/i:${imageAsset}`\n                    log('THIS IS IMAGE URL', imageURL)\n                    dispatch(fetchIIIF(imageURL))\n                    return dispatch(receiveManifest(imageURL))\n                }\n            } else {\n                return dispatch(receiveManifest(''))\n            }\n        } catch (error) {\n            console.error('fetch manifest error! ', error)\n        }\n    }\n}\n\nexport const RECEIVE_MANIFEST = 'RECEIVE_MANIFEST';\nfunction receiveManifest(manifestURL) {\n    return {\n        type: RECEIVE_MANIFEST,\n        manifestURL,\n        receivedAt: Date.now()\n    }\n}\n\nexport const REQUEST_MANIFEST = 'REQUEST_MANIFEST';\nfunction requestManifest() {\n    log('requesting manifest!')\n    return {\n        type: REQUEST_MANIFEST\n    }\n}\n\nexport const DETAIL_MODAL = 'DETAIL_MODAL';\nexport const modalDetail = (modalID, show) => ({\n    type: DETAIL_MODAL,\n    modalID: modalID,\n    show: show\n})\n\nexport const NULLIFY_IIIF = 'NULLIFY_IIIF';\nexport const RECEIVE_IIIF = 'RECEIVE_IIIF';\nfunction receiveIIIF(firstImage) {\n    return {\n        type: RECEIVE_IIIF,\n        firstImage,\n        receivedAt: Date.now()\n    }\n}\n\nexport const REQUEST_IIIF = 'REQUEST_IIIF';\nfunction requestIIIF() {\n    log('requesting IIIF!')\n    return {\n        type: REQUEST_IIIF,\n        firstImage: null\n    }\n}\n\nexport function fetchIIIF(url) {\n    return dispatch => {\n        dispatch(requestIIIF())\n        try {\n            // first image\n            //http://iiif.bdrc.io/image/v2/bdr:V22677_I1KG1714::I1KG17140003.jpg/full/,600/0/default.jpg\"\n            // imageAsset\n            // http://iiifpres.bdrc.io/2.1.1/v:bdr:V22677_I1KG1714/manifest\"\n            // http://iiifpres.bdrc.io/2.1.1/v:bdr:V22677_I1KG1714/manifest\n            \n            fetch(url, {method: 'GET'}).then((manifest) => {\n                return manifest.json()\n            }).then(data => {\n                log('MANIFEST?!', data)\n                let image ;\n\n                //collection ?\n                if(!data.sequences ) {\n                    if (data.manifests) {\n                        log('I AM A COLLECTION')\n                        dispatch(fetchIIIF(data.manifests[0][\"@id\"]))\n                    }\n                }\n                // this logic taken directly from ResourceViewer BDRC\n                if(data.sequences && data.sequences[0] && data.sequences[0].canvases) {\n                    let found = false ;\n                    for(let i in data.sequences[0].canvases){\n                        let s = data.sequences[0].canvases[i]\n                        if(s.label === \"tbrc-1\") {\n                            s = data.sequences[0].canvases[2]\n                            if(s && s.images && s.images[0]) {\n                                image = data.sequences[0].canvases[2].images[0].resource[\"@id\"]\n                                found = true ;\n                                return dispatch(receiveIIIF(image))\n                            }\n                        }\n                    }\n\n                    if(!found) {\n                        if(data.sequences[0].canvases[0] \n                            && data.sequences[0].canvases[0].images[0] \n                            && data.sequences[0].canvases[0].images[0].resource[\"@id\"]) {\n                            \n                            image = data.sequences[0].canvases[0].images[0].resource[\"@id\"]\n                            found = true\n                            return dispatch(receiveIIIF(image))\n                        }\n                    }\n                }\n            })\n        }\n        catch(e) {\n            console.error('config error', e)\n        }\n    }\n}","import { combineReducers } from 'redux';\nimport { connectRouter } from 'connected-react-router'\nimport { defaultLanguage, LOCATION_CHANGE } from '../actions'\n\nimport {\n    REQUEST_PAGES,\n    RECEIVE_PAGES,\n    REQUEST_POSTS,\n    RECEIVE_POSTS,\n    SET_LANG,\n    SET_PAGE,\n    //LanguageArray,\n    RECEIVE_DATA,\n    REQUEST_DATA,\n    RECEIVE_GS,\n    REQUEST_GS,\n    RECEIVE_ID,\n    REQUEST_ID,\n    REQUEST_MANIFEST,\n    RECEIVE_MANIFEST,\n    REQUEST_IIIF,\n    RECEIVE_IIIF,\n    NULLIFY_IIIF,\n    DETAIL_MODAL\n} from '../actions';\n\n\n\nfunction content(\n    state = {\n        isFetching: false,\n        items: []\n    },\n    action\n) {\n    switch(action.type) {\n        case REQUEST_PAGES:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_PAGES:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.pages,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_POSTS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_POSTS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.posts,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_DATA:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_DATA:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_GS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_GS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                gs: action.gs,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_ID:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_ID:\n            return Object.assign({}, state, {\n                isFetching: false,\n                item: action.data,\n                imageAsset: action.imageAsset,\n                volume: action.volume,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: false,\n                manifestURL: action.manifestURL,\n                lastUpdated: action.receivedAt\n            })\n        case REQUEST_IIIF:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case RECEIVE_IIIF:\n            return Object.assign({}, state, {\n                isFetching: false,\n                firstImage: action.firstImage,\n                lastUpdated: action.receivedAt\n            })\n        case NULLIFY_IIIF:\n            return Object.assign({}, state, {\n                firstImage: null\n            })\n        case DETAIL_MODAL:\n            return Object.assign({}, state, {\n                modalID: action.modalID,\n                show: action.show\n            })\n        default:\n            return state;\n    }\n}\n\nfunction pages(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_PAGES:\n        case REQUEST_PAGES:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction data(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_DATA:\n        case REQUEST_DATA:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction detailData(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_ID:\n        case REQUEST_ID:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction gsData(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_GS:\n        case REQUEST_GS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction manifestData(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_MANIFEST:\n        case REQUEST_MANIFEST:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction IIIFData(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_IIIF:\n        case NULLIFY_IIIF:\n        case REQUEST_IIIF:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction posts(state = {}, action) {\n    switch(action.type) {\n        case RECEIVE_POSTS:\n        case REQUEST_POSTS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\n// should use defaultLanguage code here\nconst selectedLanguage = (state = defaultLanguage, action) => {\n    switch (action.type) {\n        case SET_LANG:\n            return action.language\n        case LOCATION_CHANGE:\n            if(action.payload.location.pathname.split('/')[1].length === 0) {\n                return state\n            }\n            return action.payload.location.pathname.split('/')[1]\n      default:\n        return state\n    }\n}\n\nfunction detailModal(state = { modalID: 0 }, action) {\n    switch(action.type) {\n        case DETAIL_MODAL:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nconst selectedPage = (state = 'home', action) => {\n    switch (action.type) {\n        case SET_PAGE:\n            return action.page\n        default:\n            return state\n    }\n}\n\nconst rootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    selectedLanguage,\n    selectedPage,\n    pages,\n    posts,\n    data,\n    gsData,\n    detailData,\n    manifestData,\n    IIIFData,\n    detailModal\n});\n\nexport default rootReducer;","import React from 'react'\nimport { setLanguage } from '../actions'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport { defaultLanguage } from '../actions'\n\nconst Language = ({ active, children, dispatch, lang, i18n }) => {\n\n  const changeI18n = (lng) => {\n    console.log('in language connector with', lng)\n    i18n.changeLanguage(lng);\n  }\n  \n  return (\n    <li\n      key={children}\n      onClick={() => {\n        dispatch(setLanguage(lang))\n        changeI18n(lang)\n        }}\n      className={active ? \"lang-active\" : \"lang\"}\n      style={active ? \n        { color: 'red', } :\n        { color: 'black', } \n        }\n    >\n    <button\n      key={children}\n      disabled={active ? true : false}\n      className=\"btn-lang\">\n      {children}\n    </button>\n    </li>\n  )\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedLanguage === state.selectedLanguage,\n  lang: ownProps.selectedLanguage || defaultLanguage\n})\n\nconst withN = new withNamespaces()(Language)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport Language from '../containers/Language'\n\n\nimport { withNamespaces } from 'react-i18next'\n\nimport { Link } from 'react-router-dom'\n\n// language codes, ISO 639-1\n// mongolian - mn, english - en, tibetan - bo\nconst Languages = (props) => {\n    let list = []\n    //list = Object.entries(props.t('languageCodes')).map(([k, l]) => {\n        list = Object.entries(props.t('languageCodes')).map(([k, l]) => {\n            //const p = props.page === 'home' ? '' : `/${props.t('pages')[props.page]}`\n            const p = props.page === 'home' ? '' : `/${props.page}`\n            return (\n                <Link key={k} to={`/${k}${p}`} >\n                    <Language key={l} selectedLanguage={k}>\n                        {l}\n                    </Language>\n                </Link>\n            )\n        })\n    return (\n        <ul className=\"language-list\">{list}</ul>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    page: state.selectedPage\n})\n\nconst withN = new withNamespaces()(Languages)\n//export default withRouter(connect(mapStateToProps)(withN))\nexport default connect(mapStateToProps)(withN)\n//export default withRouter(withNamespaces()(Languages))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { setPage } from '../actions'\nimport { connect } from 'react-redux'\n\nconst NavItem = ({ active, children, onClick }) => (\n    <li\n      key={children}\n       onClick={active ? null : onClick}\n       className={active ? \"nav-active\" : \"nav\"}\n       style={active ? \n        { color: 'red', } :\n        { color: 'black', } \n        }\n    >\n    <button\n      key={children}\n      disabled={active ? true : false}\n      className=\"btn-nav\">\n      {children}\n    </button>\n    </li>\n)\n\nNavItem.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\n\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedPage === state.selectedPage\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    onClick: () => dispatch(setPage(ownProps.selectedPage)) \n  });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NavItem)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport NavItem from '../containers/NavItem'\nimport { withNamespaces } from 'react-i18next'\nimport { log } from '../actions'\n\nconst NavBar = (props) => {\n  log('creating navbar with props', props.navigation)\n    // matching page nav with translated 'pages' object // t('pages')[nav.match] // obj[key]\n    const slugs = props.navigation.map(nav => {\n      const p = nav.match === 'home' ? '' : `/${nav.match}`\n        return (\n          <Link key={nav.slug} to={`/${props.lng}${p}`}>\n            <NavItem key={nav.slug} selectedPage={nav.match}>\n              {props.t('pages')[nav.match]}\n            </NavItem>\n          </Link>\n        )\n      })\n\n    return (\n\t\t<ul className=\"nav-list\">\n\t\t\t{slugs}\n\t\t</ul>\n    )\n\n}\n\nconst createNavigation = (pages) => {\n  \n    return pages.map(c => {\n        return {\n          //match: c.slug.substring(0,4),\n          match: c.slug.split('-')[0],\n          title: c.slug.substring(0,4) ==='home' ? 'Home' : c.title.rendered,\n          slug: c.slug,\n          order: c.menu_order\n        }\n      })\n      \n}\n\nconst mapStateToProps = (state) => ({\n    navigation: createNavigation(state.pages.items[state.selectedLanguage]),\n    lang: state.selectedLanguage,\n    page: state.selectedPage\n})\n\nconst withN = new withNamespaces()(NavBar)\nexport default connect(mapStateToProps)(withN)","import React from 'react'\n\nimport Languages from './Languages'\nimport NavBar from './Nav'\n\nexport const Header = () => {\n    return (\n        <header id=\"header\">\n\t\t\t<Languages />\n            <NavBar />\n\t\t</header>\n    )\n}","import React from 'react'\nimport { withNamespaces } from 'react-i18next'\nimport { onlyIP, buildYear } from '../actions'\n\nconst Footer = (props) => {\n    return (\n        <footer id=\"footer\">\n            <div className=\"icon\">\n              <img \n                src={`http://${onlyIP}/wp-content/uploads/2018/10/nlm-logo-no-text.png`} \n                alt=\"mongolia-logo\" />\n            </div>\n            <ul className=\"alt-icons\">\n                <li><a href=\"#1\" className=\"icon fa-twitter\"><span className=\"label\">Twitter</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-facebook\"><span className=\"label\">Facebook</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-linkedin\"><span className=\"label\">LinkedIn</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-github\"><span className=\"label\">GitHub</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-phone\"><span className=\"label\">Phone</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-envelope\"><span className=\"label\">Email</span></a></li>\n            </ul>\n            <ul className=\"menu\">\n                <li><a href=\"#1\">{props.t('footer.terms')}</a></li>\n                <li><a href=\"#1\">{props.t('footer.privacy')}</a></li>\n                <li><a href=\"#1\">{props.t('footer.contact')}</a></li>\n            </ul>\n            <p className=\"copyright\">\n                &copy; {`${buildYear} ${props.t('title')}. ${props.t('footer.rights')}.`}\n            </p>\n        </footer>\n    )\n}\n\nexport default withNamespaces()(Footer)\n\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport '../assets/css/posts.css'\n\nconst Posts = ({ posts }) => {\n    if(!posts) {\n        return <div></div>\n    }\n    \n    return posts.map((post, i) => {\n        let j = i % 2 === 0 ? 1 : 3;\n        \n        let mediaURL = \"\"\n        if(post._embedded[\"wp:featuredmedia\"]) {\n            mediaURL = post._embedded[\"wp:featuredmedia\"][0].source_url || \"\"\n        }\n\n        if(j === 3) {\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                            </section>\n                            <section>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n            )\n        } else {\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights col1\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n                )\n        }\n    })  \n}\n\nconst mapStateToProps = (state) => ({\n    fetchingPosts: state.posts.isFetching,\n    selectedLanguage: state.selectedLanguage,\n    posts: state.posts.isFetching ? [] : state.posts.items[state.selectedLanguage]\n})\n\nexport default connect(mapStateToProps)(Posts)\n","import React from 'react'\nimport img from '../assets/images/UB-woodblock-closeup.jpg'\nimport '../assets/css/stats.css'\n\n\nconst Stats = ({ stats, t }) => {\n    return (\n        <section className=\"wrapper special style3\">\n            <div className=\"inner\">\n                <section className=\"spotlights\">\n                    <section>\n                        <h2>{t('stats.Title')}</h2>\n                        <ul className=\"list-stats\">\n                            <li className=\"stat-item\">\n                                <p>{t('stats.LastUpdate')}: <em>{stats.LastUpdate}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.PagesDigitized')}: <em>{stats.PagesDigitized}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.VolumesDigitized')}: <em>{stats.VolumesDigitized}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.VolumesCataloged')}: <em>{stats[\"VolumesCataloged(normalized)\"]}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.TitlesCataloged')}: <em>{stats[\"TitlesCataloged(ACIP)\"]}</em></p>\n                            </li>\n                        </ul>\n                    </section>\n                    <section>\n                        <span className=\"image\"><img src={img} alt=\"\" /></span>\n                    </section>\n                </section>\n            </div>\n        </section>\n    )\n    \n}\n\nexport default Stats\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nclass Modal extends Component {\n\n    unpackNames = (arr, type) => {\n    \n        if(Array.isArray(arr['rdfs:label'])) {\n            \n            const a = arr['rdfs:label'].map((l, i) => {\n    \n                return (\n                    <p key={i} className=\"modal-text\">\n                        <span className=\"meta-italics\">({l['@language']}): </span>\n                        <span className=\"meta-title\">{l['@value']}</span>\n                    </p>\n                )}\n            )\n    \n            return (\n                <div key={type} className=\"modal-text\">\n                    <span className=\"meta-detail\">{type.split(\"Person\")[1]}: </span>\n                    {a}\n                </div>\n            )\n    \n        } else {\n            return (\n                <p key={type} className=\"modal-text\">\n                    <span className=\"meta-detail\">{type.split(\"Person\")[1]}: </span>\n                    <span className=\"meta-italics\">({arr['rdfs:label']['@language']}): </span>\n                    <span className=\"meta-title\">{arr['rdfs:label']['@value']}</span>\n                </p>\n            )\n        }\n    }\n\n    unpack = (arr) => {\n        if(arr === null) {\n            return null\n        } else if(Array.isArray(arr)) {\n            return arr.map((a, i) => {\n                if(typeof a === 'object') {\n                    return this.unpack(a)\n                } else if(a.substring(0,3) === 'bdr') {\n                    return (\n                        <div key={i} className=\"card-sub-item\">\n                            <div onClick={() => this.showModal(a.split(\":\")[1])}>{a}</div>\n                        </div> \n                    )\n                } else {\n                    return ( <div key={i} className=\"card-sub-item\">{a}</div>)\n                }\n                \n            })\n        } else if (typeof arr === 'object') {\n            // re-factor to allow for retreival of '@value' from any key\n            if(arr.hasOwnProperty('type')) { \n                return this.unpackNames(arr, arr.type) \n            } else {\n                return (\n                    <p key={arr['@value']} className=\"modal-text\">\n                        <span className=\"meta-title\">{arr['@value']}</span>\n                    </p>\n                )\n            }\n            \n        } else if (typeof arr === 'string') {\n            if(arr.substring(0,3) === 'bdr') {\n                return ( <div onClick={() => this.showModal(arr.split(\":\")[1])}>{arr}</div> )\n            } else {\n                return arr\n            }\n            \n        }\n        \n    }\n\n    buildAttribution = (t) => {\n        // SOMETHING ALONG THESE LINES, decide which field holds attribution\n        //let a = biblio !== null ? biblio : null\n        //let a = scan !== null ? scan : null\n\n        // if(Array.isArray(a)) { a = a[0] }\n        // if(a.hasOwnProperty('@value')) { a = a['@value'] }\n        // return a\n\n        return (\n            <p className=\"meta-detail\">\n                <span>{t('archives.attribution')}</span>\n            </p>\n        )\n    }\n\n    parseType = (source, hideModal, firstImage, t) => {\n        let { \n            'skos:prefLabel': label,\n            '@id': id,\n            type,\n            'workCatalogInfo': catalogInfo,\n            // ATTRIBUTION TEXT\n            //'workBiblioNote': biblio,\n            //'workScanInfo': scan\n            personName,\n            note,\n            'adm:access': access\n        } = source\n    \n        const metaDetail = (\n            <p className=\"meta-detail\">\n                <span>{t('modal.detail')} {id}, </span>\n                <span> {type}</span>\n            </p>\n        )\n\n        // ultimately use this block to fetch proper attribution from data\n        // workBiblioNote or workScanInfo\n        const attribution = this.buildAttribution(t)\n\n        const closeBtn = (\n            <button className=\"modal-btn\" onClick={hideModal}>\n                <i className=\"fa fa-2x fa-times\"></i> \n                {t('technical.btn-close')}\n            </button>\n        )\n\n        // set undefined to null for pre-render check\n        note !== undefined ? note = note.noteText : note = null\n    \n        switch(type) {\n            case 'Person':  \n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        <div className=\"\">\n                            <span className=\"lead-item\">{t('modal.names')}: </span>\n                            <span className=\"meta-catalog\">{ this.unpack(personName) }</span>\n                        </div>\n                        {closeBtn}\n                    </div>\n                )\n            case 'Topic':\n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        {note === null ? null : (\n                            <div className=\"meta-catalog\">{t('modal.note')}: { note !== null ? this.unpack(note) : null }</div>\n                        )}\n                        {closeBtn}\n                    </div>\n                )\n            case 'Work':\n                let scanBtn = this.buildScansBtn(access, t)\n                let img\n                if(access === 'bdr:AccessRestrictedByTbrc') {\n                    img = (\n                        <div>{t('modal.image-restricted')}</div>\n                    )\n                } else if(firstImage === null || firstImage === undefined) {\n                    img = (\n                        <div className=\"blinky\">{t('technical.loading-image')}</div>\n                    )\n                } else {\n                    img = (\n                        <img src={firstImage} width=\"100%\" alt=\"scan\" />\n                    )\n                }\n                \n                return (\n                    <div className=\"detail-data\">\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        \n                        {metaDetail}\n                        \n                        {img}\n\n                        {attribution}\n                        \n                        <div className=\"meta-catalog\">{ this.unpack(catalogInfo) }</div>\n                        \n                        {closeBtn}{scanBtn}\n                    </div>\n                )\n            default:\n                return null\n        }\n    }\n\n    buildScansBtn(access, t) {\n        let btn = null\n        if(this.props.manifestURL !== undefined) {\n            //window.localStorage.setItem(\"manifestURL\", this.props.manifestURL)\n            if(this.props.manifestURL.length === 0) {\n                //window.localStorage.setItem(\"manifestURL\", \"\")\n                btn = null\n            } else if(access === 'bdr:AccessRestrictedByTbrc') {\n                btn = (\n                    <button disabled={true}>\n                        <i className=\"fa fa-2x fa-eye-slash\"></i> {t('modal.scans-restricted')}\n                    </button>\n                )\n            } else {\n                btn = ( \n                    <a \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        href={process.env.PUBLIC_URL + '/uv.html?manifest=' + this.props.manifestURL}>\n                        <button>\n                            <i className=\"fa fa-2x fa-eye\"></i> {t('modal.scans')}\n                        </button>\n                    </a>\n                )\n            }\n        }\n        return btn\n    }\n    \n    render() {\n        const showHideClassName = this.props.show ? 'modal display-block' : 'modal display-none';\n        let data\n        \n        if(Object.keys(this.props.workDetail).length > 0) {\n            data = this.parseType(\n                this.props.workDetail._source, \n                this.props.hideModal,\n                this.props.firstImage,\n                this.props.t)\n        } else {\n            data = <div className=\"blinky\">{this.props.t('technical.loading')} {this.props.doc_id}</div>\n        }\n        return ( \n            <div \n                className={showHideClassName}\n                onClick={this.props.hideModal}\n            >\n                <section className='modal-main'>\n                    {data}\n                </section>\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    workDetail: state.detailData.isFetching || state.detailModal.modalID === 0 ? {} : state.detailData.item.hits.hits[0],\n    manifestURL: state.manifestData.isFetching || state.detailData.isFetching ? '' : state.manifestData.manifestURL,\n    numberVolumes: state.detailData.isFetching || state.detailModal.modalID === 0 ? null : state.detailData.item.hits.hits[0]._source.workNumberOfVolumes,\n    firstImage: state.IIIFData.isFetching || state.detailModal.modalID === 0 ? null : state.IIIFData.firstImage\n})\n\nconst withN = withNamespaces()(Modal)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { fetchSpecificID } from '../actions'\nimport Modal from './Modal'\n\nimport { withNamespaces } from 'react-i18next'\n\n/* of interest \n\n// ID & Category\n@id - bdr:...\ntype (Work, Person, Topic)\n\n// LINKS \ncreatorMainAuthor\nworkCreator\nworkGenre\nworkIsAbout (can be an array)\nworkHasPart (usually array)\n\n// For any of these, check the @language\n// TIBETAN bo-x-ewts\nnote.noteText['@value']\n['skos:prefLabel']['@value'] && ['@language']\nworkTitle['rdfs:label'] (can be an array)\n\n// ENGLISH (might be)\nworkBiblioNote\nworkCatalogInfo\n\n*/\nclass Archives extends Component {\n\n    // fetch ID from ES and show modal\n    showModal = (doc_id) => {\n        this.props.dispatch(fetchSpecificID(doc_id))\n        this.props.dispatch(\n            { type: 'DETAIL_MODAL', modalID: doc_id, show: true }\n        )\n    }\n\n    // close modal and nullify the IIIF image so there's no flash\n    // of previous image on next modal\n    hideModal = () => {\n        this.props.dispatch({ type: 'DETAIL_MODAL', show: false})\n        this.props.dispatch({ type: 'NULLIFY_IIIF'})\n    }\n\n    // parse out the frontend index \n    // this index built specifically for UI\n    // so that we can show values immediately, ie. The Buddha, not P809\n    unpackFrontend = (code, o) => {\n        if(code === 'P') {\n            let p = null\n            if(Array.isArray(o.data.personName)) {\n                p = o.data.personName.find(p => p.type === 'PersonPrimaryName');\n                p = p['rdfs:label']['@value']\n            }\n            //console.log('unpacking person', p)\n            return p\n        } else if(code === 'T') {\n            let g = null\n            if(Array.isArray(o.data['skos:prefLabel'])) {\n                g = o.data['skos:prefLabel'].find(g => g['@language'] === 'en')\n                g = g == null ? g = o.data['skos:prefLabel'].find(g => g['@language'] === 'bo-x-ewts') : g  \n                g = g['@value']  \n            } else if(typeof o.data['skos:prefLabel'] === 'object') {\n                g = o.data['skos:prefLabel']['@value']\n            }\n            //console.log('unpacking topic', g)\n            return g\n        } else if(code === 'W') {\n            console.log('I ended up in W', o)\n        } else {\n            return null\n        }\n    }\n\n    // parse out json\n    unpack = (arr) => {\n        if(arr === null || arr === undefined) {\n            return null\n        } else if(Array.isArray(arr)) {\n            return arr.map((a, i) => {\n                // if it's an array of objects then recursion\n                if(typeof a === 'object') {\n                    return this.unpack(a)\n                } else if(a.substring(0,3) === 'bdr') {\n                    return (\n                        <div key={i} className=\"card-sub-item\">\n                            <div onClick={() => this.showModal(a.split(\":\")[1])}>{a}</div>\n                        </div> \n                    )\n                } else {\n                    return ( <div key={i} className=\"card-sub-item\">{a}</div>)\n                }\n                \n            })\n        } else if (typeof arr === 'object') {\n                \n                if('key' in arr) {\n                    // return ID string\n                    if(arr.data.hasOwnProperty('@id')) {\n                        return arr.data['@id']\n                    } \n                    else {\n                        // return a frontend index item\n                        return this.unpackFrontend(arr.code, arr)\n                    }\n\n                // part of a language / value pair\n                } else if(arr.hasOwnProperty('@value')) {\n                    return arr['@value']\n                } else {\n                    // if you made it this far, it must be an rdfs item\n                    return ( <span key={arr['rdfs:label']['@value']}>{arr['rdfs:label']['@value']}</span> )\n                }\n                \n        } else if (typeof arr === 'string') {\n            // if string begins with bdr then we assume its indexed\n            if(arr.substring(0,3) === 'bdr') {\n                return ( <div onClick={() => this.showModal(arr.split(\":\")[1])}>{arr}</div> )\n            } else {\n                return (\n                    <span>{arr}</span>\n                )\n            }\n        }\n    }\n\n    // build an item for the CARD (grid item)\n    buildCardItem(item, code, lead) {\n        if(code === null) {\n            return null\n        } else {\n            return (\n                <div className=\"card-item\">\n                    <span className=\"item-lead\">{lead} </span> \n                    <span className=\"item-btn\" onClick={() => this.showModal(code)}>\n                        { this.unpack(item) }\n                    </span>\n                </div>\n            )\n        }\n    }\n\n    render() {\n        // loop over our initial 9 works\n        const items = this.props.works.map((work, i) => {\n            //console.log(work)\n            const { \n                'skos:prefLabel': label,\n                '@id': id,\n                // 'creatorMainAuthor': author,\n                //'workCreator': creator,\n                'workGenre': genre,\n                'workIsAbout': topic,\n                //'workTitle': title,\n                //'workHasPart': parts,\n                //'workNumberOfVolumes': volumes\n            } = work._source\n            \n            const author = work._source.creatorMainAuthor !== undefined ? work._source.creatorMainAuthor : null \n            const authorCode = author !== null ? author.item : null\n            const genreCode = genre !== undefined ? genre.item : null\n            const topicCode = topic !== undefined ? topic.item : null\n            const workCode = id !== undefined ? id.item : null\n            \n            const itemAuthor = this.buildCardItem(author, authorCode, `${this.props.t('archives.author')}:`)\n            const itemGenre = this.buildCardItem(genre, genreCode, `${this.props.t('archives.genre')}:`)\n            const itemTopic = this.buildCardItem(topic, topicCode, `${this.props.t('archives.topic')}:`)\n            \n            // CARD\n            return (\n                \n                <div key={i} className=\"card\">\n                    <p className=\"meta-detail\">{workCode}</p>\n                    <div className=\"card-item\">\n                        <span className=\"item-work\"> \n                            { this.unpack(label) }\n                        </span>\n                    </div>\n\n                    {itemAuthor}\n                    {itemGenre}\n                    {itemTopic}\n                    \n                    <button onClick={() => this.showModal(id.item)}>\n                        {`${this.props.t('archives.more')}:`}\n                    </button>\n                   \n                </div>\n            )\n        })\n        // GRID\n        return (\n            <div className=\"grid\">\n                {items}\n                {/* modal returned based on show prop */}\n                <Modal \n                    key={this.props.doc_id}\n                    hideModal={this.hideModal}\n                    doc_id={this.props.doc_id} \n                    show={this.props.showModal}\n                />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    works: state.data.isFetching ? [] : state.data.items.hits.hits,\n    workDetail: state.detailData.isFetching || state.detailModal.modalID === 0 ? {} : state.detailData.item.hits.hits[0],\n    doc_id: state.detailModal.modalID,\n    showModal: state.detailModal.show,\n    manifestURL: state.manifestData.isFetching ? '' : state.manifestData.manifestURL\n})\n\nconst withN = new withNamespaces()(Archives)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Header } from './Header';\nimport Footer from './Footer';\nimport Posts from './Posts'\nimport Stats from './Stats'\nimport Archives from './Archives'\n\nimport { defaultLanguage, \n  setLanguage,\n  languages,\n  setPage,\n  log\n} from '../actions'\n\nimport icon from '../assets/images/calligraphy_icon.ico'\nimport png from '../assets/images/endless-knot.png'\n\nimport { withNamespaces } from 'react-i18next'\n\nclass Page extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.setNumber = {\n      0: 'one',\n      1: 'one',\n      2: 'two',\n      3: 'three',\n      4: 'four'\n    }\n  }\n\n  componentWillMount() { \n    this.languageCheckAndUpdate()\n  }\n\n  componentDidUpdate() {\n    window.onpopstate  = (e) => {\n      e.preventDefault()\n      this.languageCheckAndUpdate()\n    }\n  }\n\n  languageCheckAndUpdate() {\n    const { history, url, selectedPage, dispatch, t } = this.props;\n    if(url.split('/')[2] !== undefined) {\n      if(Object.keys(t('pages')).includes(url.split('/')[2])) {\n        dispatch(setPage('archives'))\n      } else {\n        dispatch(setPage('home'))\n        history.push(`/${url.split('/')[1]}`)\n      }\n    } else {\n      dispatch(setPage('home'))\n    }\n    if(url.split('/')[1] in languages) { \n      this.setLang(url.split('/')[1], selectedPage)\n    } else {\n      this.setLang(defaultLanguage, selectedPage)\n      history.push(defaultLanguage)\n    }  \n  }\n\n  setLang = (lng) => {\n    const { i18n, dispatch } = this.props;\n    i18n.changeLanguage(lng) // change locale\n    dispatch(setLanguage(lng)) // set redux language\n\n  }\n\n  resetPage = () => {\n    this.props.dispatch({ type: 'SET_PAGE', page: 'home' });\n    this.setLang(defaultLanguage)\n  }\n\n  renderPage(selectedPage, pages) {\n    if (!pages.some(e => e.slug.split('-')[0] === selectedPage)) {\n      log('page not there');\n      this.resetPage();\n    }\n    return pages\n      .filter(page => page.slug.split('-')[0] === selectedPage)\n      .map((page, i) => {\n        let mediaURL = null\n        if(page._embedded[\"wp:featuredmedia\"]) {\n          mediaURL = page._embedded[\"wp:featuredmedia\"][0].source_url\n        }\n        return (\n          <div key={page.slug}>\n          \n          <section \n            id=\"banner\" \n            key={page.id}\n            style={{\n              backgroundImage: \n                `linear-gradient(to bottom, \n                  rgba(239, 239, 239,0.1) 50%,\n                  rgba(239, 239, 239,1.0) 100%), \n                  url(${mediaURL})`\n            }}>\n            <header className=\"major\">\n              {/* <span className=\"icon fa-book style7\"></span> */}\n              <span className=\"icon style7\">\n                <img width=\"90px\" alt=\"hi\" src={icon} />\n              </span>\n              <h1>{page.acf.title}</h1>\n              <h3>{page.acf.subtitle}</h3>\n              {/* {this.props.t('description.part2')} */}\n             \n              <div className=\"inner-page\">\n                <section className=\"spotlights-page\">\n                  <p dangerouslySetInnerHTML={{__html: page.content.rendered}} />\n                </section>\n            </div>\n            </header>\n          </section>\n          {/* {selectedPage === 'home' ? null : \n          <section className={`wrapper special style1`}>\n            spotlights orig location\n          </section>\n          } */}\n          </div>\n        )\n    })\n  }\n\n  render() {\n   \n    if(this.props.fetchingPages || this.props.fetchingPosts) {\n        return (\n          <div className=\"blinky\">{this.props.t('technical.loading')}</div>\n        )\n    }\n    return (\n      <div className=\"container\">\n        <Header />\n        { this.renderPage(this.props.selectedPage, this.props.pages) }\n        { log(\"is it archives?\", this.props.selectedPage, this.props.pages)}\n        { this.props.selectedPage === 'home' ? \n          <div>\n            <Stats stats={this.props.gs} t={this.props.t} />\n            <Posts />\n          </div> : null }\n        { this.props.selectedPage === 'archives' ? <Archives /> : null }\n        <Footer />\n      </div>\n    )\n  }\n\n}\n\nconst mapStateToProps = (state) => {\n  //console.log('state in Page component', state)\n  //console.log('ownProps in Page component', ownProps)\n  \n  return {\n    router: state.router,\n    url: state.router.location.pathname,\n    fetchingPages: state.pages.isFetching,\n    selectedLanguage: state.selectedLanguage || defaultLanguage,\n    selectedPage: \n      state.pages.isFetching ? \n      [] : \n      state.pages.items[state.selectedLanguage].some(page => page.slug.split('-')[0] === state.selectedPage) ? \n      state.selectedPage : \"home\",\n    pages: state.pages.isFetching ? [] : state.pages.items[state.selectedLanguage],\n    gs: state.gsData.isFetching ? {} : state.gsData.gs\n  }\n};\n\nconst withN = new withNamespaces()(Page)\nexport default connect(mapStateToProps)(withN);","import React from 'react';\nimport { Route, Switch, Redirect, BrowserRouter as Router } from 'react-router-dom';\n//import { LanguageArray } from './actions'\n\nimport Page from './components/Page'\n\nconst Routes = () => {\n\n    // <Switch> \n    //     <Route exact path=\"/:lng(en|mn)?\" component={LandingPage} />\n    // </Switch>\n\n    //check to see if it's /:l or just l \n    // const route = Object.entries(languages).map(([l, k]) => {\n    //     console.log('creating routes', k, l)\n    //     return <Route key={l} path={`/${k}/:page`} component={Page} />\n    // })\n\n    //return <Route key={l} path={`/${l}/:page`} component={Page} />\n    //using the full lang names here, change to use codes\n    // const route = LanguageArray.map(l => {\n    //     return (\n    //         <Route key={l} path={`/${l}`} component={Page} />\n    //     )\n    // })\n \n    return (\n        <Router>\n            <Switch>\n                {/* <Route exact path=\"/\" component={Page} /> */}\n                {/* <Route path={`/en/home`} component={Page} />\n                <Route path={`/en/arch`} component={Page} /> */}\n                {/* <Route key=\"en\" path={`/en/:page`} component={Page} />\n                <Route key=\"mn\" path={`/mn/:page`} component={Page} /> */}\n                {/* {route} */}\n                <Route path={`/en`} component={Page} />\n                <Route path={`/mn`} component={Page} />\n                <Route path={`/en/archives`} component={Page} />\n                <Route path={`/mn/archives`} component={Page} />\n                <Route path={`/mn/Архивууд`} component={Page} />\n                <Redirect push from=\"*\" to=\"/en\" component={Page} />\n            </Switch>\n        </Router>\n    )\n\n};\n\nexport default Routes;","import i18n from 'i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { reactI18nextModule } from 'react-i18next';\n\n\n// NOTE THAT 'en' is attempting to be loaded because of LanguageDetector (probably)\n// and in our case we're loading 'English'\n// this is due to how I originally coded the component\n// refactor to use language codes :)\n\ni18n\n  // load translation using xhr -> see /public/locales\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to the react-i18next components.\n  // Alternative use the I18nextProvider: https://react.i18next.com/components/i18nextprovider\n  .use(reactI18nextModule)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: 'en',\n    debug: true,\n    load: 'languageOnly',\n    returnObjects: true,\n\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    },\n\n    // special options for react-i18next\n    // learn more: https://react.i18next.com/components/i18next-instance\n    react: {\n      wait: true\n    }\n  });\n\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport { Provider } from 'react-redux';\nimport thunkMiddleware from 'redux-thunk'\n\nimport { createBrowserHistory } from 'history'\nimport { routerMiddleware, ConnectedRouter } from 'connected-react-router'\n\nimport { fetchPages, fetchPosts, fetchData, getGS } from './actions'\nimport rootReducer from './reducers'\n\nimport Routes from './router'\n\nimport { checkConnection } from './server/connection'\n\nimport './assets/css/main.css'\nimport './assets/css/index.css'\n\n// this is what gives the entire app access to t, i18n...\nimport './i18n'\n\nconst loggerMiddleware = createLogger()\nconst history = createBrowserHistory()\n\nconst store = createStore(\n    rootReducer(history),\n    compose(\n        applyMiddleware(\n            routerMiddleware(history),\n            thunkMiddleware,\n            loggerMiddleware \n        )\n    )\n)\n//console.log('initial state index.js', store.getState()) \n// THIS COULD BE REPLACED WITH ONE 'INITIALIZE APP' type function\n// GET PAGES, POSTS, ES DATA\n\nstore.dispatch(fetchPages())\nstore.dispatch(fetchPosts())\n//store.dispatch(fetchData())\n\nstore.dispatch(getGS())\ncheckConnection()\nstore.dispatch(fetchData())\n\nconst App = () => {\n    document.body.classList.add('landing');\n    return (\n        <Provider store={store}>\n            <ConnectedRouter history={history}>\n                <Routes />\n            </ConnectedRouter>\n        </Provider>\n    );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}