{"version":3,"sources":["assets/images/UB-woodblock-closeup.jpg","assets/images/calligraphy_icon.ico","assets/images/endless-knot.png","serviceWorker.js","store/actions/types.js","store/collections/nlm01.js","store/connection.js","store/queries/initialAuthorsSearch.js","store/queries/initialTopicsSearch.js","store/queries/searchByID.js","store/actions/searchActions.js","store/queries/resources.js","store/actions/googleSheetsActions.js","store/actions/WPPagesActions.js","store/actions/WPPostsActions.js","store/actions/utilityActions.js","store/actions/index.js","store/reducers/index.js","containers/Language.js","components/Languages.js","containers/NavItem.js","components/Nav.js","components/Header.js","components/Footer.js","components/Posts.js","components/Stats.js","components/Modal.js","components/Archives.js","components/Page.js","router.js","i18n.js","index.js"],"names":["module","exports","__webpack_require__","p","Boolean","window","location","hostname","match","REQUEST_PAGES","RECEIVE_PAGES","REQUEST_POSTS","RECEIVE_POSTS","REQUEST_GS","RECEIVE_GS","DETAIL_MODAL","RECEIVE_MANIFEST","REQUEST_MANIFEST","NULLIFY_IIIF","RECEIVE_IIIF","REQUEST_IIIF","RECEIVE_DATA","REQUEST_DATA","REQUEST_ID","RECEIVE_ID","RECEIVE_AUTHORS","REQUEST_AUTHORS","RECEIVE_TOPICS","REQUEST_TOPICS","REQUEST_RESOURCES","RECEIVE_RESOURCES","collection_v1","host","isConnected","healthStatus","client","elasticsearch","Client","protocol","port","path","log","_callee","health","regenerator_default","a","wrap","_context","prev","next","cluster","sent","status","t0","console","error","abrupt","stop","this","initialAuthorSearch","ids","body","aggregations","uniqueAuthors","terms","field","size","length","query","type","searchParams","values","search","index","initialIndex","initialTopicsSearch","uniqueTopics","searchByID","code","allSource","arguments","undefined","sortValue","source","_source","sort","Object","defineProperty","order","receiveAuthors","data","types","receivedAt","Date","now","receiveTopics","fetchResources","id","resources","dispatch","v1Indices","searchResources","then","hits","fetchSpecificID","doc_id","charAt","dataDetail","json","imageAsset","workHasItemImageAsset","volume","workHasItem","spreadSheet","concat","tableTopInit","_ref","asyncToGenerator","mark","Promise","response","Tabletop","init","key","callback","tabletop","Stats","elements","apply","nodeWP","endpointWP","defaultLanguage","languages","en","mn","IIIFImageAPI","IIIFsuffix","setLanguage","language","setPage","page","content","state","isFetching","items","action","assign","pages","lastUpdated","posts","gs","item","manifestURL","firstImage","modalID","image","show","works","authors","topics","detailData","gsData","manifestData","IIIFData","selectedLanguage","payload","pathname","split","detailModal","selectedPage","rootReducer","history","combineReducers","router","connectRouter","withN","withNamespaces","active","children","lang","i18n","react_default","createElement","onClick","lng","changeLanguage","className","style","color","disabled","connect","ownProps","props","list","entries","t","map","_ref2","slicedToArray","k","l","Link","to","containers_Language","navigation","slugs","nav","slug","containers_NavItem","c","title","substring","rendered","menu_order","Header","components_Languages","Nav","src","alt","href","target","rel","fetchingPosts","nestedObj","prop","arr","b","post","i","j","mediaURL","_embedded","source_url","parseInt","acf","columns","dangerouslySetInnerHTML","__html","stats","LastUpdate","PagesDigitized","VolumesDigitized","img","Modal","unpackNames","Array","isArray","unpack","_this","showModal","hasOwnProperty","buildAttribution","parseType","hideModal","label","catalogInfo","personName","note","access","metaDetail","attribution","closeBtn","noteText","scanBtn","buildScansBtn","width","btn","showHideClassName","keys","workDetail","Component","numberVolumes","workNumberOfVolumes","Archives","imageURL","unpackFrontend","o","find","g","getAuthorNames","n","_id","getPrefLabel","codes","dataType","some","_resources","getImage","URL","fetch","catch","resp","ok","_this2","work","_work$_source","notes","workCreator","workIsAbout","_firstImageURL","_manifestURL","subjects","components_Modal","Page","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","setLang","_this$props","resetPage","setNumber","0","1","2","3","4","languageCheckAndUpdate","onpopstate","e","preventDefault","_this$props2","url","includes","push","filter","backgroundImage","icon","subtitle","fetchingPages","Header_Header","renderPage","components_Stats","components_Posts","components_Archives","components_Footer","Routes","BrowserRouter","Switch","Route","component","Redirect","from","use","Backend","LanguageDetector","reactI18nextModule","fallbackLng","debug","load","returnObjects","interpolation","escapeValue","react","wait","loggerMiddleware","createLogger","createBrowserHistory","store","createStore","compose","applyMiddleware","routerMiddleware","thunkMiddleware","reduce","r","x","receivePages","receivePosts","_callee2","_context2","d","StatName","join","isNaN","Value","String","replace","_x","checkConnection","buckets","_x2","_ref3","_callee3","_context3","_x3","ReactDOM","render","document","classList","add","es","esm","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"uNAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,sECAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oICAxCH,EAAAC,QAAiBC,EAAAC,EAAuB,oKCYpBC,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,yHCdOC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAgB,gBAChBC,EAAgB,gBAEhBC,EAAa,aACbC,EAAa,aAEbC,EAAe,eAEfC,EAAmB,mBACnBC,EAAmB,mBACnBC,EAAe,eACfC,EAAe,eACfC,EAAe,eAEfC,EAAe,eACfC,EAAe,eACfC,EAAa,aACbC,EAAa,aAEbC,EAAkB,kBAClBC,EAAkB,kBAElBC,EAAiB,iBACjBC,EAAiB,iBAEjBC,EAAoB,oBACpBC,EAAoB,6CChCpBC,EAAgB,CACzB,aACA,aACA,iBACA,iBACA,iBACA,gBACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,gBACA,gBACA,gBACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,eACA,gBACA,eACA,eACA,aACA,aACA,aACA,sBCjDEC,EAAO,iBAGTC,GAAc,EACdC,EAAe,MAEbC,EAAS,WAAIC,EAAcC,QAAO,CACvCL,KAAM,CACLM,SAAU,OACVN,KAAMA,EACNO,KAZW,KAaXC,KAAM,IAEPC,IAAK,oDAGN,SAAAC,IAAA,IAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACCR,GAAI,wBAAyBT,GAD9B,UAEQC,EAFR,CAAAc,EAAAE,KAAA,SAGER,GAAI,qBAHN,UAIyB,QAAjBP,EAJR,CAAAa,EAAAE,KAAA,gBAKGR,GAAI,wBALPM,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAOyBd,EAAOe,QAAQP,OAAO,IAP/C,OAOUA,EAPVI,EAAAI,KAQIV,GAAI,WAAYE,GAChBT,EAAeS,EAAOS,OACtBnB,GAAc,EAVlBc,EAAAE,KAAA,iBAAAF,EAAAC,KAAA,GAAAD,EAAAM,GAAAN,EAAA,SAYIO,QAAQC,MAAM,2BAAdR,EAAAM,IACApB,GAAc,EAblB,QAAAc,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,uBAAAF,EAAAS,OAAA,SAiCQvB,GAjCR,yBAAAc,EAAAU,SAAAf,EAAAgB,KAAA,oCClBO,IAAMC,EAAsB,SAACC,GAEnC,IAAMC,EAAO,CAMNC,aAAc,CACVC,cAAe,CACXC,MAAO,CACHC,MAAO,sBACPC,KAAMN,EAAIO,UAK5BC,MAAO,CACGR,IAAK,CACDS,KAAMC,GAAaD,KACnBE,OAAQX,KAMvB,OAAOzB,EAAOqC,OAAO,CAAEC,MAAOH,GAAaI,aAAcb,UC1B7Cc,EAAsB,SAACf,GAEnC,IAAMC,EAAO,CAGNC,aAAc,CACVc,aAAc,CACVZ,MAAO,CACHC,MAAO,sBACPC,KAAMN,EAAIO,UAK5BC,MAAO,CACGR,IAAK,CACDS,KAAMC,GAAaD,KACnBE,OAAQX,KAMvB,OAAOzB,EAAOqC,OAAO,CAAEC,MAAOH,GAAaI,aAAcb,mBCvB7CgB,EAAa,SAACjB,EAAKM,EAAMY,GAA4B,IAG1DL,EAHoCM,EAAsBC,UAAAb,OAAA,QAAAc,IAAAD,UAAA,IAAAA,UAAA,GAE1DE,EAAY,KAEZC,EAAS,GAGD,MAATL,GACCL,EAAQ,iBACRU,EAAS,CAAC,aAAc,iBAAkB,OAE3B,MAATL,GACNL,EAAQ,CAAC,iBAAkB,gBAAiB,gBAC5CU,EAAS,CACL,aAAc,MAAO,gBAAiB,iBACtC,cAAe,cACf,OAIS,MAATL,IACJL,EAAQ,eACRS,EAAY,gCACZC,EAAS,CACL,MAAO,gBAAiB,iBACxB,cAAe,cACf,OAKX,IAAMtB,EAAO,CAENK,KAAMA,EAEZE,MAAO,CACGR,IAAK,CACDS,KAAMC,GAAaD,KACnBE,OAAQX,KAevB,OATOmB,IAAalB,EAAKuB,QAAUD,GAEf,OAAdD,IAECrB,EAAKwB,KAAO,CAACC,OAAAC,EAAA,EAAAD,CAAA,GAAIJ,EAAY,CAAEM,MA3CxB,UA8Cd/C,GAAI,oBAAqBoB,GAElB1B,EAAOqC,OAAO,CAAEC,MAAOA,EAAOZ,UC0BtC,SAAS4B,EAAeC,GACpB,MAAO,CACHrB,KAAMsB,EACND,KAAMA,EACNE,WAAYC,KAAKC,OASzB,SAASC,EAAcL,GACnB,MAAO,CACHrB,KAAMsB,EACND,KAAMA,EACNE,WAAYC,KAAKC,OAkClB,IAAME,EAAiB,SAACC,EAAIC,GAC/B,OAAO,SAAAC,GACH1D,GAAI,kBAAmBwD,EAAIC,GAC3BC,EAhBG,CACH9B,KAAMsB,IAgBN,KCtIuB,SAAC/B,GAO/BnB,GAAI,qBAAsBmB,EAAIO,QAE9B,IAAMM,EAAQ,CAAC2B,IAETvC,EAAO,CAEZK,KAAMN,EAAIO,OACVC,MAAO,CACGR,IAAK,CACDS,KAAMC,GAAaD,KACnBE,OAAQX,KAOvB,OAFAnB,GAAI,uBAAwBoB,GAErB1B,EAAOqC,OAAO,CACnBC,QACAZ,UD6GSwC,CAAgBH,GAAWI,KAAK,SAACZ,GAC7BS,EAbL,CACH9B,KAAMsB,EACND,KAWkCA,EAXvBa,KACXX,WAAYC,KAAKC,UAYf,MAAOvC,GACLD,QAAQC,MAAM,0BAA2BA,MAK9C,SAASiD,EAAgBC,GAC5B,OAAO,SAAAN,GACH1D,GAAI,mBAAoBgE,GACxBN,EA9CG,CACH9B,KAAMsB,IA8CN,IACId,EAAW,CAAC4B,GAAS,EAAGA,EAAOC,OAAO,IAAI,GAAMJ,KAAK,SAACK,GAClD,OAAOR,EA3CZ,CACH9B,KAAMsB,EACND,KAHWkB,EA4CuBD,EAxClCE,WAAYD,EAAKL,KAAKA,KAAK,GAAGnB,QAAQ0B,sBACtCC,OAAQH,EAAKL,KAAKA,KAAK,GAAGnB,QAAQ4B,YAClCpB,WAAYC,KAAKC,QANzB,IAAmBc,IA8CT,MAAMrD,GACJD,QAAQC,MAAM,mBAAoBA,8BErJxC0D,GAAW,GAAAC,OAHV,2CAGUA,OAFN,+CAEM,qBAgBjB,IAAMC,GAAY,eAAAC,EAAA9B,OAAA+B,EAAA,EAAA/B,CAAA1C,EAAAC,EAAAyE,KAAG,SAAA5E,IAAA,OAAAE,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACJ,IAAIsE,QAAQ,SAACC,EAAUjE,GAChCkE,KAASC,KAAK,CACVC,IAAKV,GACLW,SAAU,SAAClC,EAAMmC,GACbL,EAAS9B,EAAKoC,MAAMC,UACpBxE,EAAMsE,QAND,cAAA9E,EAAAS,OAAA,SAAAT,EAAAI,MAAA,wBAAAJ,EAAAU,SAAAf,EAAAgB,SAAH,yBAAA0D,EAAAY,MAAAtE,KAAAsB,YAAA,GCpBX,IAAMiD,GAAS,wBAGhBC,GAAa,iBCHnB,IAAMD,GAAS,wBACTC,GAAa,iBCJZ,IAAMzF,GAAM,aCUN0F,GAAkB,KAClBC,GAAY,CACvBC,GAAI,UACJC,GAAI,aAGOhE,GAAe,CAC1BI,aAAc,eACdL,KAAM,OACNH,KAAM,IAGKkC,GAAY,CAAC,QAGpBmC,GAEE,MAFFA,GAGM,IAHNA,GAIc,cAGPC,GAAU,IAAAtB,OANb,OAMa,KAAAA,OACMqB,GADN,KAAArB,OAC2BqB,GAD3B,KAAArB,OACoDqB,IAE9DE,GAAc,SAAAC,GAAQ,MAAK,CACtCrE,KZlCsB,WYmCtBqE,aAGWC,GAAU,SAAAC,GAAI,MAAK,CAC5BvE,KZtCoB,WYuCpBuE,SCrCJ,SAASC,KAMP,IALEC,EAKF9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GALU,CACJ+D,YAAY,EACZC,MAAO,IAEXC,EACFjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EACE,OAAOgE,EAAO5E,MACV,KAAKsB,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZC,MAAOC,EAAOE,MACdC,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZC,MAAOC,EAAOI,MACdD,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZC,MAAOC,EAAOvD,KACd0D,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EAML,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZC,MAAOC,EAAOvD,KACd0D,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZC,MAAOC,EAAOvD,KACd0D,YAAaH,EAAOrD,aAE5B,KAAKD,EAIL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZO,GAAIL,EAAOK,GACXF,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZQ,KAAMN,EAAOvD,KACbmB,WAAYoC,EAAOpC,WACnBE,OAAQkC,EAAOlC,OACfqC,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZS,YAAaP,EAAOO,YACpBJ,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,IAEpB,KAAKpD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BC,YAAY,EACZU,WAAYR,EAAOQ,WACnBL,YAAaH,EAAOrD,aAE5B,KAAKD,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BW,WAAY,OAEpB,KAAK9D,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAO,CAC5BY,QAAST,EAAOS,QAChBC,MAAOV,EAAOU,MACdC,KAAMX,EAAOW,OAErB,QACI,OAAOd,GAInB,SAASK,KAA0B,IAApBL,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC/B,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASe,KAA0B,IAApBf,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC/B,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAAS5C,KAA8B,IAApB4C,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EACnC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASgB,KAA4B,IAApBhB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EACjC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASiB,KAA2B,IAApBjB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAChC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASkB,KAA+B,IAApBlB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EACpC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASmB,KAA2B,IAApBnB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAChC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASoB,KAAiC,IAApBpB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EACtC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASqB,KAA6B,IAApBrB,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAClC,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,SAASO,KAA0B,IAApBP,EAAoB9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAZ,GAAIiE,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC/B,OAAOgE,EAAO5E,MACV,KAAKsB,EACL,KAAKA,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAKnB,IAAMsB,GAAmB,WAAqC,IAApCtB,EAAoC9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAA5BmD,GAAiBc,EAAWjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC1D,OAAQgE,EAAO5E,MACX,IbxOgB,WayOZ,OAAO4E,EAAOP,SAClB,Ib5OuB,2Ba6OnB,OAA6D,IAA1DO,EAAOoB,QAAQ/J,SAASgK,SAASC,MAAM,KAAK,GAAGpG,OACvC2E,EAEJG,EAAOoB,QAAQ/J,SAASgK,SAASC,MAAM,KAAK,GACzD,QACE,OAAOzB,IAIf,SAAS0B,KAAyD,IAA7C1B,EAA6C9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAArC,CAAE0E,QAAS,EAAGC,MAAO,MAAQV,EAAQjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC9D,OAAOgE,EAAO5E,MACV,KAAKsB,EACD,OAAOL,OAAO4D,OAAO,GAAIJ,EAAOD,GAAQC,EAAOG,IACnD,QACI,OAAOH,GAInB,IAAM2B,GAAe,WAA4B,IAA3B3B,EAA2B9D,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAnB,OAAQiE,EAAWjE,UAAAb,OAAA,EAAAa,UAAA,QAAAC,EAC7C,OAAQgE,EAAO5E,MACX,Ib9PgB,Wa+PZ,OAAO4E,EAAOL,KAClB,QACI,OAAOE,IAqBJ4B,GAjBK,SAACC,GAAD,OAAaC,YAAgB,CAC7CC,OAAQC,YAAcH,GACtBP,oBACAK,gBACAtB,SACAE,SACAQ,SACAC,WACAC,UACA7D,aACA+D,UACAD,cACAE,gBACAC,YACAK,0HC7OEO,IAAQ,IAAIC,KAAJ,CAnCG,SAAA5D,GAAgD,IAA7C6D,EAA6C7D,EAA7C6D,OAAQC,EAAqC9D,EAArC8D,SAAU/E,EAA2BiB,EAA3BjB,SAAUgF,EAAiB/D,EAAjB+D,KAAMC,EAAWhE,EAAXgE,KAOpD,OACEC,EAAAxI,EAAAyI,cAAA,MACE3D,IAAKuD,EACLK,QAAS,WARM,IAACC,EASdrF,EAASsC,GAAY0C,IATPK,EAUHL,EATf7H,QAAQb,IAAI,6BAA8B+I,GAC1CJ,EAAKK,eAAeD,IAUlBE,UAAWT,EAAS,cAAgB,OACpCU,MAAOV,EACL,CAAEW,MAAO,OACT,CAAEA,MAAO,UAGbP,EAAAxI,EAAAyI,cAAA,UACE3D,IAAKuD,EACLW,WAAUZ,EACVS,UAAU,YACTR,MAYQY,eANS,SAAChD,EAAOiD,GAAR,MAAsB,CAC5Cd,OAAQc,EAAS3B,mBAAqBtB,EAAMsB,iBAC5Ce,KAAMY,EAAS3B,kBAAoBjC,KAItB2D,CAAyBf,cCRlCA,IAAQ,IAAIC,KAAJ,CAvBI,SAACgB,GACf,IAAIC,EAaJ,OAXIA,EAAO3G,OAAO4G,QAAQF,EAAMG,EAAE,kBAAkBC,IAAI,SAAAhF,GAAY,IAAAiF,EAAA/G,OAAAgH,GAAA,EAAAhH,CAAA8B,EAAA,GAAVmF,EAAUF,EAAA,GAAPG,EAAOH,EAAA,GAEtDlM,EAAmB,SAAf6L,EAAMpD,KAAkB,GAAxB,IAAA1B,OAAiC8E,EAAMpD,MACjD,OACIyC,EAAAxI,EAAAyI,cAACmB,GAAA,EAAD,CAAM9E,IAAK4E,EAAGG,GAAE,IAAAxF,OAAMqF,GAANrF,OAAU/G,IACtBkL,EAAAxI,EAAAyI,cAACqB,GAAD,CAAUhF,IAAK6E,EAAGpC,iBAAkBmC,GAC/BC,MAMjBnB,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,iBAAiBO,KAUxBH,eANS,SAAChD,GAAD,MAAY,CAChCF,KAAME,EAAM2B,eAKDqB,CAAyBf,ICIzBe,eARS,SAAChD,EAAOiD,GAAR,MAAsB,CAC5Cd,OAAQc,EAAStB,eAAiB3B,EAAM2B,eAGf,SAACtE,EAAU4F,GAAX,MAAyB,CAChDR,QAAS,kBAAMpF,EAASwC,GAAQoD,EAAStB,kBAG9BqB,CAnCC,SAAA1E,GAAA,IAAG6D,EAAH7D,EAAG6D,OAAQC,EAAX9D,EAAW8D,SAAUK,EAArBnE,EAAqBmE,QAArB,OACZF,EAAAxI,EAAAyI,cAAA,MACE3D,IAAKuD,EACJK,QAASN,EAAS,KAAOM,EACzBG,UAAWT,EAAS,aAAe,MACnCU,MAAOV,EACN,CAAEW,MAAO,OACT,CAAEA,MAAO,UAGbP,EAAAxI,EAAAyI,cAAA,UACE3D,IAAKuD,EACLW,WAAUZ,EACVS,UAAU,WACTR,MC8BDH,IAAQ,IAAIC,KAAJ,CA1CC,SAACgB,GACdvJ,GAAI,6BAA8BuJ,EAAMY,YAEtC,IAAMC,EAAQb,EAAMY,WAAWR,IAAI,SAAAU,GACjC,IAAM3M,EAAkB,SAAd2M,EAAItM,MAAmB,GAAvB,IAAA0G,OAAgC4F,EAAItM,OAC5C,OACE6K,EAAAxI,EAAAyI,cAACmB,GAAA,EAAD,CAAM9E,IAAKmF,EAAIC,KAAML,GAAE,IAAAxF,OAAM8E,EAAMR,KAAZtE,OAAkB/G,IACvCkL,EAAAxI,EAAAyI,cAAC0B,GAAD,CAASrF,IAAKmF,EAAIC,KAAMtC,aAAcqC,EAAItM,OACvCwL,EAAMG,EAAE,SAASW,EAAItM,WAMhC,OACF6K,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,YACZmB,KA2BWf,eAPS,SAAChD,GAAD,MAAY,CAChC8D,YAfsBzD,EAeOL,EAAMK,MAAMH,MAAMF,EAAMsB,kBAb9CjB,EAAMiD,IAAI,SAAAa,GACb,MAAO,CAELzM,MAAOyM,EAAEF,KAAKxC,MAAM,KAAK,GACzB2C,MAAgC,SAAzBD,EAAEF,KAAKI,UAAU,EAAE,GAAe,OAASF,EAAEC,MAAME,SAC1DL,KAAME,EAAEF,KACRvH,MAAOyH,EAAEI,eAQflC,KAAMrC,EAAMsB,iBACZxB,KAAME,EAAM2B,cAjBS,IAACtB,GAqBX2C,CAAyBf,IC7C3BuC,GAAS,WAClB,OACIjC,EAAAxI,EAAAyI,cAAA,UAAQrF,GAAG,UAChBoF,EAAAxI,EAAAyI,cAACiC,GAAD,MACSlC,EAAAxI,EAAAyI,cAACkC,GAAD,QC4CGxC,kBAjDA,SAACgB,GACZ,OACIX,EAAAxI,EAAAyI,cAAA,UAAQrF,GAAG,UACPoF,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,QACbL,EAAAxI,EAAAyI,cAAA,OACEmC,IAAG,UAAAvG,OVLG,gBUKH,oDACHwG,IAAI,mBAURrC,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,QACVL,EAAAxI,EAAAyI,cAAA,UACID,EAAAxI,EAAAyI,cAAA,KACIqC,KAAK,gCACLC,OAAO,SACPC,IAAI,uBACC7B,EAAMG,EAAE,oBAGrBd,EAAAxI,EAAAyI,cAAA,UACID,EAAAxI,EAAAyI,cAAA,KACIqC,KAAK,gCACLC,OAAO,SACPC,IAAI,uBACC7B,EAAMG,EAAE,yBAGrBd,EAAAxI,EAAAyI,cAAA,UACID,EAAAxI,EAAAyI,cAAA,KACIqC,KAAK,oCACLC,OAAO,SACPC,IAAI,uBACC7B,EAAMG,EAAE,mBAIzBd,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,aAAb,WAAAxE,OPrCa,OOqCb,KAAAA,OAC4B8E,EAAMG,EAAE,SADpC,MAAAjF,OACiD8E,EAAMG,EAAE,iBADzD,SCoBGL,uBANS,SAAChD,GAAD,MAAY,CAChCgF,cAAehF,EAAMO,MAAMN,WAC3BqB,iBAAkBtB,EAAMsB,iBACxBf,MAAOP,EAAMO,MAAMN,WAAa,ITjDTgF,ESiDyB,MTjDdC,ESiDqB,QTjDfC,ESiDwBnF,EAAMO,MAAML,MAAMF,EAAMsB,kBThDjF6D,EAAI5I,KAAK,SAACxC,EAAGqL,GAChB,OAAIrL,EAAEkL,GAAWC,GAAQE,EAAEH,GAAWC,IAC1B,EACDnL,EAAEkL,GAAWC,GAAQE,EAAEH,GAAWC,GAClC,EAEA,MAPO,IAACD,EAAWC,EAAMC,GSoD7BnC,CA3DD,SAAA1E,GAAe,IAAZiC,EAAYjC,EAAZiC,MAEb,OAAIA,EAMGA,EAAM+C,IAAI,SAAC+B,EAAMC,GAGpB,IAAIC,EAAID,EAAI,IAAM,EAAI,EAAI,EAEtBE,EAAW,GAKf,OAJGH,EAAKI,UAAU,sBACdD,EAAWH,EAAKI,UAAU,oBAAoB,GAAGC,YAAc,IAGjC,IAA/BC,SAASN,EAAKO,IAAIC,UACjBrL,QAAQb,IAAI,cAER4I,EAAAxI,EAAAyI,cAAA,WAAS3D,IAAKyG,EAAGnI,GAAImI,EAAG1C,UAAS,wBAAAxE,OAA0BmH,IACvDhD,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,SACXL,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,cACfL,EAAAxI,EAAAyI,cAAA,eACID,EAAAxI,EAAAyI,cAAA,UAAK6C,EAAKO,IAAIxB,OACd7B,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,SAAQL,EAAAxI,EAAAyI,cAAA,OAAKmC,IAAKa,EAAUZ,IAAI,OAEpDrC,EAAAxI,EAAAyI,cAAA,eACID,EAAAxI,EAAAyI,cAAA,KAAGsD,wBAAyB,CAACC,OAAQV,EAAKtF,QAAQuE,iBAQlE/B,EAAAxI,EAAAyI,cAAA,WAAS3D,IAAKyG,EAAGnI,GAAImI,EAAG1C,UAAS,wBAAAxE,OAA0BmH,IACvDhD,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,SACXL,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,mBACfL,EAAAxI,EAAAyI,cAAA,eACID,EAAAxI,EAAAyI,cAAA,UAAK6C,EAAKO,IAAIxB,OACd7B,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,SAAQL,EAAAxI,EAAAyI,cAAA,OAAKmC,IAAKa,EAAUZ,IAAI,MAChDrC,EAAAxI,EAAAyI,cAAA,KAAGsD,wBAAyB,CAACC,OAAQV,EAAKtF,QAAQuE,kBAxCnE/B,EAAAxI,EAAAyI,cAAA,oCC8BAxD,WAnCD,SAAAV,GAAkB,IAAf0H,EAAe1H,EAAf0H,MAAO3C,EAAQ/E,EAAR+E,EACpB,OACId,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,0BACfL,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,SACXL,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,cACfL,EAAAxI,EAAAyI,cAAA,eACID,EAAAxI,EAAAyI,cAAA,UAAKa,EAAE,gBACPd,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,cACVL,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,aACVL,EAAAxI,EAAAyI,cAAA,SAAIa,EAAE,oBAAN,KAA4Bd,EAAAxI,EAAAyI,cAAA,UAAKwD,EAAMC,cAE3C1D,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,aACdL,EAAAxI,EAAAyI,cAAA,SAAIa,EAAE,wBAAN,KAAgCd,EAAAxI,EAAAyI,cAAA,UAAKwD,EAAME,kBAE3C3D,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,aACdL,EAAAxI,EAAAyI,cAAA,SAAIa,EAAE,0BAAN,KAAkCd,EAAAxI,EAAAyI,cAAA,UAAKwD,EAAMG,oBAE7C5D,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,aACdL,EAAAxI,EAAAyI,cAAA,SAAIa,EAAE,0BAAN,KAAkCd,EAAAxI,EAAAyI,cAAA,UAAKwD,EAAM,mCAE7CzD,EAAAxI,EAAAyI,cAAA,MAAII,UAAU,aACdL,EAAAxI,EAAAyI,cAAA,SAAIa,EAAE,yBAAN,KAAiCd,EAAAxI,EAAAyI,cAAA,UAAKwD,EAAM,8BAIpDzD,EAAAxI,EAAAyI,cAAA,eACID,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,SAAQL,EAAAxI,EAAAyI,cAAA,OAAKmC,IAAKyB,KAAKxB,IAAI,YC3B7DyB,iNAEFC,YAAc,SAACnB,EAAK5J,GAEhB,GAAGgL,MAAMC,QAAQrB,EAAI,eAAgB,CAEjC,IAAMpL,EAAIoL,EAAI,cAAc7B,IAAI,SAACI,EAAG4B,GAEhC,OACI/C,EAAAxI,EAAAyI,cAAA,KAAG3D,IAAKyG,EAAG1C,UAAU,cACjBL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,gBAAhB,IAAiCc,EAAE,aAAnC,OACAnB,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,cAAcc,EAAE,cAK5C,OACInB,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKtD,EAAMqH,UAAU,cACtBL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,eAAerH,EAAKkG,MAAM,UAAU,GAApD,MACC1H,GAKT,OACIwI,EAAAxI,EAAAyI,cAAA,KAAG3D,IAAKtD,EAAMqH,UAAU,cACpBL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,eAAerH,EAAKkG,MAAM,UAAU,GAApD,MACAc,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,gBAAhB,IAAiCuC,EAAI,cAAc,aAAnD,OACA5C,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,cAAcuC,EAAI,cAAc,eAMhEsB,OAAS,SAACtB,GACN,OAAW,OAARA,EACQ,KACDoB,MAAMC,QAAQrB,GACbA,EAAI7B,IAAI,SAACvJ,EAAGuL,GACf,MAAgB,kBAANvL,EACC2M,EAAKD,OAAO1M,GACQ,QAArBA,EAAEsK,UAAU,EAAE,GAEhB9B,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKyG,EAAG1C,UAAU,iBACnBL,EAAAxI,EAAAyI,cAAA,OAAKC,QAAS,kBAAMiE,EAAKC,UAAU5M,EAAE0H,MAAM,KAAK,MAAM1H,IAIrDwI,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKyG,EAAG1C,UAAU,iBAAiB7I,KAInC,kBAARoL,EAEXA,EAAIyB,eAAe,QACXF,EAAKJ,YAAYnB,EAAKA,EAAI5J,MAG7BgH,EAAAxI,EAAAyI,cAAA,KAAG3D,IAAKsG,EAAI,UAAWvC,UAAU,cAC7BL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,cAAcuC,EAAI,YAKxB,kBAARA,EACY,QAAvBA,EAAId,UAAU,EAAE,GACN9B,EAAAxI,EAAAyI,cAAA,OAAKC,QAAS,kBAAMiE,EAAKC,UAAUxB,EAAI1D,MAAM,KAAK,MAAM0D,GAE1DA,OAJR,KAWX0B,iBAAmB,SAACxD,GAShB,OACId,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,eACTL,EAAAxI,EAAAyI,cAAA,YAAOa,EAAE,6BAKrByD,UAAY,SAACzK,EAAQ0K,EAAWpG,EAAY0C,GAAM,IAExB2D,EAUlB3K,EAVA,kBACOc,EASPd,EATA,OACAd,EAQAc,EARAd,KACmB0L,EAOnB5K,EAZ0C,gBAS1C6K,EAGA7K,EAHA6K,WACAC,EAEA9K,EAFA8K,KACcC,EACd/K,EADA,cAGEgL,EACF9E,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,eACTL,EAAAxI,EAAAyI,cAAA,YAAOa,EAAE,gBAAT,IAA2BlG,EAA3B,MACAoF,EAAAxI,EAAAyI,cAAA,gBAAQjH,IAMV+L,EAAcZ,EAAKG,iBAAiBxD,GAEpCkE,EACFhF,EAAAxI,EAAAyI,cAAA,UAAQI,UAAU,YAAYH,QAASsE,GACnCxE,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,sBACZS,EAAE,wBAOX,OAFqB8D,OAAZhL,IAATgL,EAA4BA,EAAKK,SAAkB,KAE5CjM,GACH,IAAK,SACD,OACIgH,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eACVyE,EACD9E,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eAAgB8D,EAAKD,OAAOO,IAC3CzE,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,IACXL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,aAAaS,EAAE,eAA/B,MACAd,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,gBAAiB8D,EAAKD,OAAOS,KAEhDK,GAGb,IAAK,QACD,OACIhF,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eACVyE,EACD9E,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eAAgB8D,EAAKD,OAAOO,IACjC,OAATG,EAAgB,KACb5E,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,gBAAgBS,EAAE,cAAjC,KAA4D,OAAT8D,EAAgBT,EAAKD,OAAOU,GAAQ,MAE1FI,GAGb,IAAK,OACD,IACInB,EADAqB,EAAUf,EAAKgB,cAAcN,EAAQ/D,GAgBzC,OAbI+C,EADU,+BAAXgB,EAEK7E,EAAAxI,EAAAyI,cAAA,WAAMa,EAAE,2BAES,OAAf1C,QAAsCxE,IAAfwE,EAEzB4B,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,UAAUS,EAAE,4BAI3Bd,EAAAxI,EAAAyI,cAAA,OAAKmC,IAAKhE,EAAYgH,MAAM,OAAO/C,IAAI,SAK3CrC,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eACXL,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,eAAgB8D,EAAKD,OAAOO,IAE1CK,EAEAjB,EAEAkB,EAED/E,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,gBAAiB8D,EAAKD,OAAOQ,IAE3CM,EAAUE,GAGvB,QACI,OAAO,sFAILL,EAAQ/D,GAClB,IAAIuE,EAAM,KAyBV,YAxB8BzL,IAA3BvB,KAAKsI,MAAMxC,cAINkH,EAFiC,IAAlChN,KAAKsI,MAAMxC,YAAYrF,OAEhB,KACW,+BAAX+L,EAEF7E,EAAAxI,EAAAyI,cAAA,UAAQO,UAAU,GACdR,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,0BADjB,IAC+CS,EAAE,2BAKjDd,EAAAxI,EAAAyI,cAAA,KACIsC,OAAO,SACPC,IAAI,sBACJF,KAA+B,qBAAuBjK,KAAKsI,MAAMxC,aACjE6B,EAAAxI,EAAAyI,cAAA,cACID,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,oBADjB,IACyCS,EAAE,kBAMpDuE,mCAIP,IACIhL,EADEiL,EAAoBjN,KAAKsI,MAAMpC,KAAO,sBAAwB,qBAYpE,OARIlE,EADDJ,OAAOsL,KAAKlN,KAAKsI,MAAM6E,YAAY1M,OAAS,EACpCT,KAAKkM,UACRlM,KAAKsI,MAAM6E,WAAWzL,QACtB1B,KAAKsI,MAAM6D,UACXnM,KAAKsI,MAAMrC,MACXjG,KAAKsI,MAAMG,GAERd,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,UAAUhI,KAAKsI,MAAMG,EAAE,qBAAtC,IAA6DzI,KAAKsI,MAAMvF,QAG/E4E,EAAAxI,EAAAyI,cAAA,OACII,UAAWiF,EACXpF,QAAS7H,KAAKsI,MAAM6D,WAEpBxE,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,cACdhG,WA3ODoL,aA4Pd/F,GAAQC,eAAiBmE,IAChBrD,eAVS,SAAChD,GAAD,MAAY,CAChC+H,WAAY/H,EAAMkB,WAAWjB,YAA4C,IAA9BD,EAAM0B,YAAYd,QAAgB,GAAKZ,EAAMkB,WAAWT,KAAKhD,KAAKA,KAAK,GAClHL,UAAW4C,EAAM5C,UAAU6C,WAAa,GAAKD,EAAM5C,UACnDyD,MAAOb,EAAM0B,YAAYb,MACzBH,YAAaV,EAAMoB,aAAanB,YAAcD,EAAMkB,WAAWjB,WAAa,GAAKD,EAAMoB,aAAaV,YACpGuH,cAAejI,EAAMkB,WAAWjB,YAA4C,IAA9BD,EAAM0B,YAAYd,QAAgB,KAAOZ,EAAMkB,WAAWT,KAAKhD,KAAKA,KAAK,GAAGnB,QAAQ4L,sBAKvHlF,CAAyBf,IC1NlCkG,yNAGFxB,UAAY,SAAChJ,GAA8C,IAAtCP,EAAsClB,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAA1B,KAAMkM,EAAoBlM,UAAAb,OAAA,QAAAc,IAAAD,UAAA,GAAAA,UAAA,GAAT,KAC9CwK,EAAKxD,MAAM7F,SAASK,EAAgBC,IACpC+I,EAAKxD,MAAM7F,SAASH,EAAeS,EAAQP,IAC3CsJ,EAAKxD,MAAM7F,SACP,CAAE9B,KAAM,eAAgBqF,QAASjD,EAAQkD,MAAOuH,EAAUtH,MAAM,OAMxEiG,UAAY,WACRL,EAAKxD,MAAM7F,SAAS,CAAE9B,KAAM,eAAgBuF,MAAM,IAClD4F,EAAKxD,MAAM7F,SAAS,CAAE9B,KAAM,oBAMhC8M,eAAiB,SAACrM,EAAMsM,GACpB,GAAY,MAATtM,EAAc,CACb,IAAI3E,EAAI,KAMR,OALGkP,MAAMC,QAAQ8B,EAAE1L,KAAKsK,cAEpB7P,GADAA,EAAIiR,EAAE1L,KAAKsK,WAAWqB,KAAK,SAAAlR,GAAC,MAAe,sBAAXA,EAAEkE,QAC5B,cAAc,WAGjBlE,EACJ,GAAY,MAAT2E,EAAc,CACpB,IAAIwM,EAAI,KASR,OARGjC,MAAMC,QAAQ8B,EAAE1L,KAAK,mBAGpB4L,GADAA,EAAS,OADTA,EAAIF,EAAE1L,KAAK,kBAAkB2L,KAAK,SAAAC,GAAC,MAAuB,OAAnBA,EAAE,gBACzBA,EAAIF,EAAE1L,KAAK,kBAAkB2L,KAAK,SAAAC,GAAC,MAAuB,cAAnBA,EAAE,eAAgCA,GACnF,UACoC,kBAA7BF,EAAE1L,KAAK,oBACpB4L,EAAIF,EAAE1L,KAAK,kBAAkB,WAG1B4L,EACJ,GAAY,MAATxM,EAGN,OAAO,KAFPxB,QAAQb,IAAI,kBAAmB2O,MAOvC7B,OAAS,SAACtB,GAEN,OAAW,OAARA,QAAwBhJ,IAARgJ,EACR,KACDoB,MAAMC,QAAQrB,GACbA,EAAI7B,IAAI,SAACvJ,EAAGuL,GAEf,MAAgB,kBAANvL,EACC2M,EAAKD,OAAO1M,GACQ,QAArBA,EAAEsK,UAAU,EAAE,GAEhB9B,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKyG,EAAG1C,UAAU,iBACnBL,EAAAxI,EAAAyI,cAAA,WAAMzI,IAILwI,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKyG,EAAG1C,UAAU,iBAAiB7I,KAInC,kBAARoL,EAEP,QAASA,EAELA,EAAIvI,KAAKgK,eAAe,OAChBzB,EAAIvI,KAAK,OAIT8J,EAAK2B,eAAelD,EAAInJ,KAAMmJ,GAGnC,aAAcA,EACbuB,EAAKD,OAAOtB,EAAIqC,UAGjBrC,EAAIyB,eAAe,UAClBzB,EAAI,UAGF5C,EAAAxI,EAAAyI,cAAA,QAAM3D,IAAKsG,EAAI,cAAc,WAAYA,EAAI,cAAc,WAGtD,kBAARA,EAEY,QAAvBA,EAAId,UAAU,EAAE,GACN9B,EAAAxI,EAAAyI,cAAA,WAAM2C,GAGX5C,EAAAxI,EAAAyI,cAAA,YAAO2C,QANZ,KAYXsD,eAAiB,SAACzM,GACd,IAAI0M,EAAI,KACR,GAAY,OAAT1M,QAA0BG,IAATH,EAChB,OAAO,KACDuK,MAAMC,QAAQxK,KACpBA,EAAOA,EAAK,IAEhB,IACI,IAAM3E,EAAIqP,EAAKxD,MAAMlC,QAAQuH,KAAK,SAAAlR,GAAC,OAAI2E,IAAS3E,EAAEsR,MAClD,QAASxM,IAAN9E,EACC,GAAGkP,MAAMC,QAAQnP,EAAEiF,QAAQ4K,YAEvBwB,EADkBrR,EAAEiF,QAAQ4K,WAAWqB,KAAK,SAAAG,GAAC,MAAI,sBAAwBA,EAAEnN,OAC7D,cAAc,cAEQ,kBAAzBlE,EAAEiF,QAAQ4K,aACrBwB,EAAIrR,EAAEiF,QAAQ4K,WAAW,cAAc,gBAG3CwB,EAAI,KAEV,MAAMjO,GACJD,QAAQb,IAAI,+BAAgCc,GAEhD,OAAOiO,KAGXE,aAAe,SAACC,EAAOC,GACnB,IAAIJ,EAAI,KACJtL,EAAY,KAChB,GAAa,OAAVyL,QAA4B1M,IAAV0M,EACjB,OAAO,KACDtC,MAAMC,QAAQqC,KACpBA,EAAQA,EAAM,IAElB,IACI,IAAMxR,EAAIqP,EAAKxD,MAAM4F,GAAUP,KAAK,SAAAlR,GAAC,OAAIwR,IAAUxR,EAAEsR,WAC5CxM,IAAN9E,IACI,mBAAoBA,EAAEiF,QAElBiK,MAAMC,QAAQnP,EAAEiF,QAAQ,mBACnBjF,EAAEiF,QAAQ,kBAAkByM,KAAK,SAAArF,GAAC,MAAuB,OAAnBA,EAAE,eAExCgF,GADAA,EAAIrR,EAAEiF,QAAQ,kBAAkBiM,KAAK,SAAAlF,GAAC,MAAI,OAASA,EAAE,gBAC/C,UACChM,EAAEiF,QAAQ,kBAAkByM,KAAK,SAAArF,GAAC,MAAuB,cAAnBA,EAAE,iBAE/CgF,GADAA,EAAIrR,EAAEiF,QAAQ,kBAAkBiM,KAAK,SAAAlF,GAAC,MAAI,cAAgBA,EAAE,gBACtD,WAEmC,kBAAhChM,EAAEiF,QAAQ,oBACvBoM,EAAIrR,EAAEiF,QAAQ,kBAAkB,WAIpCoM,EAAI,KAEL,eAAgBrR,EAAEiF,UACjBc,EAAY/F,EAAEiF,QAAQ0M,aAGhC,MAAMvO,GACJD,QAAQC,MAAM,2CAA4CA,GAE9D,MAAO,CAAEuB,KAAM6M,EAAO7B,MAAO0B,EAAGtL,UAAWA,MAG/C6L,SAAW,SAACC,GAQRC,MAAMD,GACD1L,KAAK,SAAAkB,GACF/E,GAAI+E,KACT0K,MAAM,SAAA3O,GACLD,QAAQC,MAAMA,QAMtB+N,EAAI,SAACU,GAIDC,MAAMD,GAAK1L,KAAK,SAAA6L,GACZ,GAAGA,EAAKC,GAGJ,OAFA3P,GAAIuP,GACC,GAAA9K,OAAM8K,EAAN,KAAA9K,OAAasB,iFAOrB,IAAA6J,EAAA3O,KACL,IAAIA,KAAKsI,MAAMlC,QAAQ3F,OACnB,OACIkH,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,UAAf,WAGR,IAAM1C,EAAQtF,KAAKsI,MAAMnC,MAAMuC,IAAI,SAACkG,EAAMlE,GAAM,IAAAmE,EAWxCD,EAAKlN,QARa0K,EAHsByC,EAGxC,kBACOtM,EAJiCsM,EAIxC,OACQC,EALgCD,EAAA,KAMxCE,EANwCF,EAMxCE,YACAC,EAPwCH,EAOxCG,YAEAC,GATwCJ,EAQxCK,aARwCL,EASxCI,gBACAb,EAVwCS,EAUxCT,WAIAhI,EAAUuI,EAAKX,aAAae,EAAa,WAGzCI,EAAWR,EAAKX,aAAagB,EAAa,YAE1CxB,EAA8B,cAAnByB,EACT,KADS,GAAAzL,OAENyL,EAFM,KAAAzL,OAEYsB,IAe3B,OAEI6C,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKyG,EAAG1C,UAAU,QAEnBL,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,eAAezF,GAEd,MAAZiL,EAAmB,KACrB7F,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,gCACXL,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,0BACXL,EAAAxI,EAAAyI,cAAA,OAAKmC,IAAKyD,EAAUxD,IAAI,OAAO+C,MAAM,WAI7CpF,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,aACXL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,mBAAhB,WACAL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,aACZL,EAAAxI,EAAAyI,cAAA,QACII,UAAU,iBACV/D,IAAK1B,EACLsF,QAAS,kBAAM8G,EAAK5C,UAAUxJ,EAAI6L,EAAYZ,KAC7CmB,EAAK9C,OAAOO,MAOZ,MAAXhG,EAAkB,KACpBuB,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,aACXL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,mBAAhB,YACAL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,aACZL,EAAAxI,EAAAyI,cAAA,QACII,UAAU,iBACV/D,IAAKmC,EAAQhF,KACbyG,QAAS,kBAAM8G,EAAK5C,UAAU3F,EAAQhF,KAAMgF,EAAQ5D,aACnD4D,EAAQgG,SAKP,MAAZ+C,EAAmB,KACrBxH,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,aACXL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,mBAAhB,aACAL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,aACZL,EAAAxI,EAAAyI,cAAA,QACII,UAAU,iBACV/D,IAAKkL,EAAS/N,KACdyG,QAAS,kBAAM8G,EAAK5C,UAAUoD,EAAS/N,KAAM+N,EAAS3M,aACrD2M,EAAS/C,SAOtBzE,EAAAxI,EAAAyI,cAAA,KAAGI,UAAU,eAAe2G,EAAK9C,OAAOiD,OAMpD,OACInH,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,QACV1C,EACDqC,EAAAxI,EAAAyI,cAACwH,GAAD,CACInL,IAAKjE,KAAKsI,MAAMvF,OAChBoJ,UAAWnM,KAAKmM,UAChBpJ,OAAQ/C,KAAKsI,MAAMvF,OACnBmD,KAAMlG,KAAKsI,MAAMyD,oBAtTdqB,cAuUjB/F,IAAQ,IAAIC,KAAJ,CAAqBiG,IACpBnF,eAXS,SAAChD,GAAD,MAAY,CAChCe,MAAOf,EAAMe,MAAMd,WAAa,GAAKD,EAAMe,MAAMb,MAAMzC,KAAKA,KAC5DuD,QAAShB,EAAMgB,QAAQf,WAAa,GAAKD,EAAMgB,QAAQd,MAAMzC,KAAKA,KAClEsM,SAAU/J,EAAMiB,OAAOhB,WAAa,GAAKD,EAAMiB,OAAOf,MAAMzC,KAAKA,KACjEsK,WAAY/H,EAAMkB,WAAWjB,YAA4C,IAA9BD,EAAM0B,YAAYd,QAAgB,GAAKZ,EAAMkB,WAAWT,KAAKhD,KAAKA,KAAK,GAClHE,OAAQqC,EAAM0B,YAAYd,QAC1B+F,UAAW3G,EAAM0B,YAAYZ,KAC7BJ,YAAaV,EAAMoB,aAAanB,WAAa,GAAKD,EAAMoB,aAAaV,cAI1DsC,CAAyBf,yBC1VlCgI,uBAEJ,SAAAA,EAAY/G,GAAO,IAAAwD,EAAA,OAAAlK,OAAA0N,GAAA,EAAA1N,CAAA5B,KAAAqP,IACjBvD,EAAAlK,OAAA2N,GAAA,EAAA3N,CAAA5B,KAAA4B,OAAA4N,GAAA,EAAA5N,CAAAyN,GAAAI,KAAAzP,KAAMsI,KA0CRoH,QAAU,SAAC5H,GAAQ,IAAA6H,EACU7D,EAAKxD,MAAxBZ,EADSiI,EACTjI,KAAMjF,EADGkN,EACHlN,SACdiF,EAAKK,eAAeD,GACpBrF,EAASsC,GAAY+C,KA9CJgE,EAkDnB8D,UAAY,WACV9D,EAAKxD,MAAM7F,SAAS,CAAE9B,KAAM,WAAYuE,KAAM,SAC9C4G,EAAK4D,QAAQjL,KAjDbqH,EAAK+D,UAAY,CACfC,EAAG,MACHC,EAAG,MACHC,EAAG,MACHC,EAAG,QACHC,EAAG,QARYpE,sFAajB9L,KAAKmQ,sEAGc,IAAAxB,EAAA3O,KACnBrD,OAAOyT,WAAc,SAACC,GACpBA,EAAEC,iBACF3B,EAAKwB,2EAIgB,IAAAI,EAC6BvQ,KAAKsI,MAAjDrB,EADesJ,EACftJ,QAASuJ,EADMD,EACNC,IAAKzJ,EADCwJ,EACDxJ,aAActE,EADb8N,EACa9N,SAAUgG,EADvB8H,EACuB9H,OACrBlH,IAAtBiP,EAAI3J,MAAM,KAAK,GACbjF,OAAOsL,KAAKzE,EAAE,UAAUgI,SAASD,EAAI3J,MAAM,KAAK,IACjDpE,EAASwC,GAAQ,cAEjBxC,EAASwC,GAAQ,SACjBgC,EAAQyJ,KAAR,IAAAlN,OAAiBgN,EAAI3J,MAAM,KAAK,MAGlCpE,EAASwC,GAAQ,SAEhBuL,EAAI3J,MAAM,KAAK,KAAMnC,GACtB1E,KAAK0P,QAAQc,EAAI3J,MAAM,KAAK,GAAIE,IAEhC/G,KAAK0P,QAAQjL,GAAiBsC,GAC9BE,EAAQyJ,KAAKjM,wCAgBNsC,EAActB,GAKvB,OAJKA,EAAM0I,KAAK,SAAAkC,GAAC,OAAIA,EAAEhH,KAAKxC,MAAM,KAAK,KAAOE,MAC5ChI,GAAI,kBACJiB,KAAK4P,aAEAnK,EACJkL,OAAO,SAAAzL,GAAI,OAAIA,EAAKmE,KAAKxC,MAAM,KAAK,KAAOE,IAC3C2B,IAAI,SAACxD,EAAMwF,GACV,IAAIE,EAAW,KAIf,OAHG1F,EAAK2F,UAAU,sBAChBD,EAAW1F,EAAK2F,UAAU,oBAAoB,GAAGC,YAGjDnD,EAAAxI,EAAAyI,cAAA,OAAK3D,IAAKiB,EAAKmE,MAEf1B,EAAAxI,EAAAyI,cAAA,WACErF,GAAG,SACH0B,IAAKiB,EAAK3C,GACV0F,MAAO,CACL2I,gBAAe,yJAAApN,OAILoH,EAJK,OAMjBjD,EAAAxI,EAAAyI,cAAA,UAAQI,UAAU,SAEhBL,EAAAxI,EAAAyI,cAAA,QAAMI,UAAU,eACdL,EAAAxI,EAAAyI,cAAA,OAAKmF,MAAM,OAAO/C,IAAI,KAAKD,IAAK8G,QAElClJ,EAAAxI,EAAAyI,cAAA,UAAK1C,EAAK8F,IAAIxB,OACd7B,EAAAxI,EAAAyI,cAAA,UAAK1C,EAAK8F,IAAI8F,UAGdnJ,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,cACbL,EAAAxI,EAAAyI,cAAA,WAASI,UAAU,mBACjBL,EAAAxI,EAAAyI,cAAA,KAAGsD,wBAAyB,CAACC,OAAQjG,EAAKC,QAAQuE,oDAiBhE,OAAG1J,KAAKsI,MAAMyI,eAAiB/Q,KAAKsI,MAAM8B,cAEpCzC,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,UAAUhI,KAAKsI,MAAMG,EAAE,sBAI1Cd,EAAAxI,EAAAyI,cAAA,OAAKI,UAAU,aACbL,EAAAxI,EAAAyI,cAACoJ,GAAD,MACEhR,KAAKiR,WAAWjR,KAAKsI,MAAMvB,aAAc/G,KAAKsI,MAAM7C,OACpD1G,GAAI,kBAAmBiB,KAAKsI,MAAMvB,aAAc/G,KAAKsI,MAAM7C,OAC/B,SAA5BzF,KAAKsI,MAAMvB,aACXY,EAAAxI,EAAAyI,cAAA,WACED,EAAAxI,EAAAyI,cAACsJ,GAAD,CAAO9F,MAAOpL,KAAKsI,MAAM1C,GAAI6C,EAAGzI,KAAKsI,MAAMG,IAC3Cd,EAAAxI,EAAAyI,cAACuJ,GAAD,OACO,KACmB,aAA5BnR,KAAKsI,MAAMvB,aAA8BY,EAAAxI,EAAAyI,cAACwJ,GAAD,MAAe,KAC1DzJ,EAAAxI,EAAAyI,cAACyJ,GAAD,cA9HWjE,cAwJb/F,IAAQ,IAAIC,KAAJ,CAAqB+H,IACpBjH,eApBS,SAAChD,GAIvB,MAAO,CACL+B,OAAQ/B,EAAM+B,OACdqJ,IAAKpL,EAAM+B,OAAOvK,SAASgK,SAC3BmK,cAAe3L,EAAMK,MAAMJ,WAC3BqB,iBAAkBtB,EAAMsB,kBAAoBjC,GAC5CsC,aACE3B,EAAMK,MAAMJ,WACZ,GACAD,EAAMK,MAAMH,MAAMF,EAAMsB,kBAAkByH,KAAK,SAAAjJ,GAAI,OAAIA,EAAKmE,KAAKxC,MAAM,KAAK,KAAOzB,EAAM2B,eACzF3B,EAAM2B,aAAe,OACvBtB,MAAOL,EAAMK,MAAMJ,WAAa,GAAKD,EAAMK,MAAMH,MAAMF,EAAMsB,kBAC7Dd,GAAIR,EAAMmB,OAAOlB,WAAa,GAAKD,EAAMmB,OAAOX,KAKrCwC,CAAyBf,IC/HzBiK,GAzCA,WAoBX,OACI3J,EAAAxI,EAAAyI,cAAC2J,GAAA,EAAD,KACI5J,EAAAxI,EAAAyI,cAAC4J,GAAA,EAAD,KAOI7J,EAAAxI,EAAAyI,cAAC6J,GAAA,EAAD,CAAO3S,KAAI,MAAS4S,UAAWrC,KAC/B1H,EAAAxI,EAAAyI,cAAC6J,GAAA,EAAD,CAAO3S,KAAI,MAAS4S,UAAWrC,KAC/B1H,EAAAxI,EAAAyI,cAAC6J,GAAA,EAAD,CAAO3S,KAAI,eAAkB4S,UAAWrC,KACxC1H,EAAAxI,EAAAyI,cAAC6J,GAAA,EAAD,CAAO3S,KAAI,eAAkB4S,UAAWrC,KACxC1H,EAAAxI,EAAAyI,cAAC6J,GAAA,EAAD,CAAO3S,KAAI,uDAAkB4S,UAAWrC,KACxC1H,EAAAxI,EAAAyI,cAAC+J,GAAA,EAAD,CAAUjB,MAAI,EAACkB,KAAK,IAAI5I,GAAG,MAAM0I,UAAWrC,4EC7B5D3H,KAGGmK,IAAIC,MAGJD,IAAIE,MAGJF,IAAIG,MAGJhO,KAAK,CACJiO,YAAa,KACbC,OAAO,EACPC,KAAM,eACNC,eAAe,EAEfC,cAAe,CACbC,aAAa,GAKfC,MAAO,CACLC,MAAM,KAKG9K,GAAf,EAAeA,ICTT+K,GAAmBC,yBACnBzL,GAAU0L,cAEVC,GAAQC,YACV7L,GAAYC,IACZ6L,YACIC,YACIC,YAAiB/L,IACjBgM,IACAR,MAQZG,GAAMnQ,SlBrBK,SAASA,GAEZ,OADAA,EAfG,CACH9B,KAAMsB,IAeCsM,MAAK,GAAA/K,OAAIe,IAAJf,OAAagB,GAAb,iBACP5B,KACG,SAAAkB,GAAQ,OAAIA,EAASZ,QACrB,SAAArD,GAAK,OAAID,QAAQb,IAAI,YAAac,KAErC+C,KAAK,SAAAM,GAGF,OAAOA,EAAKgQ,OAAO,SAACC,EAAGhU,GACnB,IAAMiU,EAAIxR,OAAOsL,KAAKxI,IAAWiJ,KAAK,SAAA1J,GAAG,OAAIS,GAAUT,KAAS9E,EAAE6L,IAAIhG,WAGtE,OAFAmO,EAAEC,GAAKD,EAAEC,IAAM,GACfD,EAAEC,GAAG1C,KAAKvR,GACHgU,GACR,MAENvQ,KAAK,SAAAM,GAEFT,EA5BhB,SAAsBS,GAClB,MAAO,CACHvC,KAAMsB,EACNwD,MAAOvC,EACPhB,WAAYC,KAAKC,OAwBAiR,CAAanQ,QkBGtC0P,GAAMnQ,SjBxBK,SAASA,GAEZ,OADAA,EAfG,CACH9B,KAAMsB,IAeCsM,MAAK,GAAA/K,OAAIe,IAAJf,OAAagB,GAAb,iBACP5B,KACG,SAAAkB,GAAQ,OAAIA,EAASZ,QACrB,SAAArD,GAAK,OAAID,QAAQb,IAAI,YAAac,KAErC+C,KAAK,SAAAM,GAEF,OAAOA,EAAKgQ,OAAO,SAACC,EAAGhU,GACnB,IAAMiU,EAAIxR,OAAOsL,KAAKxI,IAAWiJ,KAAK,SAAA1J,GAAG,OAAIS,GAAUT,KAAS9E,EAAE6L,IAAIhG,WAGtE,OAFAmO,EAAEC,GAAKD,EAAEC,IAAM,GACfD,EAAEC,GAAG1C,KAAKvR,GACHgU,GACR,MAENvQ,KAAK,SAAAM,GAAI,OACNT,EA1BhB,SAAsBS,GAClB,MAAO,CACHvC,KAAMsB,EACN0D,MAAOzC,EACPhB,WAAYC,KAAKC,OAsBAkR,CAAapQ,QiBUtC0P,GAAMnQ,SnBhBF,eAAAkG,EAAA/G,OAAA+B,EAAA,EAAA/B,CAAA1C,EAAAC,EAAAyE,KAAO,SAAA2P,EAAM9Q,GAAN,IAAAT,EAAAuE,EAAA,OAAArH,EAAAC,EAAAC,KAAA,SAAAoU,GAAA,cAAAA,EAAAlU,KAAAkU,EAAAjU,MAAA,cACHkD,EA5BG,CACH9B,KAAMsB,IA0BHuR,EAAAlU,KAAA,EAAAkU,EAAAjU,KAAA,EAGoBkE,KAHpB,cAGOzB,EAHPwR,EAAA/T,KAICV,GAAI,WAAYiD,GAEZuE,EAAS,GACbvE,EAAK0G,IAAI,SAAA+K,GACL,IAAMxP,EAAMwP,EAAEC,SAAS7M,MAAM,KAAK8M,KAAK,IACvCpN,EAAOtC,GAAO2P,MAAMH,EAAEI,OAASJ,EAAEI,MAAQC,OAAOL,EAAEI,OAAOE,QAAQ,oBAAoB,SAT1FP,EAAA1T,OAAA,SAWQ2C,EAhCR,CACH9B,KAAMsB,EACN2D,GA8B8BW,EA7B9BrE,WAAYC,KAAKC,SAkBd,QAAAoR,EAAAlU,KAAA,GAAAkU,EAAA7T,GAAA6T,EAAA,SAaC5T,QAAQC,MAAM,sBAAd2T,EAAA7T,IAbD,yBAAA6T,EAAAzT,SAAAwT,EAAAvT,KAAA,aAAP,gBAAAgU,GAAA,OAAArL,EAAArE,MAAAtE,KAAAsB,YAAA,uCmBiBJ2S,GACArB,GAAMnQ,SrBxBF,eAAAiB,EAAA9B,OAAA+B,EAAA,EAAA/B,CAAA1C,EAAAC,EAAAyE,KAAO,SAAA5E,EAAMyD,GAAN,IAAAT,EAAA,OAAA9C,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACHkD,EAfG,CACH9B,KAAMsB,IAaH5C,EAAAC,KAAA,EAAAD,EAAAE,KAAA,EAGoB4B,EAAW9C,EAAeA,EAAcoC,OAAQ,KAHpE,cAGOuB,EAHP3C,EAAAI,KAAAJ,EAAAS,OAAA,SAIQ2C,EAZR,CACH9B,KAAMsB,EACND,KAUgCA,EAThCE,WAAYC,KAAKC,SAKd,OAAA/C,EAAAC,KAAA,EAAAD,EAAAM,GAAAN,EAAA,SAMCO,QAAQC,MAAM,8BAAdR,EAAAM,IAND,yBAAAN,EAAAU,SAAAf,EAAAgB,KAAA,YAAP,gBAAAgU,GAAA,OAAAtQ,EAAAY,MAAAtE,KAAAsB,YAAA,IqByBJsR,GAAMnQ,SrBbF,eAAAkG,EAAA/G,OAAA+B,EAAA,EAAA/B,CAAA1C,EAAAC,EAAAyE,KAAO,SAAA2P,EAAM9Q,GAAN,IAAAtD,EAAAiH,EAAApE,EAAA,OAAA9C,EAAAC,EAAAC,KAAA,SAAAoU,GAAA,cAAAA,EAAAlU,KAAAkU,EAAAjU,MAAA,cACHkD,EAkCG,CACH9B,KAAMsB,IApCHuR,EAAAlU,KAAA,EAAAkU,EAAAjU,KAAA,EAGiBU,EAAoB5B,GAHrC,cAGOc,EAHPqU,EAAA/T,KAIO2G,EAAUjH,EAAEiB,aAAaC,cAAc6T,QAAQxL,IAAI,SAAAvJ,GACrD,OAAOA,EAAE8E,MALduP,EAAAjU,KAAA,EAOoB4B,EAAWiF,EAASA,EAAQ3F,OAAQ,KAPxD,cAOOuB,EAPPwR,EAAA/T,KAAA+T,EAAA1T,OAAA,SAQQ2C,EAASV,EAAeC,KARhC,QAAAwR,EAAAlU,KAAA,GAAAkU,EAAA7T,GAAA6T,EAAA,SAUC5T,QAAQC,MAAM,kBAAd2T,EAAA7T,IAVD,yBAAA6T,EAAAzT,SAAAwT,EAAAvT,KAAA,aAAP,gBAAAmU,GAAA,OAAAxL,EAAArE,MAAAtE,KAAAsB,YAAA,IqBcJsR,GAAMnQ,SrBEF,eAAA2R,EAAAxS,OAAA+B,EAAA,EAAA/B,CAAA1C,EAAAC,EAAAyE,KAAO,SAAAyQ,EAAM5R,GAAN,IAAAgG,EAAApC,EAAArE,EAAA,OAAA9C,EAAAC,EAAAC,KAAA,SAAAkV,GAAA,cAAAA,EAAAhV,KAAAgV,EAAA/U,MAAA,cACHkD,EA+BG,CACH9B,KAAMsB,IAjCHqS,EAAAhV,KAAA,EAAAgV,EAAA/U,KAAA,EAGiB0B,EAAoB5C,GAHrC,cAGOoK,EAHP6L,EAAA7U,KAICV,GAAI,uBAAwB0J,GACtBpC,EAASoC,EAAErI,aAAac,aAAagT,QAAQxL,IAAI,SAAAD,GACnD,OAAOA,EAAExE,MAEblF,GAAIsH,EAAQA,EAAO5F,QARpB6T,EAAA/U,KAAA,GASoB4B,EAAWkF,EAAQA,EAAO5F,OAAQ,KATtD,eASOuB,EATPsS,EAAA7U,KAUCV,GAAIiD,GAVLsS,EAAAxU,OAAA,SAWQ2C,EAASJ,EAAcL,KAX/B,QAAAsS,EAAAhV,KAAA,GAAAgV,EAAA3U,GAAA2U,EAAA,SAaC1U,QAAQC,MAAM,mBAAdyU,EAAA3U,IAbD,yBAAA2U,EAAAvU,SAAAsU,EAAArU,KAAA,aAAP,gBAAAuU,GAAA,OAAAH,EAAA9P,MAAAtE,KAAAsB,YAAA,IqBWJkT,IAASC,OAAO9M,EAAAxI,EAAAyI,cAXJ,WAER,OADA8M,SAASvU,KAAKwU,UAAUC,IAAI,WAExBjN,EAAAxI,EAAAyI,cAACiN,EAAA,EAAD,CAAUjC,MAAOA,IACbjL,EAAAxI,EAAAyI,cAACkN,EAAA,EAAD,CAAiB7N,QAASA,IACtBU,EAAAxI,EAAAyI,cAACT,GAAD,SAMA,MAASuN,SAASK,eAAe,S5BuD3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMtS,KAAK,SAAAuS,GACjCA,EAAaC","file":"static/js/main.c933cc21.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/UB-woodblock-closeup.67ac4b0f.jpg\";","module.exports = __webpack_public_path__ + \"static/media/calligraphy_icon.b45851d1.ico\";","module.exports = __webpack_public_path__ + \"static/media/endless-knot.4a457e37.png\";","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","export const LOCATION_CHANGE = '@@router/LOCATION_CHANGE'\n\nexport const SET_LANG = 'SET_LANG'\nexport const SET_PAGE = 'SET_PAGE'\nexport const REQUEST_PAGES = 'REQUEST_PAGES'\nexport const RECEIVE_PAGES = 'RECEIVE_PAGES'\nexport const REQUEST_POSTS = 'REQUEST_POSTS'\nexport const RECEIVE_POSTS = 'RECEIVE_POSTS'\n\nexport const REQUEST_GS = 'REQUEST_GS'\nexport const RECEIVE_GS = 'RECEIVE_GS'\n\nexport const DETAIL_MODAL = 'DETAIL_MODAL'\n\nexport const RECEIVE_MANIFEST = 'RECEIVE_MANIFEST'\nexport const REQUEST_MANIFEST = 'REQUEST_MANIFEST'\nexport const NULLIFY_IIIF = 'NULLIFY_IIIF'\nexport const RECEIVE_IIIF = 'RECEIVE_IIIF'\nexport const REQUEST_IIIF = 'REQUEST_IIIF'\n\nexport const RECEIVE_DATA = 'RECEIVE_DATA'\nexport const REQUEST_DATA = 'REQUEST_DATA'\nexport const REQUEST_ID = 'REQUEST_ID'\nexport const RECEIVE_ID = 'RECEIVE_ID'\n\nexport const RECEIVE_AUTHORS = 'RECEIVE_AUTHORS'\nexport const REQUEST_AUTHORS = 'REQUEST_AUTHORS'\n\nexport const RECEIVE_TOPICS = 'RECEIVE_TOPICS'\nexport const REQUEST_TOPICS = 'REQUEST_TOPICS'\n\nexport const REQUEST_RESOURCES = 'REQUEST_RESOURCES'\nexport const RECEIVE_RESOURCES = 'RECEIVE_RESOURCES'\n","export const collection_v1 = [\n    'bdr:W22677',\n    'bdr:W14260',\n    'bdr:W1GS135531',\n    'bdr:W1GS135873',\n    'bdr:W1GS136667',\n    'bdr:W1KG10720',\n    'bdr:W1KG1132',\n    'bdr:W1KG1247',\n    'bdr:W1KG1248',\n    'bdr:W1KG1249',\n    'bdr:W1KG1250',\n    'bdr:W1KG1251',\n    'bdr:W1KG1252',\n    'bdr:W1KG1253',\n    'bdr:W1KG1254',\n    'bdr:W1KG1279',\n    'bdr:W1KG1280',\n    'bdr:W1KG1284',\n    'bdr:W1KG1286',\n    'bdr:W1KG1320',\n    'bdr:W1KG1321',\n    'bdr:W1KG14630',\n    'bdr:W1KG14641',\n    'bdr:W1KG14700',\n    'bdr:W1KG1558',\n    'bdr:W1KG1559',\n    'bdr:W1KG1573',\n    'bdr:W1KG1578',\n    'bdr:W1KG1607',\n    'bdr:W1KG1608',\n    'bdr:W1KG1609',\n    'bdr:W1KG1610',\n    'bdr:W1KG1616',\n    'bdr:W1KG1617',\n    'bdr:W1KG1623',\n    'bdr:W1KG1624',\n    'bdr:W1KG1625',\n    'bdr:W1KG1626',\n    'bdr:W1KG1627',\n    'bdr:W1KG1645',\n    'bdr:W1KG1646',\n    'bdr:W1KG1653',\n    'bdr:W1KG1655',\n    'bdr:W1KG1656',\n    'bdr:W1KG1657',\n    'bdr:W1KG1658',\n    'bdr:W1KG2144',\n    'bdr:W1KG26108',\n    'bdr:W1KG5182',\n    'bdr:W1KG5200',\n    'bdr:W22344',\n    'bdr:W22434',\n    'bdr:W22677',\n    'bdr:W8238'\n]","import elasticsearch from 'elasticsearch'\nimport { log } from './actions'\n\nconst port = 9200;\n//const host = process.env.NODE_ENV === 'production' ? '157.230.172.69' : 'localhost';\nconst host = '157.230.172.69' // : 'localhost';\n\n\nlet isConnected = false\nlet healthStatus = 'red'\n\nconst client = new elasticsearch.Client({\n\thost: {\n\t\tprotocol: 'http',\n\t\thost: host,\n\t\tport: port,\n\t\tpath: ''\n\t},\n\tlog: 'info' //'trace'\n})\n\nasync function checkConnection() {\n\tlog('process.env.NODE_ENV ', host);\n\twhile(!isConnected) {\n\t\tlog('Connnnnecting....')\n\t\twhile(healthStatus === 'red') {\n\t\t\tlog('awaiting green light')\n\t\t\ttry {\n\t\t\t\tconst health = await client.cluster.health({});\n\t\t\t\tlog('health: ', health)\n\t\t\t\thealthStatus = health.status\n\t\t\t\tisConnected = true\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error('Connection is failing...', err)\n\t\t\t\tisConnected = false\n\t\t\t}\n\t\t}\n    }\n    \n    // HAVE A LOOK INTO THIS FOR FILTERING OBJECTS\n    // Object.filter = (obj, predicate) => \n    // Object.assign(...Object.keys(obj)\n    //                 .filter( key => predicate(obj[key]) )\n    //                 .map( key => ({ [key]: obj[key] }) ) );\n\n    // STATS MODULE to retreive indices\n    // client.indices.stats({\n    //     index: \"_all\",\n    //     level: \"indices\"\n    //  }, function(err, res) {\n    //     // res contains JSON data about indices stats\n    //     log('stats', res.indices)\n    //  });\n    \n\treturn isConnected;\n}\n\nexport { client, checkConnection, isConnected, log };","import { client } from '../connection'\nimport { searchParams } from '../../store/actions'\n\nexport const initialAuthorSearch = (ids) => {\n\n\tconst body = {\n\n        // aggregations.uniqueAuthors.buckets.map()\n        \n\n\n        aggregations: {\n            uniqueAuthors: {\n                terms: {\n                    field: \"workCreator.keyword\",\n                    size: ids.length\n                }\n            }\n        },\n        \n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n\n\t}\n\n\treturn client.search({ index: searchParams.initialIndex, body })\n\n}\n","import { client } from '../connection'\nimport { searchParams } from '../../store/actions'\n\nexport const initialTopicsSearch = (ids) => {\n\n\tconst body = {\n\n        // aggregations.uniqueAuthors.buckets.map()\n        aggregations: {\n            uniqueTopics: {\n                terms: {\n                    field: \"workIsAbout.keyword\",\n                    size: ids.length\n                }\n            }\n        },\n        \n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n\n\t}\n\n\treturn client.search({ index: searchParams.initialIndex, body })\n\n}\n","import { client, log } from '../connection'\nimport { searchParams } from '../../store/actions'\n\nexport const searchByID = (ids, size, code, allSource = false) => {\n\n    let sortValue = null\n    let index\n    let source = []\n    let sort = \"asc\"\n\n    if(code === \"P\") {\n        index = \"v1_bdrc_person\"\n        source = [\"personName\", \"skos:prefLabel\", \"_*\"]\n\n    } else if(code === \"T\") {\n        index = [\"v1_bdrc_person\", \"v1_bdrc_topic\", \"v1_bdrc_work\"]\n        source = [\n            \"personName\", \"@id\", \"note.noteText\", \"skos:prefLabel\", \n            \"workCreator\", \"workIsAbout\",\n            \"_*\"\n        ]\n    }\n    \n    else if(code === \"W\") {\n        index = \"v1_bdrc_work\"\n        sortValue = \"skos:prefLabel.@value.keyword\"\n        source = [\n            \"@id\", \"note.noteText\", \"skos:prefLabel\", \n            \"workCreator\", \"workIsAbout\",\n            \"_*\"\n        ]\n\n    }\n\t\n\tconst body = {\n\t\t\n        size: size,\n        \n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n        \n    }\n\n    if(!allSource) { body._source = source }\n    \n    if(sortValue !== null) {\n        // note the [] around variable in the value being appended...?\n        body.sort = [ { [sortValue]: { \"order\" : sort } }]\n    }\n\n\tlog('search by id body', body)\n\n\treturn client.search({ index: index, body })\n\n}\n","import { log, searchParams } from './index'\nimport * as types from './types'\nimport { collection_v1 } from '../collections/nlm01'\n\nimport {\n    initialTopicsSearch,\n    initialAuthorSearch,\n    searchByID,\n    searchResources\n} from '../queries'\n\n\n/* ******************************************\nDATA\nElasticsearch data from http://142.93.23.6:9200\n********************************************/\nfunction requestData() {\n    return {\n        type: types.REQUEST_DATA\n    }\n}\n\nfunction receiveData(json) {\n    return {\n        type: types.RECEIVE_DATA,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchData() {\n    return async dispatch => {\n        dispatch(requestData())\n        try {\n            const data = await searchByID(collection_v1, collection_v1.length, \"W\")\n            return dispatch(receiveData(data))\n        } catch (error) {\n            console.error('there been fetchData error ', error)\n        }\n    }\n}\n\nexport function fetchAuthors() {\n    return async dispatch => {\n        dispatch(requestAuthors())\n        try {\n            const a = await initialAuthorSearch(collection_v1)\n            const authors = a.aggregations.uniqueAuthors.buckets.map(a => {\n                return a.key\n            })\n            const data = await searchByID(authors, authors.length, \"P\")\n            return dispatch(receiveAuthors(data))\n        } catch(error) {\n            console.error('been done error', error)\n        }\n    }\n}\n\nexport function fetchTopics() {\n    return async dispatch => {\n        dispatch(requestTopics())\n        try {\n            const t = await initialTopicsSearch(collection_v1)\n            log('initial topic search', t)\n            const topics = t.aggregations.uniqueTopics.buckets.map(t => {\n                return t.key\n            })\n            log(topics, topics.length)\n            const data = await searchByID(topics, topics.length, \"T\")\n            log(data)\n            return dispatch(receiveTopics(data))\n        } catch(error) {\n            console.error('been topic error', error)\n        }\n    }\n}\n\nfunction requestAuthors() {\n    return {\n        type: types.REQUEST_AUTHORS\n    }\n}\nfunction receiveAuthors(data) {\n    return {\n        type: types.RECEIVE_AUTHORS,\n        data: data,\n        receivedAt: Date.now()\n    }\n}\n\nfunction requestTopics() {\n    return {\n        type: types.REQUEST_TOPICS\n    }\n}\nfunction receiveTopics(data) {\n    return {\n        type: types.RECEIVE_TOPICS,\n        data: data,\n        receivedAt: Date.now()\n    }\n}\n\nfunction requestID() {\n    return {\n        type: types.REQUEST_ID\n    }\n}\n\nfunction receiveID(json) {\n    return {\n        type: types.RECEIVE_ID,\n        data: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        imageAsset: json.hits.hits[0]._source.workHasItemImageAsset,\n        volume: json.hits.hits[0]._source.workHasItem,\n        receivedAt: Date.now()\n    }\n}\n\nfunction requestResources() {\n    return {\n        type: types.REQUEST_RESOURCES\n    }\n}\n\nfunction receiveResources(json) {\n    return {\n        type: types.RECEIVE_RESOURCES,\n        data: json.hits,\n        receivedAt: Date.now()\n    }\n}\n\nexport const fetchResources = (id, resources) => {\n    return dispatch => {\n        log('fetch resources', id, resources)\n        dispatch(requestResources())\n        try {\n            searchResources(resources).then((data) => {\n                dispatch(receiveResources(data))\n            })\n        } catch (error) {\n            console.error('fetch resources error, ', error)\n        }\n    }\n}\n\nexport function fetchSpecificID(doc_id) {\n    return dispatch => {  \n        log('fetchSpecificID!', doc_id)\n        dispatch(requestID())\n        try {\n            searchByID([doc_id], 1, doc_id.charAt(4), true).then((dataDetail) => {\n                return dispatch(receiveID(dataDetail))\n            })\n        } catch(error) {\n            console.error('fetch ID error! ', error)\n        }\n    }\n}\n","import { client, log } from '../connection'\nimport { searchParams, v1Indices } from '../actions'\n\nexport const searchResources = (ids) => {\n\n\t// const index = [\n\t// \t't_bdrc_work', 't_bdrc_topic', 't_bdrc_person', \n\t// \t't_bdrc_item', 't_bdrc_geography'\n\t// ] \n\n\tlog('how many resources', ids.length)\n\n\tconst index = [v1Indices]\n\t\n\tconst body = {\n\t\t\n\t\tsize: ids.length,\n\t\tquery: {\n            ids: {\n                type: searchParams.type,\n                values: ids\n            }\n        }\n\t}\n\t\n\tlog('resource search body', body)\n\n\treturn client.search({\n\t\t\tindex,\n\t\t\tbody\n\t\t})\n}","import Tabletop from 'tabletop'\nimport * as types from './types'\nimport { log } from './index'\n\nconst d = `https://docs.google.com/spreadsheets/d/`\nconst gsKey = `1hPqe-Y2TWwMTAxIEXYvc8du_GMFUJQNPvZbJou7veAY`\n//const testKey = `1P6Dk9SN0af7GDitw7-tRXGc5N22AEXoaOpDIKzVdlK0`\nconst spreadSheet = `${d}${gsKey}/edit?usp=sharing`\n\nfunction requestGS() {\n    return {\n        type: types.REQUEST_GS\n    }\n}\n\nfunction receiveGS(gs) {\n    return {\n        type: types.RECEIVE_GS,\n        gs: gs,\n        receivedAt: Date.now()\n    }\n}\n\nconst tableTopInit = async () => {\n    return await new Promise((response, error) => {\n        Tabletop.init({\n            key: spreadSheet,\n            callback: (data, tabletop) => { \n                response(data.Stats.elements)\n                error(tabletop)\n            }\n            //, simpleSheet: true\n        })\n    })\n}\n\nexport function getGS() {\n    return async dispatch => {\n        dispatch(requestGS())\n        try {\n            const data = await tableTopInit()\n            log('GS Data:', data)\n            // add some data processing\n            let gsData = {}\n            data.map(d => {\n                const key = d.StatName.split(' ').join('')\n                gsData[key] = isNaN(d.Value) ? d.Value : String(d.Value).replace(/(.)(?=(\\d{3})+$)/g,'$1,')\n            })\n            return dispatch(receiveGS(gsData))\n        } catch(error) {\n            console.error('error from tabletop', error)\n        }\n    }\n}\n","import * as types from './types'\nimport { languages } from './index'\n\nexport const nodeWP = 'http://178.128.7.239/'\nexport const onlyIP = '178.128.7.239'\n\nconst endpointWP = 'wp-json/wp/v2/'\n\n/* ******************************************\nPAGES\nwp pages for content pages (about, preservation)\n********************************************/\n\nfunction requestPages() {\n    return {\n        type: types.REQUEST_PAGES\n    }\n}\n\nfunction receivePages(json) {\n    return {\n        type: types.RECEIVE_PAGES,\n        pages: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchPages() {\n    return function(dispatch) {\n        dispatch(requestPages())\n        return fetch(`${nodeWP}${endpointWP}pages?_embed`)\n            .then(\n                response => response.json(),\n                error => console.log('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                //console.log('json pages', json)\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json => { \n                // do NOT receivePages until there are pages!\n                dispatch(receivePages(json)) \n            })\n    }\n}","import * as types from './types'\nimport { languages } from './index'\n\nconst nodeWP = 'http://178.128.7.239/'\nconst endpointWP = 'wp-json/wp/v2/'\n\n/* ******************************************\nPOSTS\nwp posts for home page content\n********************************************/\n\nfunction requestPosts() {\n    return {\n        type: types.REQUEST_POSTS\n    }\n}\n\nfunction receivePosts(json) {\n    return {\n        type: types.RECEIVE_POSTS,\n        posts: json, //.filter(child => child.acf.language === lang), //.data.children.map(child => child.data),\n        receivedAt: Date.now()\n    }\n}\n\nexport function fetchPosts() {\n    return function(dispatch) {\n        dispatch(requestPosts())\n        return fetch(`${nodeWP}${endpointWP}posts?_embed`)\n            .then(\n                response => response.json(),\n                error => console.log('An error ', error)    \n            )\n            .then(json => {\n                //reduce using empty array to group by language\n                return json.reduce((r, a) => {\n                    const x = Object.keys(languages).find(key => languages[key] === a.acf.language)\n                    r[x] = r[x] || [];\n                    r[x].push(a);\n                    return r;\n                }, []);\n            })\n            .then(json =>\n                dispatch(receivePosts(json))\n            )\n    }\n}","export const log = (...msgs) => {\n\tif (process.env.NODE_ENV === 'development') {\n\t\tconsole.log(...msgs)\n\t}\n}\n\n// ES6 sort\nexport const sortNestedES6 = (nestedItem, prop, arr) => {\n    return arr.sort((a, b) => {\n        return a[nestedItem][prop].localeCompare((b[nestedItem][prop]))\n    })\n}\n\n// arr is the array of objects, prop is the property to sort by\nexport const sortNested = (nestedObj, prop, arr) => {\n    return arr.sort((a, b) => {\n        if (a[nestedObj][prop] < b[nestedObj][prop]) {\n            return -1;\n        } else if (a[nestedObj][prop] > b[nestedObj][prop]) {\n            return 1;\n        } else {\n            return 0;\n        }\n    })\n}\n","import { SET_LANG, SET_PAGE } from './types'\n\nexport * from './searchActions'\nexport * from './iiifActions'\nexport * from './googleSheetsActions'\nexport * from './WPPagesActions'\nexport * from './WPPostsActions'\nexport * from './utilityActions'\n\nexport const buildYear = '2018'\nexport const defaultLanguage = 'en'\nexport const languages = {\n  en: \"English\",\n  mn: \"Mongolian\"\n}\n\nexport const searchParams = {\n  initialIndex: 'v1_bdrc_work',\n  type: '_doc',\n  size: 10\n}\n\nexport const v1Indices = ['v1_*']\nexport const v2Indices = ['v2_*']\n\nconst IIIFImageAPI = {\n  region: 'full',\n  size: 'max', //',184', //',92', 'max'\n  rotation: '0',\n  qualityAndFormat: 'default.jpg'\n}\n\nexport const IIIFsuffix = \n  `/${IIIFImageAPI.region}/${IIIFImageAPI.size}/${IIIFImageAPI.rotation}/${IIIFImageAPI.qualityAndFormat}`\n\nexport const setLanguage = language => ({\n  type: SET_LANG,\n  language\n})\n\nexport const setPage = page => ({\n    type: SET_PAGE,\n    page\n})","import { combineReducers } from 'redux'\nimport { connectRouter } from 'connected-react-router'\nimport { defaultLanguage } from '../actions/index'\nimport * as types from '../actions/types'\n\nfunction content(\n    state = {\n        isFetching: false,\n        items: []\n    },\n    action\n) {\n    switch(action.type) {\n        case types.REQUEST_PAGES:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_PAGES:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.pages,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_POSTS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_POSTS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.posts,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_DATA:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_DATA:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_RESOURCES:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_RESOURCES:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case types.RECEIVE_AUTHORS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_AUTHORS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_TOPICS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                items: action.data,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_TOPICS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.REQUEST_GS:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_GS:\n            return Object.assign({}, state, {\n                isFetching: false,\n                gs: action.gs,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_ID:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_ID:\n            return Object.assign({}, state, {\n                isFetching: false,\n                item: action.data,\n                imageAsset: action.imageAsset,\n                volume: action.volume,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_MANIFEST:\n            return Object.assign({}, state, {\n                isFetching: false,\n                manifestURL: action.manifestURL,\n                lastUpdated: action.receivedAt\n            })\n        case types.REQUEST_IIIF:\n            return Object.assign({}, state, {\n                isFetching: true\n            })\n        case types.RECEIVE_IIIF:\n            return Object.assign({}, state, {\n                isFetching: false,\n                firstImage: action.firstImage,\n                lastUpdated: action.receivedAt\n            })\n        case types.NULLIFY_IIIF:\n            return Object.assign({}, state, {\n                firstImage: null\n            })\n        case types.DETAIL_MODAL:\n            return Object.assign({}, state, {\n                modalID: action.modalID,\n                image: action.image,\n                show: action.show\n            })\n        default:\n            return state;\n    }\n}\n\nfunction pages(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_PAGES:\n        case types.REQUEST_PAGES:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction works(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_DATA:\n        case types.REQUEST_DATA:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction resources(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_RESOURCES:\n        case types.REQUEST_RESOURCES:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction authors(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_AUTHORS:\n        case types.REQUEST_AUTHORS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction topics(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_TOPICS:\n        case types.REQUEST_TOPICS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction detailData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_ID:\n        case types.REQUEST_ID:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction gsData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_GS:\n        case types.REQUEST_GS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state\n    }\n}\n\nfunction manifestData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_MANIFEST:\n        case types.REQUEST_MANIFEST:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction IIIFData(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_IIIF:\n        case types.NULLIFY_IIIF:\n        case types.REQUEST_IIIF:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nfunction posts(state = {}, action) {\n    switch(action.type) {\n        case types.RECEIVE_POSTS:\n        case types.REQUEST_POSTS:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\n// should use defaultLanguage code here\nconst selectedLanguage = (state = defaultLanguage, action) => {\n    switch (action.type) {\n        case types.SET_LANG:\n            return action.language\n        case types.LOCATION_CHANGE:\n            if(action.payload.location.pathname.split('/')[1].length === 0) {\n                return state\n            }\n            return action.payload.location.pathname.split('/')[1]\n      default:\n        return state\n    }\n}\n\nfunction detailModal(state = { modalID: 0, image: null }, action) {\n    switch(action.type) {\n        case types.DETAIL_MODAL:\n            return Object.assign({}, state, content(state, action))\n        default:\n            return state;\n    }\n}\n\nconst selectedPage = (state = 'home', action) => {\n    switch (action.type) {\n        case types.SET_PAGE:\n            return action.page\n        default:\n            return state\n    }\n}\n\nconst rootReducer = (history) => combineReducers({\n    router: connectRouter(history),\n    selectedLanguage,\n    selectedPage,\n    pages,\n    posts,\n    works,\n    authors,\n    topics,\n    resources,\n    gsData,\n    detailData,\n    manifestData,\n    IIIFData,\n    detailModal\n})\n\nexport default rootReducer","import React from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nimport { defaultLanguage, setLanguage } from '../store/actions'\n\nconst Language = ({ active, children, dispatch, lang, i18n }) => {\n\n  const changeI18n = (lng) => {\n    console.log('in language connector with', lng)\n    i18n.changeLanguage(lng);\n  }\n  \n  return (\n    <li\n      key={children}\n      onClick={() => {\n        dispatch(setLanguage(lang))\n        changeI18n(lang)\n        }}\n      className={active ? \"lang-active\" : \"lang\"}\n      style={active ? \n        { color: 'red', } :\n        { color: 'black', } \n        }\n    >\n    <button\n      key={children}\n      disabled={active ? true : false}\n      className=\"btn-lang\">\n      {children}\n    </button>\n    </li>\n  )\n}\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedLanguage === state.selectedLanguage,\n  lang: ownProps.selectedLanguage || defaultLanguage\n})\n\nconst withN = new withNamespaces()(Language)\nexport default connect(mapStateToProps)(withN)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport Language from '../containers/Language'\n\n\nimport { withNamespaces } from 'react-i18next'\n\nimport { Link } from 'react-router-dom'\n\n// language codes, ISO 639-1\n// mongolian - mn, english - en, tibetan - bo\nconst Languages = (props) => {\n    let list = []\n    //list = Object.entries(props.t('languageCodes')).map(([k, l]) => {\n        list = Object.entries(props.t('languageCodes')).map(([k, l]) => {\n            //const p = props.page === 'home' ? '' : `/${props.t('pages')[props.page]}`\n            const p = props.page === 'home' ? '' : `/${props.page}`\n            return (\n                <Link key={k} to={`/${k}${p}`} >\n                    <Language key={l} selectedLanguage={k}>\n                        {l}\n                    </Language>\n                </Link>\n            )\n        })\n    return (\n        <ul className=\"language-list\">{list}</ul>\n    );\n}\n\nconst mapStateToProps = (state) => ({\n    page: state.selectedPage\n})\n\nconst withN = new withNamespaces()(Languages)\n//export default withRouter(connect(mapStateToProps)(withN))\nexport default connect(mapStateToProps)(withN)\n//export default withRouter(withNamespaces()(Languages))\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { setPage } from '../store/actions'\nimport { connect } from 'react-redux'\n\nconst NavItem = ({ active, children, onClick }) => (\n    <li\n      key={children}\n       onClick={active ? null : onClick}\n       className={active ? \"nav-active\" : \"nav\"}\n       style={active ? \n        { color: 'red', } :\n        { color: 'black', } \n        }\n    >\n    <button\n      key={children}\n      disabled={active ? true : false}\n      className=\"btn-nav\">\n      {children}\n    </button>\n    </li>\n)\n\nNavItem.propTypes = {\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.node.isRequired,\n  onClick: PropTypes.func.isRequired\n}\n\n\n\nconst mapStateToProps = (state, ownProps) => ({\n  active: ownProps.selectedPage === state.selectedPage\n})\n\nconst mapDispatchToProps = (dispatch, ownProps) => ({\n    onClick: () => dispatch(setPage(ownProps.selectedPage)) \n  });\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(NavItem)\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { Link } from 'react-router-dom'\nimport NavItem from '../containers/NavItem'\nimport { withNamespaces } from 'react-i18next'\nimport { log } from '../store/actions'\n\nconst NavBar = (props) => {\n  log('creating navbar with props', props.navigation)\n    // matching page nav with translated 'pages' object // t('pages')[nav.match] // obj[key]\n    const slugs = props.navigation.map(nav => {\n      const p = nav.match === 'home' ? '' : `/${nav.match}`\n        return (\n          <Link key={nav.slug} to={`/${props.lng}${p}`}>\n            <NavItem key={nav.slug} selectedPage={nav.match}>\n              {props.t('pages')[nav.match]}\n            </NavItem>\n          </Link>\n        )\n      })\n\n    return (\n\t\t<ul className=\"nav-list\">\n\t\t\t{slugs}\n\t\t</ul>\n    )\n\n}\n\nconst createNavigation = (pages) => {\n  \n    return pages.map(c => {\n        return {\n          //match: c.slug.substring(0,4),\n          match: c.slug.split('-')[0],\n          title: c.slug.substring(0,4) ==='home' ? 'Home' : c.title.rendered,\n          slug: c.slug,\n          order: c.menu_order\n        }\n      })\n      \n}\n\nconst mapStateToProps = (state) => ({\n    navigation: createNavigation(state.pages.items[state.selectedLanguage]),\n    lang: state.selectedLanguage,\n    page: state.selectedPage\n})\n\nconst withN = new withNamespaces()(NavBar)\nexport default connect(mapStateToProps)(withN)","import React from 'react'\n\nimport Languages from './Languages'\nimport NavBar from './Nav'\n\nexport const Header = () => {\n    return (\n        <header id=\"header\">\n\t\t\t<Languages />\n            <NavBar />\n\t\t</header>\n    )\n}","import React from 'react'\nimport { withNamespaces } from 'react-i18next'\nimport { onlyIP, buildYear } from '../store/actions'\n\nconst Footer = (props) => {\n    return (\n        <footer id=\"footer\">\n            <div className=\"icon\">\n              <img \n                src={`http://${onlyIP}/wp-content/uploads/2018/10/nlm-logo-no-text.png`} \n                alt=\"mongolia-logo\" />\n            </div>\n            {/* <ul className=\"alt-icons\">\n                <li><a href=\"#1\" className=\"icon fa-twitter\"><span className=\"label\">Twitter</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-facebook\"><span className=\"label\">Facebook</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-linkedin\"><span className=\"label\">LinkedIn</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-github\"><span className=\"label\">GitHub</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-phone\"><span className=\"label\">Phone</span></a></li>\n                <li><a href=\"#1\" className=\"icon fa-envelope\"><span className=\"label\">Email</span></a></li>\n            </ul> */}\n            <ul className=\"menu\">\n                <li>\n                    <a \n                        href=\"mailto:info@asianclassics.org\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\">\n                            {props.t('footer.contact')}\n                    </a>\n                </li>\n                <li>\n                    <a \n                        href=\"http://nationallibrary.mn/mn/\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\">\n                            {props.t('footer.library-site')}\n                    </a>\n                </li>\n                <li>\n                    <a \n                        href=\"http://178.128.7.239/wp-login.php\" \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\">\n                            {props.t('footer.login')}\n                    </a>\n                </li>\n            </ul>\n            <p className=\"copyright\">\n                &copy; {`${buildYear} ${props.t('title')}. ${props.t('footer.rights')}.`}\n            </p>\n        </footer>\n    )\n}\n\nexport default withNamespaces()(Footer)\n\n","import React from 'react'\nimport { connect } from 'react-redux'\nimport { sortNested } from '../store/actions'\nimport '../assets/css/posts.css'\n\n\n\nconst Posts = ({ posts }) => {\n    //console.log(posts)\n    if(!posts) {\n        return <div></div>\n    }\n\n    //const c = sortNested('acf', 'order', posts)\n    \n    return posts.map((post, i) => {\n\n        //strange method to make alternating styles\n        let j = i % 2 === 0 ? 1 : 3;\n        \n        let mediaURL = \"\"\n        if(post._embedded[\"wp:featuredmedia\"]) {\n            mediaURL = post._embedded[\"wp:featuredmedia\"][0].source_url || \"\"\n        }\n\n        if(parseInt(post.acf.columns) === 2) {\n            console.log('2 columns!')\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                            </section>\n                            <section>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n            )\n        } else {\n            return (\n                <section key={i} id={i} className={`wrapper special style${j}`}>\n                    <div className=\"inner\">\n                        <section className=\"spotlights col1\">\n                            <section>\n                                <h2>{post.acf.title}</h2>\n                                <span className=\"image\"><img src={mediaURL} alt=\"\" /></span>\n                                <p dangerouslySetInnerHTML={{__html: post.content.rendered}} />\n                            </section>\n                        </section>\n                    </div>\n                </section>\n                )\n        }\n    })  \n}\n\nconst mapStateToProps = (state) => ({\n    fetchingPosts: state.posts.isFetching,\n    selectedLanguage: state.selectedLanguage,\n    posts: state.posts.isFetching ? [] : sortNested('acf', 'order', state.posts.items[state.selectedLanguage])\n})\n\nexport default connect(mapStateToProps)(Posts)\n","import React from 'react'\nimport img from '../assets/images/UB-woodblock-closeup.jpg'\nimport '../assets/css/stats.css'\n\n\nconst Stats = ({ stats, t }) => {\n    return (\n        <section className=\"wrapper special style3\">\n            <div className=\"inner\">\n                <section className=\"spotlights\">\n                    <section>\n                        <h2>{t('stats.Title')}</h2>\n                        <ul className=\"list-stats\">\n                            <li className=\"stat-item\">\n                                <p>{t('stats.LastUpdate')}: <em>{stats.LastUpdate}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.PagesDigitized')}: <em>{stats.PagesDigitized}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.VolumesDigitized')}: <em>{stats.VolumesDigitized}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.VolumesCataloged')}: <em>{stats[\"VolumesCataloged(normalized)\"]}</em></p>\n                            </li>\n                            <li className=\"stat-item\">\n                            <p>{t('stats.TitlesCataloged')}: <em>{stats[\"TitlesCataloged(ACIP)\"]}</em></p>\n                            </li>\n                        </ul>\n                    </section>\n                    <section>\n                        <span className=\"image\"><img src={img} alt=\"\" /></span>\n                    </section>\n                </section>\n            </div>\n        </section>\n    )\n    \n}\n\nexport default Stats\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\nimport { withNamespaces } from 'react-i18next'\n\nclass Modal extends Component {\n\n    unpackNames = (arr, type) => {\n    \n        if(Array.isArray(arr['rdfs:label'])) {\n            \n            const a = arr['rdfs:label'].map((l, i) => {\n    \n                return (\n                    <p key={i} className=\"modal-text\">\n                        <span className=\"meta-italics\">({l['@language']}): </span>\n                        <span className=\"meta-title\">{l['@value']}</span>\n                    </p>\n                )}\n            )\n    \n            return (\n                <div key={type} className=\"modal-text\">\n                    <span className=\"meta-detail\">{type.split(\"Person\")[1]}: </span>\n                    {a}\n                </div>\n            )\n    \n        } else {\n            return (\n                <p key={type} className=\"modal-text\">\n                    <span className=\"meta-detail\">{type.split(\"Person\")[1]}: </span>\n                    <span className=\"meta-italics\">({arr['rdfs:label']['@language']}): </span>\n                    <span className=\"meta-title\">{arr['rdfs:label']['@value']}</span>\n                </p>\n            )\n        }\n    }\n\n    unpack = (arr) => {\n        if(arr === null) {\n            return null\n        } else if(Array.isArray(arr)) {\n            return arr.map((a, i) => {\n                if(typeof a === 'object') {\n                    return this.unpack(a)\n                } else if(a.substring(0,3) === 'bdr') {\n                    return (\n                        <div key={i} className=\"card-sub-item\">\n                            <div onClick={() => this.showModal(a.split(\":\")[1])}>{a}</div>\n                        </div> \n                    )\n                } else {\n                    return ( <div key={i} className=\"card-sub-item\">{a}</div>)\n                }\n                \n            })\n        } else if (typeof arr === 'object') {\n            // re-factor to allow for retreival of '@value' from any key\n            if(arr.hasOwnProperty('type')) { \n                return this.unpackNames(arr, arr.type) \n            } else {\n                return (\n                    <p key={arr['@value']} className=\"modal-text\">\n                        <span className=\"meta-title\">{arr['@value']}</span>\n                    </p>\n                )\n            }\n            \n        } else if (typeof arr === 'string') {\n            if(arr.substring(0,3) === 'bdr') {\n                return ( <div onClick={() => this.showModal(arr.split(\":\")[1])}>{arr}</div> )\n            } else {\n                return arr\n            }\n            \n        }\n        \n    }\n\n    buildAttribution = (t) => {\n        // SOMETHING ALONG THESE LINES, decide which field holds attribution\n        //let a = biblio !== null ? biblio : null\n        //let a = scan !== null ? scan : null\n\n        // if(Array.isArray(a)) { a = a[0] }\n        // if(a.hasOwnProperty('@value')) { a = a['@value'] }\n        // return a\n\n        return (\n            <p className=\"meta-detail\">\n                <span>{t('archives.attribution')}</span>\n            </p>\n        )\n    }\n\n    parseType = (source, hideModal, firstImage, t) => {\n        let { \n            'skos:prefLabel': label,\n            '@id': id,\n            type,\n            'workCatalogInfo': catalogInfo,\n            // ATTRIBUTION TEXT\n            //'workBiblioNote': biblio,\n            //'workScanInfo': scan\n            personName,\n            note,\n            'adm:access': access\n        } = source\n    \n        const metaDetail = (\n            <p className=\"meta-detail\">\n                <span>{t('modal.detail')} {id}, </span>\n                <span> {type}</span>\n            </p>\n        )\n\n        // ultimately use this block to fetch proper attribution from data\n        // workBiblioNote or workScanInfo\n        const attribution = this.buildAttribution(t)\n\n        const closeBtn = (\n            <button className=\"modal-btn\" onClick={hideModal}>\n                <i className=\"fa fa-2x fa-times\"></i> \n                {t('technical.btn-close')}\n            </button>\n        )\n\n        // set undefined to null for pre-render check\n        note !== undefined ? note = note.noteText : note = null\n    \n        switch(type) {\n            case 'Person':  \n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        <div className=\"\">\n                            <span className=\"lead-item\">{t('modal.names')}: </span>\n                            <span className=\"meta-catalog\">{ this.unpack(personName) }</span>\n                        </div>\n                        {closeBtn}\n                    </div>\n                )\n            case 'Topic':\n                return (\n                    <div className=\"detail-data\">\n                        {metaDetail}\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        {note === null ? null : (\n                            <div className=\"meta-catalog\">{t('modal.note')}: { note !== null ? this.unpack(note) : null }</div>\n                        )}\n                        {closeBtn}\n                    </div>\n                )\n            case 'Work':\n                let scanBtn = this.buildScansBtn(access, t)\n                let img\n                if(access === 'bdr:AccessRestrictedByTbrc') {\n                    img = (\n                        <div>{t('modal.image-restricted')}</div>\n                    )\n                } else if(firstImage === null || firstImage === undefined) {\n                    img = (\n                        <div className=\"blinky\">{t('technical.loading-image')}</div>\n                    )\n                } else {\n                    img = (\n                        <img src={firstImage} width=\"100%\" alt=\"scan\" />\n                    )\n                }\n                \n                return (\n                    <div className=\"detail-data\">\n                        <div className=\"modal-title\">{ this.unpack(label) }</div>\n                        \n                        {metaDetail}\n                        \n                        {img}\n\n                        {attribution}\n                        \n                        <div className=\"meta-catalog\">{ this.unpack(catalogInfo) }</div>\n                        \n                        {closeBtn}{scanBtn}\n                    </div>\n                )\n            default:\n                return null\n        }\n    }\n\n    buildScansBtn(access, t) {\n        let btn = null\n        if(this.props.manifestURL !== undefined) {\n            //window.localStorage.setItem(\"manifestURL\", this.props.manifestURL)\n            if(this.props.manifestURL.length === 0) {\n                //window.localStorage.setItem(\"manifestURL\", \"\")\n                btn = null\n            } else if(access === 'bdr:AccessRestrictedByTbrc') {\n                btn = (\n                    <button disabled={true}>\n                        <i className=\"fa fa-2x fa-eye-slash\"></i> {t('modal.scans-restricted')}\n                    </button>\n                )\n            } else {\n                btn = ( \n                    <a \n                        target=\"_blank\" \n                        rel=\"noopener noreferrer\"\n                        href={process.env.PUBLIC_URL + '/uv.html?manifest=' + this.props.manifestURL}>\n                        <button>\n                            <i className=\"fa fa-2x fa-eye\"></i> {t('modal.scans')}\n                        </button>\n                    </a>\n                )\n            }\n        }\n        return btn\n    }\n    \n    render() {\n        const showHideClassName = this.props.show ? 'modal display-block' : 'modal display-none';\n        let data\n        \n        if(Object.keys(this.props.workDetail).length > 0) {\n            data = this.parseType(\n                this.props.workDetail._source, \n                this.props.hideModal,\n                this.props.image,\n                this.props.t)\n        } else {\n            data = <div className=\"blinky\">{this.props.t('technical.loading')} {this.props.doc_id}</div>\n        }\n        return ( \n            <div \n                className={showHideClassName}\n                onClick={this.props.hideModal}\n            >\n                <section className='modal-main'>\n                    {data}\n                </section>\n            </div>\n        )\n    }\n\n}\n\nconst mapStateToProps = (state) => ({\n    workDetail: state.detailData.isFetching || state.detailModal.modalID === 0 ? {} : state.detailData.item.hits.hits[0],\n    resources: state.resources.isFetching ? [] : state.resources,\n    image: state.detailModal.image,\n    manifestURL: state.manifestData.isFetching || state.detailData.isFetching ? '' : state.manifestData.manifestURL,\n    numberVolumes: state.detailData.isFetching || state.detailModal.modalID === 0 ? null : state.detailData.item.hits.hits[0]._source.workNumberOfVolumes,\n    //firstImage: state.IIIFData.isFetching || state.detailModal.modalID === 0 ? null : state.IIIFData.firstImage\n})\n\nconst withN = withNamespaces()(Modal)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react'\nimport { connect } from 'react-redux'\n\nimport { withNamespaces } from 'react-i18next'\n\nimport Modal from './Modal'\n\nimport { \n    log, \n    IIIFsuffix, \n    fetchSpecificID, \n    fetchResources} from '../store/actions'\n\nimport '../assets/css/archives.css'\n\n/* of interest \n\n// ID & Category\n@id - bdr:...\ntype (Work, Person, Topic)\n\n// LINKS \ncreatorMainAuthor\nworkCreator\nworkGenre\nworkIsAbout (can be an array)\nworkHasPart (usually array)\n\n// For any of these, check the @language\n// TIBETAN bo-x-ewts\nnote.noteText['@value']\n['skos:prefLabel']['@value'] && ['@language']\nworkTitle['rdfs:label'] (can be an array)\n\n// ENGLISH (might be)\nworkBiblioNote\nworkCatalogInfo\n\n*/\nclass Archives extends Component {\n\n    // fetch ID from ES and show modal\n    showModal = (doc_id, resources = null, imageURL = null) => {\n        this.props.dispatch(fetchSpecificID(doc_id))\n        this.props.dispatch(fetchResources(doc_id, resources))\n        this.props.dispatch(\n            { type: 'DETAIL_MODAL', modalID: doc_id, image: imageURL, show: true }\n        )\n    }\n\n    // close modal and nullify the IIIF image so there's no flash\n    // of previous image on next modal\n    hideModal = () => {\n        this.props.dispatch({ type: 'DETAIL_MODAL', show: false})\n        this.props.dispatch({ type: 'NULLIFY_IIIF'})\n    }\n\n    // parse out the frontend index \n    // this index built specifically for UI\n    // so that we can show values immediately, ie. The Buddha, not P809\n    unpackFrontend = (code, o) => {\n        if(code === 'P') {\n            let p = null\n            if(Array.isArray(o.data.personName)) {\n                p = o.data.personName.find(p => p.type === 'PersonPrimaryName');\n                p = p['rdfs:label']['@value']\n            }\n            //console.log('unpacking person', p)\n            return p\n        } else if(code === 'T') {\n            let g = null\n            if(Array.isArray(o.data['skos:prefLabel'])) {\n                g = o.data['skos:prefLabel'].find(g => g['@language'] === 'en')\n                g = g == null ? g = o.data['skos:prefLabel'].find(g => g['@language'] === 'bo-x-ewts') : g  \n                g = g['@value']  \n            } else if(typeof o.data['skos:prefLabel'] === 'object') {\n                g = o.data['skos:prefLabel']['@value']\n            }\n            //console.log('unpacking topic', g)\n            return g\n        } else if(code === 'W') {\n            console.log('I ended up in W', o)\n        } else {\n            return null\n        }\n    }\n\n    // parse out json\n    unpack = (arr) => {\n        \n        if(arr === null || arr === undefined) {\n            return null\n        } else if(Array.isArray(arr)) {\n            return arr.map((a, i) => {\n                // if it's an array of objects then recursion\n                if(typeof a === 'object') {\n                    return this.unpack(a)\n                } else if(a.substring(0,3) === 'bdr') {\n                    return (\n                        <div key={i} className=\"card-sub-item\">\n                            <div>{a}</div>\n                        </div> \n                    )\n                } else {\n                    return ( <div key={i} className=\"card-sub-item\">{a}</div>)\n                }\n                \n            })\n        } else if (typeof arr === 'object') {\n                \n                if('key' in arr) {\n                    // return ID string\n                    if(arr.data.hasOwnProperty('@id')) {\n                        return arr.data['@id']\n                    } \n                    else {\n                        // return a frontend index item\n                        return this.unpackFrontend(arr.code, arr)\n                    }\n                \n                } else if('noteText' in arr) {\n                    return this.unpack(arr.noteText)\n\n                // part of a language / value pair\n                } else if(arr.hasOwnProperty('@value')) {\n                    return arr['@value']\n                } else {\n                    // if you made it this far, it must be an rdfs item\n                    return ( <span key={arr['rdfs:label']['@value']}>{arr['rdfs:label']['@value']}</span> )\n                }\n                \n        } else if (typeof arr === 'string') {\n            // if string begins with bdr then we assume its indexed\n            if(arr.substring(0,3) === 'bdr') {\n                return ( <div>{arr}</div> )\n            } else {\n                return (\n                    <span>{arr}</span>\n                )\n            }\n        }\n    }\n\n    getAuthorNames = (code) => {\n        let n = null\n        if(code === null || code === undefined) {\n            return null\n        } else if(Array.isArray(code)) {\n            code = code[0]\n        }\n        try {\n            const p = this.props.authors.find(p => code === p._id)\n            if(p !== undefined) {\n                if(Array.isArray(p._source.personName)) {\n                    const nameArray = p._source.personName.find(n => \"PersonPrimaryName\" === n.type)\n                    n = nameArray[\"rdfs:label\"][\"@value\"]\n                }\n                else if(typeof p._source.personName === 'object') {\n                    n = p._source.personName[\"rdfs:label\"][\"@value\"]\n                } \n            } else {\n                n = null\n            }\n        } catch(error) {\n            console.log('error in finding author name', error)\n        }\n        return n\n    }\n\n    getPrefLabel = (codes, dataType) => {\n        let n = null\n        let resources = null\n        if(codes === null || codes === undefined) {\n            return null\n        } else if(Array.isArray(codes)) {\n            codes = codes[0]\n        }\n        try {\n            const p = this.props[dataType].find(p => codes === p._id)\n            if(p !== undefined) {\n                if('skos:prefLabel' in p._source) {\n                    \n                    if(Array.isArray(p._source[\"skos:prefLabel\"])) {\n                        if (p._source[\"skos:prefLabel\"].some(l => l[\"@language\"] === 'en')) {\n                            n = p._source[\"skos:prefLabel\"].find(t => \"en\" === t[\"@language\"])\n                            n = n[\"@value\"]\n                        } else if (p._source[\"skos:prefLabel\"].some(l => l[\"@language\"] === 'bo-x-ewts')) {\n                            n = p._source[\"skos:prefLabel\"].find(t => \"bo-x-ewts\" === t[\"@language\"])\n                            n = n[\"@value\"]\n                        }\n                    } else if(typeof p._source[\"skos:prefLabel\"] === 'object') {\n                        n = p._source[\"skos:prefLabel\"][\"@value\"]\n                    }\n\n                } else {\n                    n = null\n                }\n                if('_resources' in p._source) {\n                    resources = p._source._resources\n                }\n            }\n        } catch(error) {\n            console.error('getPrefLabel error in Archives component', error)\n        }\n        return { code: codes, label: n, resources: resources }\n    }\n\n    getImage = (URL) => {\n        // const {\n        //     region,\n        //     size,\n        //     rotation,\n        //     qualityAndFormat\n        // } = IIIFImageAPI\n        // let imageURL = `${URL}/${region}/${size}/${rotation}/${qualityAndFormat}` \n        fetch(URL)\n            .then(response => {\n                log(response)\n        }).catch(error => {\n            console.error(error)\n            //return null\n            //return imageURL\n        })\n    }\n\n    g = (URL) => {\n        let image = null\n        \n        \n        fetch(URL).then(resp => {\n            if(resp.ok) {\n                log(URL)\n                image = `${URL}/${IIIFsuffix}`\n                return image\n            }\n        })\n        \n    }\n\n    render() {\n        if(!this.props.authors.length) {\n            return (\n                <div className=\"blinky\">LOADING</div>\n            )\n        }\n        const items = this.props.works.map((work, i) => {\n            //console.log(work)\n            const { \n                'skos:prefLabel': label,\n                '@id': id,\n                'note': notes,\n                workCreator,\n                workIsAbout,\n                _manifestURL,\n                _firstImageURL,\n                _resources\n            } = work._source\n            \n            // get authors\n            let authors = this.getPrefLabel(workCreator, \"authors\")\n\n            // get subjects\n            let subjects = this.getPrefLabel(workIsAbout, \"subjects\")\n\n            let imageURL = _firstImageURL === \"Not Found\" \n                ? null \n                : `${_firstImageURL}/${IIIFsuffix}`\n            \n                // if(_firstImageURL !== \"Not Found\") {\n            //     fetch(URL).then(resp => {\n            //         if(resp.ok) {\n            //             //log(URL)\n            //             imageURL = \n            //         }\n            //     })\n            // }\n\n            //let imageURL = _firstImageURL === \"Not Found\" ? null : this.g(_firstImageURL)\n            //log('image URL is', imageURL)\n\n            // CARD\n            return (\n                \n                <div key={i} className=\"card\">\n\n                    <p className=\"meta-detail\">{id}</p>\n\n                    { imageURL == null ? null :\n                    <div className=\"card-item card-item-img-link\">\n                        <div className=\"image-first-image-scan\">\n                            <img src={imageURL} alt=\"scan\" width=\"100%\" />\n                        </div> \n                    </div> }\n\n                    <div className=\"card-item\">\n                        <span className=\"item-work-label\">Title: </span>\n                        <span className=\"item-work\">\n                            <span\n                                className=\"card-item-link\"\n                                key={id}\n                                onClick={() => this.showModal(id, _resources, imageURL)}>\n                                {this.unpack(label)}\n                            </span>\n                        </span>\n                    </div>\n\n                    \n\n                    { authors == null ? null : \n                    <div className=\"card-item\">\n                        <span className=\"item-work-label\">Author: </span>\n                        <span className=\"item-work\">\n                            <span \n                                className=\"card-item-link\"\n                                key={authors.code}\n                                onClick={() => this.showModal(authors.code, authors.resources)}>\n                                {authors.label}\n                            </span>\n                        </span>\n                    </div> }\n\n                    { subjects == null ? null : \n                    <div className=\"card-item\">\n                        <span className=\"item-work-label\">Subject: </span>\n                        <span className=\"item-work\">\n                            <span\n                                className=\"card-item-link\"\n                                key={subjects.code}\n                                onClick={() => this.showModal(subjects.code, subjects.resources)}>\n                                {subjects.label}\n                            </span>\n                        </span>\n                    </div> }\n\n                    \n\n                    <p className=\"meta-detail\">{this.unpack(notes)}</p>\n\n                </div>\n            )\n        })\n        // GRID\n        return (\n            <div className=\"grid\">\n                {items}\n                <Modal \n                    key={this.props.doc_id}\n                    hideModal={this.hideModal}\n                    doc_id={this.props.doc_id} \n                    show={this.props.showModal}\n                />\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = (state) => ({\n    works: state.works.isFetching ? [] : state.works.items.hits.hits,\n    authors: state.authors.isFetching ? [] : state.authors.items.hits.hits,\n    subjects: state.topics.isFetching ? [] : state.topics.items.hits.hits,\n    workDetail: state.detailData.isFetching || state.detailModal.modalID === 0 ? {} : state.detailData.item.hits.hits[0],\n    doc_id: state.detailModal.modalID,\n    showModal: state.detailModal.show,\n    manifestURL: state.manifestData.isFetching ? '' : state.manifestData.manifestURL\n})\n\nconst withN = new withNamespaces()(Archives)\nexport default connect(mapStateToProps)(withN)\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\n\nimport { Header } from './Header';\nimport Footer from './Footer';\nimport Posts from './Posts'\nimport Stats from './Stats'\nimport Archives from './Archives'\n\nimport { defaultLanguage, \n  setLanguage,\n  languages,\n  setPage,\n  log\n} from '../store/actions/index'\n\nimport icon from '../assets/images/calligraphy_icon.ico'\nimport png from '../assets/images/endless-knot.png'\n\nimport { withNamespaces } from 'react-i18next'\n\nclass Page extends Component {\n\n  constructor(props) {\n    super(props);\n\n    this.setNumber = {\n      0: 'one',\n      1: 'one',\n      2: 'two',\n      3: 'three',\n      4: 'four'\n    }\n  }\n\n  componentWillMount() { \n    this.languageCheckAndUpdate()\n  }\n\n  componentDidUpdate() {\n    window.onpopstate  = (e) => {\n      e.preventDefault()\n      this.languageCheckAndUpdate()\n    }\n  }\n\n  languageCheckAndUpdate() {\n    const { history, url, selectedPage, dispatch, t } = this.props;\n    if(url.split('/')[2] !== undefined) {\n      if(Object.keys(t('pages')).includes(url.split('/')[2])) {\n        dispatch(setPage('archives'))\n      } else {\n        dispatch(setPage('home'))\n        history.push(`/${url.split('/')[1]}`)\n      }\n    } else {\n      dispatch(setPage('home'))\n    }\n    if(url.split('/')[1] in languages) { \n      this.setLang(url.split('/')[1], selectedPage)\n    } else {\n      this.setLang(defaultLanguage, selectedPage)\n      history.push(defaultLanguage)\n    }  \n  }\n\n  setLang = (lng) => {\n    const { i18n, dispatch } = this.props;\n    i18n.changeLanguage(lng) // change locale\n    dispatch(setLanguage(lng)) // set redux language\n\n  }\n\n  resetPage = () => {\n    this.props.dispatch({ type: 'SET_PAGE', page: 'home' });\n    this.setLang(defaultLanguage)\n  }\n\n  renderPage(selectedPage, pages) {\n    if (!pages.some(e => e.slug.split('-')[0] === selectedPage)) {\n      log('page not there');\n      this.resetPage();\n    }\n    return pages\n      .filter(page => page.slug.split('-')[0] === selectedPage)\n      .map((page, i) => {\n        let mediaURL = null\n        if(page._embedded[\"wp:featuredmedia\"]) {\n          mediaURL = page._embedded[\"wp:featuredmedia\"][0].source_url\n        }\n        return (\n          <div key={page.slug}>\n          \n          <section \n            id=\"banner\" \n            key={page.id}\n            style={{\n              backgroundImage: \n                `linear-gradient(to bottom, \n                  rgba(239, 239, 239,0.1) 50%,\n                  rgba(239, 239, 239,1.0) 100%), \n                  url(${mediaURL})`\n            }}>\n            <header className=\"major\">\n              {/* <span className=\"icon fa-book style7\"></span> */}\n              <span className=\"icon style7\">\n                <img width=\"90px\" alt=\"hi\" src={icon} />\n              </span>\n              <h1>{page.acf.title}</h1>\n              <h3>{page.acf.subtitle}</h3>\n              {/* {this.props.t('description.part2')} */}\n             \n              <div className=\"inner-page\">\n                <section className=\"spotlights-page\">\n                  <p dangerouslySetInnerHTML={{__html: page.content.rendered}} />\n                </section>\n            </div>\n            </header>\n          </section>\n          {/* {selectedPage === 'home' ? null : \n          <section className={`wrapper special style1`}>\n            spotlights orig location\n          </section>\n          } */}\n          </div>\n        )\n    })\n  }\n\n  render() {\n   \n    if(this.props.fetchingPages || this.props.fetchingPosts) {\n        return (\n          <div className=\"blinky\">{this.props.t('technical.loading')}</div>\n        )\n    }\n    return (\n      <div className=\"container\">\n        <Header />\n        { this.renderPage(this.props.selectedPage, this.props.pages) }\n        { log(\"is it archives?\", this.props.selectedPage, this.props.pages)}\n        { this.props.selectedPage === 'home' ? \n          <div>\n            <Stats stats={this.props.gs} t={this.props.t} />\n            <Posts />\n          </div> : null }\n        { this.props.selectedPage === 'archives' ? <Archives /> : null }\n        <Footer />\n      </div>\n    )\n  }\n\n}\n\nconst mapStateToProps = (state) => {\n  //console.log('state in Page component', state)\n  //console.log('ownProps in Page component', ownProps)\n  \n  return {\n    router: state.router,\n    url: state.router.location.pathname,\n    fetchingPages: state.pages.isFetching,\n    selectedLanguage: state.selectedLanguage || defaultLanguage,\n    selectedPage: \n      state.pages.isFetching ? \n      [] : \n      state.pages.items[state.selectedLanguage].some(page => page.slug.split('-')[0] === state.selectedPage) ? \n      state.selectedPage : \"home\",\n    pages: state.pages.isFetching ? [] : state.pages.items[state.selectedLanguage],\n    gs: state.gsData.isFetching ? {} : state.gsData.gs\n  }\n};\n\nconst withN = new withNamespaces()(Page)\nexport default connect(mapStateToProps)(withN);","import React from 'react';\nimport { Route, Switch, Redirect, BrowserRouter as Router } from 'react-router-dom';\n//import { LanguageArray } from './actions'\n\nimport Page from './components/Page'\n\nconst Routes = () => {\n\n    // <Switch> \n    //     <Route exact path=\"/:lng(en|mn)?\" component={LandingPage} />\n    // </Switch>\n\n    //check to see if it's /:l or just l \n    // const route = Object.entries(languages).map(([l, k]) => {\n    //     console.log('creating routes', k, l)\n    //     return <Route key={l} path={`/${k}/:page`} component={Page} />\n    // })\n\n    //return <Route key={l} path={`/${l}/:page`} component={Page} />\n    //using the full lang names here, change to use codes\n    // const route = LanguageArray.map(l => {\n    //     return (\n    //         <Route key={l} path={`/${l}`} component={Page} />\n    //     )\n    // })\n \n    return (\n        <Router>\n            <Switch>\n                {/* <Route exact path=\"/\" component={Page} /> */}\n                {/* <Route path={`/en/home`} component={Page} />\n                <Route path={`/en/arch`} component={Page} /> */}\n                {/* <Route key=\"en\" path={`/en/:page`} component={Page} />\n                <Route key=\"mn\" path={`/mn/:page`} component={Page} /> */}\n                {/* {route} */}\n                <Route path={`/en`} component={Page} />\n                <Route path={`/mn`} component={Page} />\n                <Route path={`/en/archives`} component={Page} />\n                <Route path={`/mn/archives`} component={Page} />\n                <Route path={`/mn/Архивууд`} component={Page} />\n                <Redirect push from=\"*\" to=\"/en\" component={Page} />\n            </Switch>\n        </Router>\n    )\n\n};\n\nexport default Routes;","import i18n from 'i18next';\nimport Backend from 'i18next-xhr-backend';\nimport LanguageDetector from 'i18next-browser-languagedetector';\nimport { reactI18nextModule } from 'react-i18next';\n\n\n// NOTE THAT 'en' is attempting to be loaded because of LanguageDetector (probably)\n// and in our case we're loading 'English'\n// this is due to how I originally coded the component\n// refactor to use language codes :)\n\ni18n\n  // load translation using xhr -> see /public/locales\n  // learn more: https://github.com/i18next/i18next-xhr-backend\n  .use(Backend)\n  // detect user language\n  // learn more: https://github.com/i18next/i18next-browser-languageDetector\n  .use(LanguageDetector)\n  // pass the i18n instance to the react-i18next components.\n  // Alternative use the I18nextProvider: https://react.i18next.com/components/i18nextprovider\n  .use(reactI18nextModule)\n  // init i18next\n  // for all options read: https://www.i18next.com/overview/configuration-options\n  .init({\n    fallbackLng: 'en',\n    debug: true,\n    load: 'languageOnly',\n    returnObjects: true,\n\n    interpolation: {\n      escapeValue: false, // not needed for react as it escapes by default\n    },\n\n    // special options for react-i18next\n    // learn more: https://react.i18next.com/components/i18next-instance\n    react: {\n      wait: true\n    }\n  });\n\n\nexport default i18n;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport * as serviceWorker from './serviceWorker';\n\nimport { createStore, compose, applyMiddleware } from 'redux';\nimport { createLogger } from 'redux-logger';\nimport { Provider } from 'react-redux';\nimport thunkMiddleware from 'redux-thunk'\n\nimport { createBrowserHistory } from 'history'\nimport { routerMiddleware, ConnectedRouter } from 'connected-react-router'\n\nimport { \n    fetchPages, \n    fetchPosts, \n    fetchData, \n    fetchAuthors,\n    fetchTopics,\n    getGS } from './store/actions'\nimport rootReducer from './store/reducers'\n\nimport Routes from './router'\n\nimport { checkConnection } from './store/connection'\n\nimport './assets/css/main.css'\nimport './assets/css/index.css'\n\n// this is what gives the entire app access to t, i18n...\nimport './i18n'\n\nconst loggerMiddleware = createLogger()\nconst history = createBrowserHistory()\n\nconst store = createStore(\n    rootReducer(history),\n    compose(\n        applyMiddleware(\n            routerMiddleware(history),\n            thunkMiddleware,\n            loggerMiddleware \n        )\n    )\n)\n//console.log('initial state index.js', store.getState()) \n// THIS COULD BE REPLACED WITH ONE 'INITIALIZE APP' type function\n// GET PAGES, POSTS, ES DATA\n\nstore.dispatch(fetchPages())\nstore.dispatch(fetchPosts())\n//store.dispatch(fetchData())\n\nstore.dispatch(getGS())\ncheckConnection()\nstore.dispatch(fetchData())\nstore.dispatch(fetchAuthors())\nstore.dispatch(fetchTopics())\n\nconst App = () => {\n    document.body.classList.add('landing');\n    return (\n        <Provider store={store}>\n            <ConnectedRouter history={history}>\n                <Routes />\n            </ConnectedRouter>\n        </Provider>\n    );\n};\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}