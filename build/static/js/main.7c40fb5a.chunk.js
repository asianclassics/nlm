(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{55:function(e,a,t){e.exports=t(97)},91:function(e,a,t){},95:function(e,a,t){},97:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(46),c=t.n(l);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=t(12),i=t(47),o=t(5),u=t(51),m=t(9),d=t.n(m),p=t(14),g=t(28),f=t.n(g),h=t(52),E=t.n(h),v="142.93.23.6",b=!1,y="red";console.log(v);var N=function(){},k=new E.a.Client({host:{protocol:"http",host:v,port:9200,path:""},log:"info"});function w(){return(w=Object(p.a)(d.a.mark(function e(){var a;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N("process.env.NODE_ENV ",v);case 1:if(b){e.next=22;break}N("Connnnnecting....");case 3:if("red"!==y){e.next=20;break}return N("awaiting green light"),e.prev=5,e.next=8,k.cluster.health({});case 8:a=e.sent,N("health: ",a),y=a.status,b=!0,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),console.error("Connection yo, is failing...",e.t0),b=!1;case 18:e.next=3;break;case 20:e.next=1;break;case 22:return e.abrupt("return",b);case 23:case"end":return e.stop()}},e,this,[[5,14]])}))).apply(this,arguments)}var O=function(e){var a={size:10,query:{ids:{type:"_doc",values:e}}};return N("initial search body",a),k.search({index:"frontend",type:"",body:a})},j=function(e){var a={size:10,query:{ids:{type:"_doc",values:e}}};return N("initial search body",a),k.search({index:["bdrc_work","bdrc_topic","bdrc_person"],type:"",body:a})},A="http://206.189.71.52/",_="wp-json/wp/v2/",P=["W22677","W1GS135873","W1KG5200","W22344","W1GS135531","W1KG1132","W1KG10720","W1KG1279","W1KG14700"],L=["English","Mongolian","Tibetan"],D="REQUEST_PAGES";var T="RECEIVE_PAGES";var C="REQUEST_POSTS";var I="RECEIVE_POSTS";var M="REQUEST_DATA";var S="RECEIVE_DATA";var x="REQUEST_ID";var F="RECEIVE_ID";var G="DETAIL_MODAL",W=t(29);function U(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{isFetching:!1,items:[]},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case D:return Object.assign({},e,{isFetching:!0});case T:return Object.assign({},e,{isFetching:!1,items:a.pages,lastUpdated:a.receivedAt});case C:return Object.assign({},e,{isFetching:!0});case I:return Object.assign({},e,{isFetching:!1,items:a.posts,lastUpdated:a.receivedAt});case M:return Object.assign({},e,{isFetching:!0});case S:return Object.assign({},e,{isFetching:!1,items:a.data,lastUpdated:a.receivedAt});case x:return Object.assign({},e,{isFetching:!0});case F:return Object.assign({},e,{isFetching:!1,item:a.data,lastUpdated:a.receivedAt});case G:return Object.assign({},e,{modalID:a.modalID,show:a.show});default:return e}}var R=Object(s.c)({selectedLanguage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L[0],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_LANG":return a.language;default:return e}},selectedPage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"home",a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_PAGE":return a.page;default:return e}},pages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case T:case D:return Object.assign({},e,U(e,a));default:return e}},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case I:case C:return Object.assign({},e,U(e,a));default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case S:case M:return Object.assign({},e,U(e,a));default:return e}},detailData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case F:case x:return Object.assign({},e,U(e,a));default:return e}},detailModal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{modalID:0},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case G:return Object.assign({},e,U(e,a));default:return e}},pagesByLanguage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case T:case D:return Object.assign({},e,Object(W.a)({},a.lang,U(e[a.lang],a)));default:return e}},postsByLanguage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case I:case C:return Object.assign({},e,Object(W.a)({},a.lang,U(e[a.lang],a)));default:return e}}}),H=t(99),K=t(101),V=t(100),B=t(17),Q=t(18),q=t(22),z=t(19),J=t(23),Y=Object(o.b)(function(e,a){return{active:a.selectedLanguage===e.selectedLanguage}},function(e,a){return{onClick:function(){return e({type:"SET_LANG",language:a.selectedLanguage})}}})(function(e){var a=e.active,t=e.children,n=e.onClick;return r.a.createElement("li",{key:t,onClick:a?null:n,className:a?"lang-active":"lang",style:a?{color:"red"}:{color:"black"}},r.a.createElement("button",{key:t,className:"btn-lang"},t))}),$=Object(o.b)(function(e){return{languages:Object.keys(e.pages.items)}})(function(e){var a=e.languages.map(function(e){return r.a.createElement(Y,{key:e,selectedLanguage:e},e)});return r.a.createElement("ul",{className:"language-list"},a)}),X=t(98),Z=Object(o.b)(function(e,a){return{active:a.selectedPage===e.selectedPage}},function(e,a){return{onClick:function(){return e({type:"SET_PAGE",page:a.selectedPage})}}})(function(e){var a=e.active,t=e.children,n=e.onClick;return r.a.createElement("li",{key:t,onClick:a?null:n,className:a?"nav-active":"nav",style:a?{color:"red"}:{color:"black"}},r.a.createElement("button",{key:t,className:"btn-nav"},t))}),ee=Object(o.b)(function(e){return{navigation:(a=e.pages.items[e.selectedLanguage],a.map(function(e){return{match:e.slug.substring(0,4),title:"home"===e.slug.substring(0,4)?"Home":e.title.rendered,slug:e.slug,order:e.menu_order}}))};var a})(function(e){var a=e.navigation.map(function(e){return r.a.createElement(Z,{key:e.slug,selectedPage:e.match},r.a.createElement(X.a,{to:e.slug},e.title))});return r.a.createElement("ul",{className:"nav-list"},a)}),ae=function(){return r.a.createElement("header",{id:"header"},r.a.createElement($,null),r.a.createElement(ee,null))},te=function(){return r.a.createElement("footer",{id:"footer"},r.a.createElement("div",{className:"icon"},r.a.createElement("img",{src:"http://206.189.71.52/wp-content/uploads/2018/10/nlm-logo-no-text.png",alt:"mongolia-logo"})),r.a.createElement("ul",{className:"alt-icons"},r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-twitter"},r.a.createElement("span",{className:"label"},"Twitter"))),r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-facebook"},r.a.createElement("span",{className:"label"},"Facebook"))),r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-linkedin"},r.a.createElement("span",{className:"label"},"LinkedIn"))),r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-github"},r.a.createElement("span",{className:"label"},"GitHub"))),r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-phone"},r.a.createElement("span",{className:"label"},"Phone"))),r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"icon fa-envelope"},r.a.createElement("span",{className:"label"},"Email")))),r.a.createElement("ul",{className:"menu"},r.a.createElement("li",null,r.a.createElement("a",{href:"#1"},"Terms of Use")),r.a.createElement("li",null,r.a.createElement("a",{href:"#1"},"Privacy Policy")),r.a.createElement("li",null,r.a.createElement("a",{href:"#1"},"Contact Us"))),r.a.createElement("p",{className:"copyright"},"\xa9 Untitled Corp. YO. All rights reserved. ACIP."))},ne=Object(o.b)(function(e){return{fetchingPosts:e.posts.isFetching,selectedLanguage:e.selectedLanguage,posts:e.posts.isFetching?[]:e.posts.items[e.selectedLanguage]}})(function(e){var a=e.posts;return a?a.map(function(e,a){var t=a%2===0?1:3,n="";return e._embedded["wp:featuredmedia"]&&(n=e._embedded["wp:featuredmedia"][0].source_url||""),3===t?r.a.createElement("section",{key:a,id:a,className:"wrapper special style".concat(t)},r.a.createElement("div",{className:"inner"},r.a.createElement("section",{className:"spotlights"},r.a.createElement("section",null,r.a.createElement("h2",null,e.acf.title),r.a.createElement("span",{className:"image"},r.a.createElement("img",{src:n,alt:""}))),r.a.createElement("section",null,r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content.rendered}}),r.a.createElement("ul",{className:"actions"},r.a.createElement("li",null,r.a.createElement("a",{href:"#".concat(a+1),className:"button"},e.acf.subtitle))))))):r.a.createElement("section",{key:a,id:a,className:"wrapper special style".concat(t)},r.a.createElement("div",{className:"inner"},r.a.createElement("section",{className:"spotlights"},r.a.createElement("section",null,r.a.createElement("h2",null,e.acf.title),r.a.createElement("p",{dangerouslySetInnerHTML:{__html:e.content.rendered}}),r.a.createElement("ul",{className:"actions"},r.a.createElement("li",null,r.a.createElement("a",{href:"#".concat(a+1),className:"button"},e.acf.subtitle)))),r.a.createElement("section",null,r.a.createElement("span",{className:"image"},r.a.createElement("img",{src:n,alt:""})),r.a.createElement("h2",null,"Lacus elementum")))))}):r.a.createElement("div",null,"NO POSTS")}),re=void 0,le=function e(a){return null===a?null:Array.isArray(a)?a.map(function(a,t){return"object"===typeof a?e(a):"bdr"===a.substring(0,3)?r.a.createElement("div",{key:t,className:"card-sub-item"},r.a.createElement("a",{onClick:function(){return re.showModal(a.split(":")[1])},href:a},a)):r.a.createElement("div",{key:t,className:"card-sub-item"},a)}):"object"===typeof a?a.hasOwnProperty("type")?function(e,a){if(console.log("names ",typeof e["rdfs:label"],e["rdfs:label"]),Array.isArray(e["rdfs:label"])){console.log("WTF i array",e["rdfs:label"]);var t=e["rdfs:label"].map(function(e){return console.log("mapping",e),r.a.createElement("p",{className:"modal-text"},r.a.createElement("span",{className:"meta-italics"},"(",e["@language"],"): "),r.a.createElement("span",{className:"meta-title"},e["@value"]))});return r.a.createElement("div",{className:"modal-text"},r.a.createElement("span",{className:"meta-detail"},a.split("Person")[1],": "),t)}return r.a.createElement("p",{className:"modal-text"},r.a.createElement("span",{className:"meta-detail"},a.split("Person")[1],": "),r.a.createElement("span",{className:"meta-italics"},"(",e["rdfs:label"]["@language"],"): "),r.a.createElement("span",{className:"meta-title"},e["rdfs:label"]["@value"]))}(a,a.type):r.a.createElement("p",{key:a["@value"],className:"modal-text"},r.a.createElement("span",{className:"meta-italics"},"(",a["@language"],"): "),r.a.createElement("span",{className:"meta-title"},a["@value"])):"string"===typeof a?"bdr"===a.substring(0,3)?r.a.createElement("a",{onClick:function(){return re.showModal(a.split(":")[1])},href:a},a):a:void 0},ce=function(e){var a=e.workDetail,t=e.hideModal,n=e.doc_id,l=e.show;console.log("props from MODAL",a);var c,s=l?"modal display-block":"modal display-none";return c=Object.keys(a).length>0?function(e){var a=e["skos:prefLabel"],t=e["@id"],n=e.type,l=e.workCatalogInfo,c=e.personName,s=e.note;switch(s=void 0!==s?s.noteText:null,n){case"Person":return r.a.createElement("div",{className:"detail-data"},r.a.createElement("p",{className:"meta-detail"},r.a.createElement("span",null,"Detail for record ",t,", "),r.a.createElement("span",null," ",n)),r.a.createElement("div",{className:"modal-title"},le(a)),r.a.createElement("div",{className:""},r.a.createElement("span",{className:"lead-item"},"Name(s): "),r.a.createElement("span",{className:"meta-catalog"},le(c))));case"Topic":return r.a.createElement("div",{className:"detail-data"},r.a.createElement("p",{className:"meta-detail"},r.a.createElement("span",null,"Detail for record ",t,", "),r.a.createElement("span",null," ",n)),r.a.createElement("div",{className:"modal-title"},le(a)),null===s?null:r.a.createElement("div",{className:"meta-catalog"},"Note: ",null!==s?le(s):null));case"Work":return r.a.createElement("div",{className:"detail-data"},r.a.createElement("p",{className:"meta-detail"},r.a.createElement("span",null,"Detail for record ",t,", "),r.a.createElement("span",null," ",n)),r.a.createElement("div",{className:"modal-title"},le(a)),r.a.createElement("div",{className:"meta-catalog"},le(l)));default:return null}}(a._source):r.a.createElement("div",null,"LOADING ",n),r.a.createElement("div",{className:s},r.a.createElement("section",{className:"modal-main"},c,r.a.createElement("button",{onClick:t},"Close")))},se=function(e){function a(){var e,t;Object(B.a)(this,a);for(var n=arguments.length,l=new Array(n),c=0;c<n;c++)l[c]=arguments[c];return(t=Object(q.a)(this,(e=Object(z.a)(a)).call.apply(e,[this].concat(l)))).showModal=function(e){t.props.dispatch(function(e){return function(){var a=Object(p.a)(d.a.mark(function a(t){var n;return d.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("fetchSpecificID!",e),t({type:x}),a.prev=2,a.next=5,j([e]);case 5:return n=a.sent,console.log(n),a.abrupt("return",t({type:F,data:n,receivedAt:Date.now()}));case 10:a.prev=10,a.t0=a.catch(2),console.error("error! ",a.t0);case 13:case"end":return a.stop()}},a,this,[[2,10]])}));return function(e){return a.apply(this,arguments)}}()}(e)),t.props.dispatch({type:"DETAIL_MODAL",modalID:e,show:!0})},t.hideModal=function(){t.props.dispatch({type:"DETAIL_MODAL",show:!1})},t.unpackFrontend=function(e,a){if("P"===e){var t=null;return Array.isArray(a.data.personName)&&(t=(t=a.data.personName.find(function(e){return"PersonPrimaryName"===e.type}))["rdfs:label"]["@value"]),t}if("T"===e){var n=null;return Array.isArray(a.data["skos:prefLabel"])?n=(n=null==(n=a.data["skos:prefLabel"].find(function(e){return"en"===e["@language"]}))?a.data["skos:prefLabel"].find(function(e){return"bo-x-ewts"===e["@language"]}):n)["@value"]:"object"===typeof a.data["skos:prefLabel"]&&(n=a.data["skos:prefLabel"]["@value"]),n}if("W"!==e)return null;console.log("I ended up in W",a)},t.unpack=function(e){return null===e||void 0===e?null:Array.isArray(e)?e.map(function(e,a){return"object"===typeof e?t.unpack(e):"bdr"===e.substring(0,3)?r.a.createElement("div",{key:a,className:"card-sub-item"},r.a.createElement("a",{onClick:function(){return t.showModal(e.split(":")[1])},href:e},e)):r.a.createElement("div",{key:a,className:"card-sub-item"},e)}):"object"===typeof e?"key"in e?e.data.hasOwnProperty("@id")?e.data["@id"]:t.unpackFrontend(e.code,e):e.hasOwnProperty("@value")?e["@value"]:r.a.createElement("span",{key:e["rdfs:label"]["@value"]},e["rdfs:label"]["@value"]):"string"===typeof e?"bdr"===e.substring(0,3)?r.a.createElement("a",{onClick:function(){return t.showModal(e.split(":")[1])},href:e},e):r.a.createElement("span",null,e):void 0},t}return Object(J.a)(a,e),Object(Q.a)(a,[{key:"render",value:function(){var e=this,a=this.props.works.map(function(a,t){var n=a._source,l=n["skos:prefLabel"],c=n["@id"],s=(n.workCreator,n.workGenre),i=n.workIsAbout,o=(n.workTitle,n.workHasPart,void 0!==a._source.creatorMainAuthor?a._source.creatorMainAuthor:null),u=null!==o?o.item:null;return console.log("AUTHOR",o),r.a.createElement("div",{key:t,className:"card"},r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-work"},e.unpack(l))),r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-lead"},"Author: "),r.a.createElement("span",{className:"item-btn",onClick:function(){return e.showModal(u)},href:u},e.unpack(o))),r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-lead"},"Genre:"),r.a.createElement("span",null," ",e.unpack(s))),r.a.createElement("div",{className:"card-item"},r.a.createElement("span",{className:"item-lead"},"Topic:"),r.a.createElement("span",null," ",e.unpack(i))),r.a.createElement("button",{onClick:function(){return e.showModal(c.item)}},"More details..."))});return r.a.createElement("div",{className:"grid"},a,r.a.createElement(ce,{key:this.props.doc_id,hideModal:this.hideModal,doc_id:this.props.doc_id,show:this.props.showModal,workDetail:this.props.workDetail}))}}]),a}(n.Component),ie=Object(o.b)(function(e){return{works:e.data.items.hits.hits,workDetail:e.detailData.isFetching||0===e.detailModal.modalID?{}:e.detailData.item.hits.hits[0],doc_id:e.detailModal.modalID,showModal:e.detailModal.show}})(se),oe=function(e){function a(e){var t;return Object(B.a)(this,a),(t=Object(q.a)(this,Object(z.a)(a).call(this,e))).resetPage=function(){t.props.dispatch({type:"SET_PAGE",page:"home"})},t.setNumber={0:"one",1:"one",2:"two",3:"three",4:"four"},t}return Object(J.a)(a,e),Object(Q.a)(a,[{key:"renderPage",value:function(e,a){return a.some(function(a){return a.slug.substring(0,4)===e})||(console.log("page not there"),this.resetPage()),a.filter(function(a){return a.slug.substring(0,4)===e}).map(function(a,t){var n=null;return a._embedded["wp:featuredmedia"]&&(n=a._embedded["wp:featuredmedia"][0].source_url),r.a.createElement("div",{key:a.slug},r.a.createElement("section",{id:"banner",key:a.id,style:{backgroundImage:"linear-gradient(to bottom, \n                  rgba(239, 239, 239,0.1) 50%,\n                  rgba(239, 239, 239,1.0) 100%), \n                  url(".concat(n,")")}},r.a.createElement("header",{className:"major"},r.a.createElement("span",{className:"icon fa-angellist style7"}),r.a.createElement("h1",null,a.acf.title),r.a.createElement("h3",null,a.acf.subtitle)),r.a.createElement("ul",{className:"actions"},r.a.createElement("li",null,r.a.createElement("a",{href:"#1",className:"button scrolly"},"Proceed")))),"home"===e?null:r.a.createElement("section",{className:"wrapper special style1"},r.a.createElement("div",{className:"inner-page"},r.a.createElement("section",{className:"spotlights"},r.a.createElement("p",{dangerouslySetInnerHTML:{__html:a.content.rendered}})))))})}},{key:"render",value:function(){return this.props.fetchingPages||this.props.fetchingPosts?r.a.createElement("div",null,"LOADING"):r.a.createElement("div",{className:"container"},r.a.createElement(ae,null),this.renderPage(this.props.selectedPage,this.props.pages,this.props.meowPage),"home"===this.props.selectedPage?r.a.createElement(ne,null):null,"arch"===this.props.selectedPage?r.a.createElement(ie,null):null,r.a.createElement(te,null))}}]),a}(n.Component),ue=Object(o.b)(function(e){return{fetchingPages:e.pages.isFetching,selectedLanguage:e.selectedLanguage,selectedPage:e.pages.isFetching?[]:e.pages.items[e.selectedLanguage].some(function(a){return a.slug.substring(0,4)===e.selectedPage})?e.selectedPage:"home",pages:e.pages.isFetching?[]:e.pages.items[e.selectedLanguage]}})(oe),me=function(){return r.a.createElement(H.a,null,r.a.createElement(K.a,null,r.a.createElement(V.a,{exact:!0,path:"/",component:ue}),r.a.createElement(V.a,{path:"/:page",component:ue})))},de=(t(91),t(95),Object(i.createLogger)()),pe=Object(s.d)(R,Object(s.a)(u.a,de));pe.dispatch(function(e){return e({type:D}),f()("".concat(A).concat(_,"pages?_embed")).then(function(e){return e.json()},function(e){return console.log("An error ",e)}).then(function(e){return e.reduce(function(e,a){return e[a.acf.language]=e[a.acf.language]||[],e[a.acf.language].push(a),e},[])}).then(function(a){e(function(e){return{type:T,pages:e,receivedAt:Date.now()}}(a))})}),pe.dispatch(function(e){return e({type:C}),f()("".concat(A).concat(_,"posts?_embed")).then(function(e){return e.json()},function(e){return console.log("An error ",e)}).then(function(e){return e.reduce(function(e,a){return e[a.acf.language]=e[a.acf.language]||[],e[a.acf.language].push(a),e},[])}).then(function(a){return e(function(e){return{type:I,posts:e,receivedAt:Date.now()}}(a))})}),pe.dispatch(function(){var e=Object(p.a)(d.a.mark(function e(a){var t;return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a({type:M}),e.prev=1,e.next=4,O(P);case 4:return t=e.sent,e.abrupt("return",a({type:S,data:t,receivedAt:Date.now()}));case 8:e.prev=8,e.t0=e.catch(1),console.error("there been error ",e.t0);case 11:case"end":return e.stop()}},e,this,[[1,8]])}));return function(a){return e.apply(this,arguments)}}()),function(){w.apply(this,arguments)}();c.a.render(r.a.createElement(function(){return document.body.classList.add("landing"),r.a.createElement(o.a,{store:pe},r.a.createElement(me,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[55,2,1]]]);
//# sourceMappingURL=main.7c40fb5a.chunk.js.map